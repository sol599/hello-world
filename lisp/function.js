var _n=Object.create;var Oe=Object.defineProperty,mn=Object.defineProperties,dn=Object.getOwnPropertyDescriptor,vn=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertyNames,xr=Object.getOwnPropertySymbols,gn=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable;var Fr=(e,r,t)=>r in e?Oe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,rr=(e,r)=>{for(var t in r||(r={}))Ar.call(r,t)&&Fr(e,t,r[t]);if(xr)for(var t of xr(r))bn.call(r,t)&&Fr(e,t,r[t]);return e},Sr=(e,r)=>mn(e,vn(r)),wn=e=>Oe(e,"__esModule",{value:!0});var W=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Dn=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of yn(r))!Ar.call(e,a)&&a!=="default"&&Oe(e,a,{get:()=>r[a],enumerable:!(t=dn(r,a))||t.enumerable});return e},Ln=e=>Dn(wn(Oe(e!=null?_n(gn(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var tr=(e,r,t)=>new Promise((a,n)=>{var o=h=>{try{l(t.next(h))}catch(d){n(d)}},f=h=>{try{l(t.throw(h))}catch(d){n(d)}},l=h=>h.done?a(h.value):Promise.resolve(h.value).then(o,f);l((t=t.apply(e,r)).next())});var Cr=W((Wa,Er)=>{function xn(e,r,t,a){var n=-1,o=e==null?0:e.length;for(a&&o&&(t=e[++n]);++n<o;)t=r(t,e[n],n,e);return t}Er.exports=xn});var Mr=W((Za,Pr)=>{function An(e){return function(r){return e==null?void 0:e[r]}}Pr.exports=An});var Or=W((Ya,Nr)=>{var Fn=Mr(),Sn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},En=Fn(Sn);Nr.exports=En});var Br=W((Ja,kr)=>{var Cn=typeof global=="object"&&global&&global.Object===Object&&global;kr.exports=Cn});var Tr=W((Qa,Ir)=>{var Pn=Br(),Mn=typeof self=="object"&&self&&self.Object===Object&&self,Nn=Pn||Mn||Function("return this")();Ir.exports=Nn});var ke=W((Ka,Rr)=>{var On=Tr(),kn=On.Symbol;Rr.exports=kn});var $r=W((Xa,qr)=>{function Bn(e,r){for(var t=-1,a=e==null?0:e.length,n=Array(a);++t<a;)n[t]=r(e[t],t,e);return n}qr.exports=Bn});var Vr=W((eu,jr)=>{var In=Array.isArray;jr.exports=In});var Hr=W((ru,Ur)=>{var Gr=ke(),zr=Object.prototype,Tn=zr.hasOwnProperty,Rn=zr.toString,Ne=Gr?Gr.toStringTag:void 0;function qn(e){var r=Tn.call(e,Ne),t=e[Ne];try{e[Ne]=void 0;var a=!0}catch(o){}var n=Rn.call(e);return a&&(r?e[Ne]=t:delete e[Ne]),n}Ur.exports=qn});var Zr=W((tu,Wr)=>{var $n=Object.prototype,jn=$n.toString;function Vn(e){return jn.call(e)}Wr.exports=Vn});var Kr=W((nu,Qr)=>{var Yr=ke(),Gn=Hr(),zn=Zr(),Un="[object Null]",Hn="[object Undefined]",Jr=Yr?Yr.toStringTag:void 0;function Wn(e){return e==null?e===void 0?Hn:Un:Jr&&Jr in Object(e)?Gn(e):zn(e)}Qr.exports=Wn});var et=W((iu,Xr)=>{function Zn(e){return e!=null&&typeof e=="object"}Xr.exports=Zn});var tt=W((au,rt)=>{var Yn=Kr(),Jn=et(),Qn="[object Symbol]";function Kn(e){return typeof e=="symbol"||Jn(e)&&Yn(e)==Qn}rt.exports=Kn});var st=W((uu,ot)=>{var nt=ke(),Xn=$r(),ei=Vr(),ri=tt(),ti=1/0,it=nt?nt.prototype:void 0,at=it?it.toString:void 0;function ut(e){if(typeof e=="string")return e;if(ei(e))return Xn(e,ut)+"";if(ri(e))return at?at.call(e):"";var r=e+"";return r=="0"&&1/e==-ti?"-0":r}ot.exports=ut});var Be=W((ou,ft)=>{var ni=st();function ii(e){return e==null?"":ni(e)}ft.exports=ii});var lt=W((su,ct)=>{var ai=Or(),ui=Be(),oi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si="\\u0300-\\u036f",fi="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",li=si+fi+ci,hi="["+li+"]",pi=RegExp(hi,"g");function _i(e){return e=ui(e),e&&e.replace(oi,ai).replace(pi,"")}ct.exports=_i});var pt=W((fu,ht)=>{var mi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function di(e){return e.match(mi)||[]}ht.exports=di});var mt=W((cu,_t)=>{var vi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function yi(e){return vi.test(e)}_t.exports=yi});var kt=W((lu,Ot)=>{var dt="\\ud800-\\udfff",gi="\\u0300-\\u036f",bi="\\ufe20-\\ufe2f",wi="\\u20d0-\\u20ff",Di=gi+bi+wi,vt="\\u2700-\\u27bf",yt="a-z\\xdf-\\xf6\\xf8-\\xff",Li="\\xac\\xb1\\xd7\\xf7",xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ai="\\u2000-\\u206f",Fi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gt="A-Z\\xc0-\\xd6\\xd8-\\xde",Si="\\ufe0e\\ufe0f",bt=Li+xi+Ai+Fi,wt="['\u2019]",Dt="["+bt+"]",Ei="["+Di+"]",Lt="\\d+",Ci="["+vt+"]",xt="["+yt+"]",At="[^"+dt+bt+Lt+vt+yt+gt+"]",Pi="\\ud83c[\\udffb-\\udfff]",Mi="(?:"+Ei+"|"+Pi+")",Ni="[^"+dt+"]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+gt+"]",Oi="\\u200d",Et="(?:"+xt+"|"+At+")",ki="(?:"+Me+"|"+At+")",Ct="(?:"+wt+"(?:d|ll|m|re|s|t|ve))?",Pt="(?:"+wt+"(?:D|LL|M|RE|S|T|VE))?",Mt=Mi+"?",Nt="["+Si+"]?",Bi="(?:"+Oi+"(?:"+[Ni,Ft,St].join("|")+")"+Nt+Mt+")*",Ii="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ti="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ri=Nt+Mt+Bi,qi="(?:"+[Ci,Ft,St].join("|")+")"+Ri,$i=RegExp([Me+"?"+xt+"+"+Ct+"(?="+[Dt,Me,"$"].join("|")+")",ki+"+"+Pt+"(?="+[Dt,Me+Et,"$"].join("|")+")",Me+"?"+Et+"+"+Ct,Me+"+"+Pt,Ti,Ii,Lt,qi].join("|"),"g");function ji(e){return e.match($i)||[]}Ot.exports=ji});var It=W((hu,Bt)=>{var Vi=pt(),Gi=mt(),zi=Be(),Ui=kt();function Hi(e,r,t){return e=zi(e),r=t?void 0:r,r===void 0?Gi(e)?Ui(e):Vi(e):e.match(r)||[]}Bt.exports=Hi});var Rt=W((pu,Tt)=>{var Wi=Cr(),Zi=lt(),Yi=It(),Ji="['\u2019]",Qi=RegExp(Ji,"g");function Ki(e){return function(r){return Wi(Yi(Zi(r).replace(Qi,"")),e,"")}}Tt.exports=Ki});var $t=W((_u,qt)=>{function Xi(e,r,t){var a=-1,n=e.length;r<0&&(r=-r>n?0:n+r),t=t>n?n:t,t<0&&(t+=n),n=r>t?0:t-r>>>0,r>>>=0;for(var o=Array(n);++a<n;)o[a]=e[a+r];return o}qt.exports=Xi});var Vt=W((mu,jt)=>{var ea=$t();function ra(e,r,t){var a=e.length;return t=t===void 0?a:t,!r&&t>=a?e:ea(e,r,t)}jt.exports=ra});var nr=W((du,Gt)=>{var ta="\\ud800-\\udfff",na="\\u0300-\\u036f",ia="\\ufe20-\\ufe2f",aa="\\u20d0-\\u20ff",ua=na+ia+aa,oa="\\ufe0e\\ufe0f",sa="\\u200d",fa=RegExp("["+sa+ta+ua+oa+"]");function ca(e){return fa.test(e)}Gt.exports=ca});var Ut=W((vu,zt)=>{function la(e){return e.split("")}zt.exports=la});var Xt=W((yu,Kt)=>{var Ht="\\ud800-\\udfff",ha="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",_a="\\u20d0-\\u20ff",ma=ha+pa+_a,da="\\ufe0e\\ufe0f",va="["+Ht+"]",ir="["+ma+"]",ar="\\ud83c[\\udffb-\\udfff]",ya="(?:"+ir+"|"+ar+")",Wt="[^"+Ht+"]",Zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Yt="[\\ud800-\\udbff][\\udc00-\\udfff]",ga="\\u200d",Jt=ya+"?",Qt="["+da+"]?",ba="(?:"+ga+"(?:"+[Wt,Zt,Yt].join("|")+")"+Qt+Jt+")*",wa=Qt+Jt+ba,Da="(?:"+[Wt+ir+"?",ir,Zt,Yt,va].join("|")+")",La=RegExp(ar+"(?="+ar+")|"+Da+wa,"g");function xa(e){return e.match(La)||[]}Kt.exports=xa});var rn=W((gu,en)=>{var Aa=Ut(),Fa=nr(),Sa=Xt();function Ea(e){return Fa(e)?Sa(e):Aa(e)}en.exports=Ea});var nn=W((bu,tn)=>{var Ca=Vt(),Pa=nr(),Ma=rn(),Na=Be();function Oa(e){return function(r){r=Na(r);var t=Pa(r)?Ma(r):void 0,a=t?t[0]:r.charAt(0),n=t?Ca(t,1).join(""):r.slice(1);return a[e]()+n}}tn.exports=Oa});var un=W((wu,an)=>{var ka=nn(),Ba=ka("toUpperCase");an.exports=Ba});var sn=W((Du,on)=>{var Ia=Rt(),Ta=un(),Ra=Ia(function(e,r,t){return e+(t?" ":"")+Ta(r)});on.exports=Ra});var cn=W(()=>{});var hn=W((ln,ur)=>{(function(e,r){"use strict";function t(L,u){if(!L)throw new Error(u||"Assertion failed")}function a(L,u){L.super_=u;var c=function(){};c.prototype=u.prototype,L.prototype=new c,L.prototype.constructor=L}function n(L,u,c){if(n.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((u==="le"||u==="be")&&(c=u,u=10),this._init(L||0,u||10,c||"be"))}typeof e=="object"?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?o=window.Buffer:o=cn().Buffer}catch(L){}n.isBN=function(u){return u instanceof n?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===n.wordSize&&Array.isArray(u.words)},n.max=function(u,c){return u.cmp(c)>0?u:c},n.min=function(u,c){return u.cmp(c)<0?u:c},n.prototype._init=function(u,c,m){if(typeof u=="number")return this._initNumber(u,c,m);if(typeof u=="object")return this._initArray(u,c,m);c==="hex"&&(c=16),t(c===(c|0)&&c>=2&&c<=36),u=u.toString().replace(/\s+/g,"");var v=0;u[0]==="-"&&(v++,this.negative=1),v<u.length&&(c===16?this._parseHex(u,v,m):(this._parseBase(u,c,v),m==="le"&&this._initArray(this.toArray(),c,m)))},n.prototype._initNumber=function(u,c,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(t(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),c,m)},n.prototype._initArray=function(u,c,m){if(t(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var _,g,x=0;if(m==="be")for(v=u.length-1,_=0;v>=0;v-=3)g=u[v]|u[v-1]<<8|u[v-2]<<16,this.words[_]|=g<<x&67108863,this.words[_+1]=g>>>26-x&67108863,x+=24,x>=26&&(x-=26,_++);else if(m==="le")for(v=0,_=0;v<u.length;v+=3)g=u[v]|u[v+1]<<8|u[v+2]<<16,this.words[_]|=g<<x&67108863,this.words[_+1]=g>>>26-x&67108863,x+=24,x>=26&&(x-=26,_++);return this._strip()};function f(L,u){var c=L.charCodeAt(u);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;t(!1,"Invalid character in "+L)}function l(L,u,c){var m=f(L,c);return c-1>=u&&(m|=f(L,c-1)<<4),m}n.prototype._parseHex=function(u,c,m){this.length=Math.ceil((u.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var _=0,g=0,x;if(m==="be")for(v=u.length-1;v>=c;v-=2)x=l(u,c,v)<<_,this.words[g]|=x&67108863,_>=18?(_-=18,g+=1,this.words[g]|=x>>>26):_+=8;else{var y=u.length-c;for(v=y%2==0?c+1:c;v<u.length;v+=2)x=l(u,c,v)<<_,this.words[g]|=x&67108863,_>=18?(_-=18,g+=1,this.words[g]|=x>>>26):_+=8}this._strip()};function h(L,u,c,m){for(var v=0,_=0,g=Math.min(L.length,c),x=u;x<g;x++){var y=L.charCodeAt(x)-48;v*=m,y>=49?_=y-49+10:y>=17?_=y-17+10:_=y,t(y>=0&&_<m,"Invalid character"),v+=_}return v}n.prototype._parseBase=function(u,c,m){this.words=[0],this.length=1;for(var v=0,_=1;_<=67108863;_*=c)v++;v--,_=_/c|0;for(var g=u.length-m,x=g%v,y=Math.min(g,g-x)+m,s=0,w=m;w<y;w+=v)s=h(u,w,w+v,c),this.imuln(_),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(x!==0){var I=1;for(s=h(u,w,u.length,c),w=0;w<x;w++)I*=c;this.imuln(I),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},n.prototype.copy=function(u){u.words=new Array(this.length);for(var c=0;c<this.length;c++)u.words[c]=this.words[c];u.length=this.length,u.negative=this.negative,u.red=this.red};function d(L,u){L.words=u.words,L.length=u.length,L.negative=u.negative,L.red=u.red}if(n.prototype._move=function(u){d(u,this)},n.prototype.clone=function(){var u=new n(null);return this.copy(u),u},n.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol!="undefined"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch(L){n.prototype.inspect=p}else n.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(u,c){u=u||10,c=c|0||1;var m;if(u===16||u==="hex"){m="";for(var v=0,_=0,g=0;g<this.length;g++){var x=this.words[g],y=((x<<v|_)&16777215).toString(16);_=x>>>24-v&16777215,_!==0||g!==this.length-1?m=b[6-y.length]+y+m:m=y+m,v+=2,v>=26&&(v-=26,g--)}for(_!==0&&(m=_.toString(16)+m);m.length%c!=0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var s=A[u],w=E[u];m="";var I=this.clone();for(I.negative=0;!I.isZero();){var S=I.modrn(w).toString(u);I=I.idivn(w),I.isZero()?m=S+m:m=b[s-S.length]+S+m}for(this.isZero()&&(m="0"+m);m.length%c!=0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(u,c){return this.toArrayLike(o,u,c)}),n.prototype.toArray=function(u,c){return this.toArrayLike(Array,u,c)};var F=function(u,c){return u.allocUnsafe?u.allocUnsafe(c):new u(c)};n.prototype.toArrayLike=function(u,c,m){this._strip();var v=this.byteLength(),_=m||Math.max(1,v);t(v<=_,"byte array longer than desired length"),t(_>0,"Requested array length <= 0");var g=F(u,_),x=c==="le"?"LE":"BE";return this["_toArrayLike"+x](g,v),g},n.prototype._toArrayLikeLE=function(u,c){for(var m=0,v=0,_=0,g=0;_<this.length;_++){var x=this.words[_]<<g|v;u[m++]=x&255,m<u.length&&(u[m++]=x>>8&255),m<u.length&&(u[m++]=x>>16&255),g===6?(m<u.length&&(u[m++]=x>>24&255),v=0,g=0):(v=x>>>24,g+=2)}if(m<u.length)for(u[m++]=v;m<u.length;)u[m++]=0},n.prototype._toArrayLikeBE=function(u,c){for(var m=u.length-1,v=0,_=0,g=0;_<this.length;_++){var x=this.words[_]<<g|v;u[m--]=x&255,m>=0&&(u[m--]=x>>8&255),m>=0&&(u[m--]=x>>16&255),g===6?(m>=0&&(u[m--]=x>>24&255),v=0,g=0):(v=x>>>24,g+=2)}if(m>=0)for(u[m--]=v;m>=0;)u[m--]=0},Math.clz32?n.prototype._countBits=function(u){return 32-Math.clz32(u)}:n.prototype._countBits=function(u){var c=u,m=0;return c>=4096&&(m+=13,c>>>=13),c>=64&&(m+=7,c>>>=7),c>=8&&(m+=4,c>>>=4),c>=2&&(m+=2,c>>>=2),m+c},n.prototype._zeroBits=function(u){if(u===0)return 26;var c=u,m=0;return(c&8191)==0&&(m+=13,c>>>=13),(c&127)==0&&(m+=7,c>>>=7),(c&15)==0&&(m+=4,c>>>=4),(c&3)==0&&(m+=2,c>>>=2),(c&1)==0&&m++,m},n.prototype.bitLength=function(){var u=this.words[this.length-1],c=this._countBits(u);return(this.length-1)*26+c};function M(L){for(var u=new Array(L.bitLength()),c=0;c<u.length;c++){var m=c/26|0,v=c%26;u[c]=L.words[m]>>>v&1}return u}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,c=0;c<this.length;c++){var m=this._zeroBits(this.words[c]);if(u+=m,m!==26)break}return u},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},n.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var c=0;c<u.length;c++)this.words[c]=this.words[c]|u.words[c];return this._strip()},n.prototype.ior=function(u){return t((this.negative|u.negative)==0),this.iuor(u)},n.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},n.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},n.prototype.iuand=function(u){var c;this.length>u.length?c=u:c=this;for(var m=0;m<c.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=c.length,this._strip()},n.prototype.iand=function(u){return t((this.negative|u.negative)==0),this.iuand(u)},n.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},n.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},n.prototype.iuxor=function(u){var c,m;this.length>u.length?(c=this,m=u):(c=u,m=this);for(var v=0;v<m.length;v++)this.words[v]=c.words[v]^m.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this._strip()},n.prototype.ixor=function(u){return t((this.negative|u.negative)==0),this.iuxor(u)},n.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},n.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},n.prototype.inotn=function(u){t(typeof u=="number"&&u>=0);var c=Math.ceil(u/26)|0,m=u%26;this._expand(c),m>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return m>0&&(this.words[v]=~this.words[v]&67108863>>26-m),this._strip()},n.prototype.notn=function(u){return this.clone().inotn(u)},n.prototype.setn=function(u,c){t(typeof u=="number"&&u>=0);var m=u/26|0,v=u%26;return this._expand(m+1),c?this.words[m]=this.words[m]|1<<v:this.words[m]=this.words[m]&~(1<<v),this._strip()},n.prototype.iadd=function(u){var c;if(this.negative!==0&&u.negative===0)return this.negative=0,c=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,c=this.isub(u),u.negative=1,c._normSign();var m,v;this.length>u.length?(m=this,v=u):(m=u,v=this);for(var _=0,g=0;g<v.length;g++)c=(m.words[g]|0)+(v.words[g]|0)+_,this.words[g]=c&67108863,_=c>>>26;for(;_!==0&&g<m.length;g++)c=(m.words[g]|0)+_,this.words[g]=c&67108863,_=c>>>26;if(this.length=m.length,_!==0)this.words[this.length]=_,this.length++;else if(m!==this)for(;g<m.length;g++)this.words[g]=m.words[g];return this},n.prototype.add=function(u){var c;return u.negative!==0&&this.negative===0?(u.negative=0,c=this.sub(u),u.negative^=1,c):u.negative===0&&this.negative!==0?(this.negative=0,c=u.sub(this),this.negative=1,c):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},n.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var c=this.iadd(u);return u.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,_;m>0?(v=this,_=u):(v=u,_=this);for(var g=0,x=0;x<_.length;x++)c=(v.words[x]|0)-(_.words[x]|0)+g,g=c>>26,this.words[x]=c&67108863;for(;g!==0&&x<v.length;x++)c=(v.words[x]|0)+g,g=c>>26,this.words[x]=c&67108863;if(g===0&&x<v.length&&v!==this)for(;x<v.length;x++)this.words[x]=v.words[x];return this.length=Math.max(this.length,x),v!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(u){return this.clone().isub(u)};function D(L,u,c){c.negative=u.negative^L.negative;var m=L.length+u.length|0;c.length=m,m=m-1|0;var v=L.words[0]|0,_=u.words[0]|0,g=v*_,x=g&67108863,y=g/67108864|0;c.words[0]=x;for(var s=1;s<m;s++){for(var w=y>>>26,I=y&67108863,S=Math.min(s,u.length-1),R=Math.max(0,s-L.length+1);R<=S;R++){var $=s-R|0;v=L.words[$]|0,_=u.words[R]|0,g=v*_+I,w+=g/67108864|0,I=g&67108863}c.words[s]=I|0,y=w|0}return y!==0?c.words[s]=y|0:c.length--,c._strip()}var C=function(u,c,m){var v=u.words,_=c.words,g=m.words,x=0,y,s,w,I=v[0]|0,S=I&8191,R=I>>>13,$=v[1]|0,U=$&8191,z=$>>>13,Pe=v[2]|0,Z=Pe&8191,Y=Pe>>>13,or=v[3]|0,J=or&8191,Q=or>>>13,sr=v[4]|0,K=sr&8191,X=sr>>>13,fr=v[5]|0,ee=fr&8191,re=fr>>>13,cr=v[6]|0,te=cr&8191,ne=cr>>>13,lr=v[7]|0,ie=lr&8191,ae=lr>>>13,hr=v[8]|0,ue=hr&8191,oe=hr>>>13,pr=v[9]|0,se=pr&8191,fe=pr>>>13,_r=_[0]|0,ce=_r&8191,le=_r>>>13,mr=_[1]|0,he=mr&8191,pe=mr>>>13,dr=_[2]|0,_e=dr&8191,me=dr>>>13,vr=_[3]|0,de=vr&8191,ve=vr>>>13,yr=_[4]|0,ye=yr&8191,ge=yr>>>13,gr=_[5]|0,be=gr&8191,we=gr>>>13,br=_[6]|0,De=br&8191,Le=br>>>13,wr=_[7]|0,xe=wr&8191,Ae=wr>>>13,Dr=_[8]|0,Fe=Dr&8191,Se=Dr>>>13,Lr=_[9]|0,Ee=Lr&8191,Ce=Lr>>>13;m.negative=u.negative^c.negative,m.length=19,y=Math.imul(S,ce),s=Math.imul(S,le),s=s+Math.imul(R,ce)|0,w=Math.imul(R,le);var Ie=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,y=Math.imul(U,ce),s=Math.imul(U,le),s=s+Math.imul(z,ce)|0,w=Math.imul(z,le),y=y+Math.imul(S,he)|0,s=s+Math.imul(S,pe)|0,s=s+Math.imul(R,he)|0,w=w+Math.imul(R,pe)|0;var Te=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,y=Math.imul(Z,ce),s=Math.imul(Z,le),s=s+Math.imul(Y,ce)|0,w=Math.imul(Y,le),y=y+Math.imul(U,he)|0,s=s+Math.imul(U,pe)|0,s=s+Math.imul(z,he)|0,w=w+Math.imul(z,pe)|0,y=y+Math.imul(S,_e)|0,s=s+Math.imul(S,me)|0,s=s+Math.imul(R,_e)|0,w=w+Math.imul(R,me)|0;var Re=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,y=Math.imul(J,ce),s=Math.imul(J,le),s=s+Math.imul(Q,ce)|0,w=Math.imul(Q,le),y=y+Math.imul(Z,he)|0,s=s+Math.imul(Z,pe)|0,s=s+Math.imul(Y,he)|0,w=w+Math.imul(Y,pe)|0,y=y+Math.imul(U,_e)|0,s=s+Math.imul(U,me)|0,s=s+Math.imul(z,_e)|0,w=w+Math.imul(z,me)|0,y=y+Math.imul(S,de)|0,s=s+Math.imul(S,ve)|0,s=s+Math.imul(R,de)|0,w=w+Math.imul(R,ve)|0;var qe=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(qe>>>26)|0,qe&=67108863,y=Math.imul(K,ce),s=Math.imul(K,le),s=s+Math.imul(X,ce)|0,w=Math.imul(X,le),y=y+Math.imul(J,he)|0,s=s+Math.imul(J,pe)|0,s=s+Math.imul(Q,he)|0,w=w+Math.imul(Q,pe)|0,y=y+Math.imul(Z,_e)|0,s=s+Math.imul(Z,me)|0,s=s+Math.imul(Y,_e)|0,w=w+Math.imul(Y,me)|0,y=y+Math.imul(U,de)|0,s=s+Math.imul(U,ve)|0,s=s+Math.imul(z,de)|0,w=w+Math.imul(z,ve)|0,y=y+Math.imul(S,ye)|0,s=s+Math.imul(S,ge)|0,s=s+Math.imul(R,ye)|0,w=w+Math.imul(R,ge)|0;var $e=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(ee,ce),s=Math.imul(ee,le),s=s+Math.imul(re,ce)|0,w=Math.imul(re,le),y=y+Math.imul(K,he)|0,s=s+Math.imul(K,pe)|0,s=s+Math.imul(X,he)|0,w=w+Math.imul(X,pe)|0,y=y+Math.imul(J,_e)|0,s=s+Math.imul(J,me)|0,s=s+Math.imul(Q,_e)|0,w=w+Math.imul(Q,me)|0,y=y+Math.imul(Z,de)|0,s=s+Math.imul(Z,ve)|0,s=s+Math.imul(Y,de)|0,w=w+Math.imul(Y,ve)|0,y=y+Math.imul(U,ye)|0,s=s+Math.imul(U,ge)|0,s=s+Math.imul(z,ye)|0,w=w+Math.imul(z,ge)|0,y=y+Math.imul(S,be)|0,s=s+Math.imul(S,we)|0,s=s+Math.imul(R,be)|0,w=w+Math.imul(R,we)|0;var je=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(je>>>26)|0,je&=67108863,y=Math.imul(te,ce),s=Math.imul(te,le),s=s+Math.imul(ne,ce)|0,w=Math.imul(ne,le),y=y+Math.imul(ee,he)|0,s=s+Math.imul(ee,pe)|0,s=s+Math.imul(re,he)|0,w=w+Math.imul(re,pe)|0,y=y+Math.imul(K,_e)|0,s=s+Math.imul(K,me)|0,s=s+Math.imul(X,_e)|0,w=w+Math.imul(X,me)|0,y=y+Math.imul(J,de)|0,s=s+Math.imul(J,ve)|0,s=s+Math.imul(Q,de)|0,w=w+Math.imul(Q,ve)|0,y=y+Math.imul(Z,ye)|0,s=s+Math.imul(Z,ge)|0,s=s+Math.imul(Y,ye)|0,w=w+Math.imul(Y,ge)|0,y=y+Math.imul(U,be)|0,s=s+Math.imul(U,we)|0,s=s+Math.imul(z,be)|0,w=w+Math.imul(z,we)|0,y=y+Math.imul(S,De)|0,s=s+Math.imul(S,Le)|0,s=s+Math.imul(R,De)|0,w=w+Math.imul(R,Le)|0;var Ve=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,y=Math.imul(ie,ce),s=Math.imul(ie,le),s=s+Math.imul(ae,ce)|0,w=Math.imul(ae,le),y=y+Math.imul(te,he)|0,s=s+Math.imul(te,pe)|0,s=s+Math.imul(ne,he)|0,w=w+Math.imul(ne,pe)|0,y=y+Math.imul(ee,_e)|0,s=s+Math.imul(ee,me)|0,s=s+Math.imul(re,_e)|0,w=w+Math.imul(re,me)|0,y=y+Math.imul(K,de)|0,s=s+Math.imul(K,ve)|0,s=s+Math.imul(X,de)|0,w=w+Math.imul(X,ve)|0,y=y+Math.imul(J,ye)|0,s=s+Math.imul(J,ge)|0,s=s+Math.imul(Q,ye)|0,w=w+Math.imul(Q,ge)|0,y=y+Math.imul(Z,be)|0,s=s+Math.imul(Z,we)|0,s=s+Math.imul(Y,be)|0,w=w+Math.imul(Y,we)|0,y=y+Math.imul(U,De)|0,s=s+Math.imul(U,Le)|0,s=s+Math.imul(z,De)|0,w=w+Math.imul(z,Le)|0,y=y+Math.imul(S,xe)|0,s=s+Math.imul(S,Ae)|0,s=s+Math.imul(R,xe)|0,w=w+Math.imul(R,Ae)|0;var Ge=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,y=Math.imul(ue,ce),s=Math.imul(ue,le),s=s+Math.imul(oe,ce)|0,w=Math.imul(oe,le),y=y+Math.imul(ie,he)|0,s=s+Math.imul(ie,pe)|0,s=s+Math.imul(ae,he)|0,w=w+Math.imul(ae,pe)|0,y=y+Math.imul(te,_e)|0,s=s+Math.imul(te,me)|0,s=s+Math.imul(ne,_e)|0,w=w+Math.imul(ne,me)|0,y=y+Math.imul(ee,de)|0,s=s+Math.imul(ee,ve)|0,s=s+Math.imul(re,de)|0,w=w+Math.imul(re,ve)|0,y=y+Math.imul(K,ye)|0,s=s+Math.imul(K,ge)|0,s=s+Math.imul(X,ye)|0,w=w+Math.imul(X,ge)|0,y=y+Math.imul(J,be)|0,s=s+Math.imul(J,we)|0,s=s+Math.imul(Q,be)|0,w=w+Math.imul(Q,we)|0,y=y+Math.imul(Z,De)|0,s=s+Math.imul(Z,Le)|0,s=s+Math.imul(Y,De)|0,w=w+Math.imul(Y,Le)|0,y=y+Math.imul(U,xe)|0,s=s+Math.imul(U,Ae)|0,s=s+Math.imul(z,xe)|0,w=w+Math.imul(z,Ae)|0,y=y+Math.imul(S,Fe)|0,s=s+Math.imul(S,Se)|0,s=s+Math.imul(R,Fe)|0,w=w+Math.imul(R,Se)|0;var ze=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(ze>>>26)|0,ze&=67108863,y=Math.imul(se,ce),s=Math.imul(se,le),s=s+Math.imul(fe,ce)|0,w=Math.imul(fe,le),y=y+Math.imul(ue,he)|0,s=s+Math.imul(ue,pe)|0,s=s+Math.imul(oe,he)|0,w=w+Math.imul(oe,pe)|0,y=y+Math.imul(ie,_e)|0,s=s+Math.imul(ie,me)|0,s=s+Math.imul(ae,_e)|0,w=w+Math.imul(ae,me)|0,y=y+Math.imul(te,de)|0,s=s+Math.imul(te,ve)|0,s=s+Math.imul(ne,de)|0,w=w+Math.imul(ne,ve)|0,y=y+Math.imul(ee,ye)|0,s=s+Math.imul(ee,ge)|0,s=s+Math.imul(re,ye)|0,w=w+Math.imul(re,ge)|0,y=y+Math.imul(K,be)|0,s=s+Math.imul(K,we)|0,s=s+Math.imul(X,be)|0,w=w+Math.imul(X,we)|0,y=y+Math.imul(J,De)|0,s=s+Math.imul(J,Le)|0,s=s+Math.imul(Q,De)|0,w=w+Math.imul(Q,Le)|0,y=y+Math.imul(Z,xe)|0,s=s+Math.imul(Z,Ae)|0,s=s+Math.imul(Y,xe)|0,w=w+Math.imul(Y,Ae)|0,y=y+Math.imul(U,Fe)|0,s=s+Math.imul(U,Se)|0,s=s+Math.imul(z,Fe)|0,w=w+Math.imul(z,Se)|0,y=y+Math.imul(S,Ee)|0,s=s+Math.imul(S,Ce)|0,s=s+Math.imul(R,Ee)|0,w=w+Math.imul(R,Ce)|0;var Ue=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,y=Math.imul(se,he),s=Math.imul(se,pe),s=s+Math.imul(fe,he)|0,w=Math.imul(fe,pe),y=y+Math.imul(ue,_e)|0,s=s+Math.imul(ue,me)|0,s=s+Math.imul(oe,_e)|0,w=w+Math.imul(oe,me)|0,y=y+Math.imul(ie,de)|0,s=s+Math.imul(ie,ve)|0,s=s+Math.imul(ae,de)|0,w=w+Math.imul(ae,ve)|0,y=y+Math.imul(te,ye)|0,s=s+Math.imul(te,ge)|0,s=s+Math.imul(ne,ye)|0,w=w+Math.imul(ne,ge)|0,y=y+Math.imul(ee,be)|0,s=s+Math.imul(ee,we)|0,s=s+Math.imul(re,be)|0,w=w+Math.imul(re,we)|0,y=y+Math.imul(K,De)|0,s=s+Math.imul(K,Le)|0,s=s+Math.imul(X,De)|0,w=w+Math.imul(X,Le)|0,y=y+Math.imul(J,xe)|0,s=s+Math.imul(J,Ae)|0,s=s+Math.imul(Q,xe)|0,w=w+Math.imul(Q,Ae)|0,y=y+Math.imul(Z,Fe)|0,s=s+Math.imul(Z,Se)|0,s=s+Math.imul(Y,Fe)|0,w=w+Math.imul(Y,Se)|0,y=y+Math.imul(U,Ee)|0,s=s+Math.imul(U,Ce)|0,s=s+Math.imul(z,Ee)|0,w=w+Math.imul(z,Ce)|0;var He=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(He>>>26)|0,He&=67108863,y=Math.imul(se,_e),s=Math.imul(se,me),s=s+Math.imul(fe,_e)|0,w=Math.imul(fe,me),y=y+Math.imul(ue,de)|0,s=s+Math.imul(ue,ve)|0,s=s+Math.imul(oe,de)|0,w=w+Math.imul(oe,ve)|0,y=y+Math.imul(ie,ye)|0,s=s+Math.imul(ie,ge)|0,s=s+Math.imul(ae,ye)|0,w=w+Math.imul(ae,ge)|0,y=y+Math.imul(te,be)|0,s=s+Math.imul(te,we)|0,s=s+Math.imul(ne,be)|0,w=w+Math.imul(ne,we)|0,y=y+Math.imul(ee,De)|0,s=s+Math.imul(ee,Le)|0,s=s+Math.imul(re,De)|0,w=w+Math.imul(re,Le)|0,y=y+Math.imul(K,xe)|0,s=s+Math.imul(K,Ae)|0,s=s+Math.imul(X,xe)|0,w=w+Math.imul(X,Ae)|0,y=y+Math.imul(J,Fe)|0,s=s+Math.imul(J,Se)|0,s=s+Math.imul(Q,Fe)|0,w=w+Math.imul(Q,Se)|0,y=y+Math.imul(Z,Ee)|0,s=s+Math.imul(Z,Ce)|0,s=s+Math.imul(Y,Ee)|0,w=w+Math.imul(Y,Ce)|0;var We=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(We>>>26)|0,We&=67108863,y=Math.imul(se,de),s=Math.imul(se,ve),s=s+Math.imul(fe,de)|0,w=Math.imul(fe,ve),y=y+Math.imul(ue,ye)|0,s=s+Math.imul(ue,ge)|0,s=s+Math.imul(oe,ye)|0,w=w+Math.imul(oe,ge)|0,y=y+Math.imul(ie,be)|0,s=s+Math.imul(ie,we)|0,s=s+Math.imul(ae,be)|0,w=w+Math.imul(ae,we)|0,y=y+Math.imul(te,De)|0,s=s+Math.imul(te,Le)|0,s=s+Math.imul(ne,De)|0,w=w+Math.imul(ne,Le)|0,y=y+Math.imul(ee,xe)|0,s=s+Math.imul(ee,Ae)|0,s=s+Math.imul(re,xe)|0,w=w+Math.imul(re,Ae)|0,y=y+Math.imul(K,Fe)|0,s=s+Math.imul(K,Se)|0,s=s+Math.imul(X,Fe)|0,w=w+Math.imul(X,Se)|0,y=y+Math.imul(J,Ee)|0,s=s+Math.imul(J,Ce)|0,s=s+Math.imul(Q,Ee)|0,w=w+Math.imul(Q,Ce)|0;var Ze=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,y=Math.imul(se,ye),s=Math.imul(se,ge),s=s+Math.imul(fe,ye)|0,w=Math.imul(fe,ge),y=y+Math.imul(ue,be)|0,s=s+Math.imul(ue,we)|0,s=s+Math.imul(oe,be)|0,w=w+Math.imul(oe,we)|0,y=y+Math.imul(ie,De)|0,s=s+Math.imul(ie,Le)|0,s=s+Math.imul(ae,De)|0,w=w+Math.imul(ae,Le)|0,y=y+Math.imul(te,xe)|0,s=s+Math.imul(te,Ae)|0,s=s+Math.imul(ne,xe)|0,w=w+Math.imul(ne,Ae)|0,y=y+Math.imul(ee,Fe)|0,s=s+Math.imul(ee,Se)|0,s=s+Math.imul(re,Fe)|0,w=w+Math.imul(re,Se)|0,y=y+Math.imul(K,Ee)|0,s=s+Math.imul(K,Ce)|0,s=s+Math.imul(X,Ee)|0,w=w+Math.imul(X,Ce)|0;var Ye=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,y=Math.imul(se,be),s=Math.imul(se,we),s=s+Math.imul(fe,be)|0,w=Math.imul(fe,we),y=y+Math.imul(ue,De)|0,s=s+Math.imul(ue,Le)|0,s=s+Math.imul(oe,De)|0,w=w+Math.imul(oe,Le)|0,y=y+Math.imul(ie,xe)|0,s=s+Math.imul(ie,Ae)|0,s=s+Math.imul(ae,xe)|0,w=w+Math.imul(ae,Ae)|0,y=y+Math.imul(te,Fe)|0,s=s+Math.imul(te,Se)|0,s=s+Math.imul(ne,Fe)|0,w=w+Math.imul(ne,Se)|0,y=y+Math.imul(ee,Ee)|0,s=s+Math.imul(ee,Ce)|0,s=s+Math.imul(re,Ee)|0,w=w+Math.imul(re,Ce)|0;var Je=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Je>>>26)|0,Je&=67108863,y=Math.imul(se,De),s=Math.imul(se,Le),s=s+Math.imul(fe,De)|0,w=Math.imul(fe,Le),y=y+Math.imul(ue,xe)|0,s=s+Math.imul(ue,Ae)|0,s=s+Math.imul(oe,xe)|0,w=w+Math.imul(oe,Ae)|0,y=y+Math.imul(ie,Fe)|0,s=s+Math.imul(ie,Se)|0,s=s+Math.imul(ae,Fe)|0,w=w+Math.imul(ae,Se)|0,y=y+Math.imul(te,Ee)|0,s=s+Math.imul(te,Ce)|0,s=s+Math.imul(ne,Ee)|0,w=w+Math.imul(ne,Ce)|0;var Qe=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(se,xe),s=Math.imul(se,Ae),s=s+Math.imul(fe,xe)|0,w=Math.imul(fe,Ae),y=y+Math.imul(ue,Fe)|0,s=s+Math.imul(ue,Se)|0,s=s+Math.imul(oe,Fe)|0,w=w+Math.imul(oe,Se)|0,y=y+Math.imul(ie,Ee)|0,s=s+Math.imul(ie,Ce)|0,s=s+Math.imul(ae,Ee)|0,w=w+Math.imul(ae,Ce)|0;var Ke=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,y=Math.imul(se,Fe),s=Math.imul(se,Se),s=s+Math.imul(fe,Fe)|0,w=Math.imul(fe,Se),y=y+Math.imul(ue,Ee)|0,s=s+Math.imul(ue,Ce)|0,s=s+Math.imul(oe,Ee)|0,w=w+Math.imul(oe,Ce)|0;var Xe=(x+y|0)+((s&8191)<<13)|0;x=(w+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,y=Math.imul(se,Ee),s=Math.imul(se,Ce),s=s+Math.imul(fe,Ee)|0,w=Math.imul(fe,Ce);var er=(x+y|0)+((s&8191)<<13)|0;return x=(w+(s>>>13)|0)+(er>>>26)|0,er&=67108863,g[0]=Ie,g[1]=Te,g[2]=Re,g[3]=qe,g[4]=$e,g[5]=je,g[6]=Ve,g[7]=Ge,g[8]=ze,g[9]=Ue,g[10]=He,g[11]=We,g[12]=Ze,g[13]=Ye,g[14]=Je,g[15]=Qe,g[16]=Ke,g[17]=Xe,g[18]=er,x!==0&&(g[19]=x,m.length++),m};Math.imul||(C=D);function P(L,u,c){c.negative=u.negative^L.negative,c.length=L.length+u.length;for(var m=0,v=0,_=0;_<c.length-1;_++){var g=v;v=0;for(var x=m&67108863,y=Math.min(_,u.length-1),s=Math.max(0,_-L.length+1);s<=y;s++){var w=_-s,I=L.words[w]|0,S=u.words[s]|0,R=I*S,$=R&67108863;g=g+(R/67108864|0)|0,$=$+x|0,x=$&67108863,g=g+($>>>26)|0,v+=g>>>26,g&=67108863}c.words[_]=x,m=g,g=v}return m!==0?c.words[_]=m:c.length--,c._strip()}function O(L,u,c){return P(L,u,c)}n.prototype.mulTo=function(u,c){var m,v=this.length+u.length;return this.length===10&&u.length===10?m=C(this,u,c):v<63?m=D(this,u,c):v<1024?m=P(this,u,c):m=O(this,u,c),m};function k(L,u){this.x=L,this.y=u}k.prototype.makeRBT=function(u){for(var c=new Array(u),m=n.prototype._countBits(u)-1,v=0;v<u;v++)c[v]=this.revBin(v,m,u);return c},k.prototype.revBin=function(u,c,m){if(u===0||u===m-1)return u;for(var v=0,_=0;_<c;_++)v|=(u&1)<<c-_-1,u>>=1;return v},k.prototype.permute=function(u,c,m,v,_,g){for(var x=0;x<g;x++)v[x]=c[u[x]],_[x]=m[u[x]]},k.prototype.transform=function(u,c,m,v,_,g){this.permute(g,u,c,m,v,_);for(var x=1;x<_;x<<=1)for(var y=x<<1,s=Math.cos(2*Math.PI/y),w=Math.sin(2*Math.PI/y),I=0;I<_;I+=y)for(var S=s,R=w,$=0;$<x;$++){var U=m[I+$],z=v[I+$],Pe=m[I+$+x],Z=v[I+$+x],Y=S*Pe-R*Z;Z=S*Z+R*Pe,Pe=Y,m[I+$]=U+Pe,v[I+$]=z+Z,m[I+$+x]=U-Pe,v[I+$+x]=z-Z,$!==y&&(Y=s*S-w*R,R=s*R+w*S,S=Y)}},k.prototype.guessLen13b=function(u,c){var m=Math.max(c,u)|1,v=m&1,_=0;for(m=m/2|0;m;m=m>>>1)_++;return 1<<_+1+v},k.prototype.conjugate=function(u,c,m){if(!(m<=1))for(var v=0;v<m/2;v++){var _=u[v];u[v]=u[m-v-1],u[m-v-1]=_,_=c[v],c[v]=-c[m-v-1],c[m-v-1]=-_}},k.prototype.normalize13b=function(u,c){for(var m=0,v=0;v<c/2;v++){var _=Math.round(u[2*v+1]/c)*8192+Math.round(u[2*v]/c)+m;u[v]=_&67108863,_<67108864?m=0:m=_/67108864|0}return u},k.prototype.convert13b=function(u,c,m,v){for(var _=0,g=0;g<c;g++)_=_+(u[g]|0),m[2*g]=_&8191,_=_>>>13,m[2*g+1]=_&8191,_=_>>>13;for(g=2*c;g<v;++g)m[g]=0;t(_===0),t((_&~8191)==0)},k.prototype.stub=function(u){for(var c=new Array(u),m=0;m<u;m++)c[m]=0;return c},k.prototype.mulp=function(u,c,m){var v=2*this.guessLen13b(u.length,c.length),_=this.makeRBT(v),g=this.stub(v),x=new Array(v),y=new Array(v),s=new Array(v),w=new Array(v),I=new Array(v),S=new Array(v),R=m.words;R.length=v,this.convert13b(u.words,u.length,x,v),this.convert13b(c.words,c.length,w,v),this.transform(x,g,y,s,v,_),this.transform(w,g,I,S,v,_);for(var $=0;$<v;$++){var U=y[$]*I[$]-s[$]*S[$];s[$]=y[$]*S[$]+s[$]*I[$],y[$]=U}return this.conjugate(y,s,v),this.transform(y,s,R,g,v,_),this.conjugate(R,g,v),this.normalize13b(R,v),m.negative=u.negative^c.negative,m.length=u.length+c.length,m._strip()},n.prototype.mul=function(u){var c=new n(null);return c.words=new Array(this.length+u.length),this.mulTo(u,c)},n.prototype.mulf=function(u){var c=new n(null);return c.words=new Array(this.length+u.length),O(this,u,c)},n.prototype.imul=function(u){return this.clone().mulTo(u,this)},n.prototype.imuln=function(u){var c=u<0;c&&(u=-u),t(typeof u=="number"),t(u<67108864);for(var m=0,v=0;v<this.length;v++){var _=(this.words[v]|0)*u,g=(_&67108863)+(m&67108863);m>>=26,m+=_/67108864|0,m+=g>>>26,this.words[v]=g&67108863}return m!==0&&(this.words[v]=m,this.length++),c?this.ineg():this},n.prototype.muln=function(u){return this.clone().imuln(u)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(u){var c=M(u);if(c.length===0)return new n(1);for(var m=this,v=0;v<c.length&&c[v]===0;v++,m=m.sqr());if(++v<c.length)for(var _=m.sqr();v<c.length;v++,_=_.sqr())c[v]!==0&&(m=m.mul(_));return m},n.prototype.iushln=function(u){t(typeof u=="number"&&u>=0);var c=u%26,m=(u-c)/26,v=67108863>>>26-c<<26-c,_;if(c!==0){var g=0;for(_=0;_<this.length;_++){var x=this.words[_]&v,y=(this.words[_]|0)-x<<c;this.words[_]=y|g,g=x>>>26-c}g&&(this.words[_]=g,this.length++)}if(m!==0){for(_=this.length-1;_>=0;_--)this.words[_+m]=this.words[_];for(_=0;_<m;_++)this.words[_]=0;this.length+=m}return this._strip()},n.prototype.ishln=function(u){return t(this.negative===0),this.iushln(u)},n.prototype.iushrn=function(u,c,m){t(typeof u=="number"&&u>=0);var v;c?v=(c-c%26)/26:v=0;var _=u%26,g=Math.min((u-_)/26,this.length),x=67108863^67108863>>>_<<_,y=m;if(v-=g,v=Math.max(0,v),y){for(var s=0;s<g;s++)y.words[s]=this.words[s];y.length=g}if(g!==0)if(this.length>g)for(this.length-=g,s=0;s<this.length;s++)this.words[s]=this.words[s+g];else this.words[0]=0,this.length=1;var w=0;for(s=this.length-1;s>=0&&(w!==0||s>=v);s--){var I=this.words[s]|0;this.words[s]=w<<26-_|I>>>_,w=I&x}return y&&w!==0&&(y.words[y.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(u,c,m){return t(this.negative===0),this.iushrn(u,c,m)},n.prototype.shln=function(u){return this.clone().ishln(u)},n.prototype.ushln=function(u){return this.clone().iushln(u)},n.prototype.shrn=function(u){return this.clone().ishrn(u)},n.prototype.ushrn=function(u){return this.clone().iushrn(u)},n.prototype.testn=function(u){t(typeof u=="number"&&u>=0);var c=u%26,m=(u-c)/26,v=1<<c;if(this.length<=m)return!1;var _=this.words[m];return!!(_&v)},n.prototype.imaskn=function(u){t(typeof u=="number"&&u>=0);var c=u%26,m=(u-c)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(c!==0&&m++,this.length=Math.min(m,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this._strip()},n.prototype.maskn=function(u){return this.clone().imaskn(u)},n.prototype.iaddn=function(u){return t(typeof u=="number"),t(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},n.prototype._iaddn=function(u){this.words[0]+=u;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},n.prototype.isubn=function(u){if(t(typeof u=="number"),t(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},n.prototype.addn=function(u){return this.clone().iaddn(u)},n.prototype.subn=function(u){return this.clone().isubn(u)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(u,c,m){var v=u.length+m,_;this._expand(v);var g,x=0;for(_=0;_<u.length;_++){g=(this.words[_+m]|0)+x;var y=(u.words[_]|0)*c;g-=y&67108863,x=(g>>26)-(y/67108864|0),this.words[_+m]=g&67108863}for(;_<this.length-m;_++)g=(this.words[_+m]|0)+x,x=g>>26,this.words[_+m]=g&67108863;if(x===0)return this._strip();for(t(x===-1),x=0,_=0;_<this.length;_++)g=-(this.words[_]|0)+x,x=g>>26,this.words[_]=g&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(u,c){var m=this.length-u.length,v=this.clone(),_=u,g=_.words[_.length-1]|0,x=this._countBits(g);m=26-x,m!==0&&(_=_.ushln(m),v.iushln(m),g=_.words[_.length-1]|0);var y=v.length-_.length,s;if(c!=="mod"){s=new n(null),s.length=y+1,s.words=new Array(s.length);for(var w=0;w<s.length;w++)s.words[w]=0}var I=v.clone()._ishlnsubmul(_,1,y);I.negative===0&&(v=I,s&&(s.words[y]=1));for(var S=y-1;S>=0;S--){var R=(v.words[_.length+S]|0)*67108864+(v.words[_.length+S-1]|0);for(R=Math.min(R/g|0,67108863),v._ishlnsubmul(_,R,S);v.negative!==0;)R--,v.negative=0,v._ishlnsubmul(_,1,S),v.isZero()||(v.negative^=1);s&&(s.words[S]=R)}return s&&s._strip(),v._strip(),c!=="div"&&m!==0&&v.iushrn(m),{div:s||null,mod:v}},n.prototype.divmod=function(u,c,m){if(t(!u.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var v,_,g;return this.negative!==0&&u.negative===0?(g=this.neg().divmod(u,c),c!=="mod"&&(v=g.div.neg()),c!=="div"&&(_=g.mod.neg(),m&&_.negative!==0&&_.iadd(u)),{div:v,mod:_}):this.negative===0&&u.negative!==0?(g=this.divmod(u.neg(),c),c!=="mod"&&(v=g.div.neg()),{div:v,mod:g.mod}):(this.negative&u.negative)!=0?(g=this.neg().divmod(u.neg(),c),c!=="div"&&(_=g.mod.neg(),m&&_.negative!==0&&_.isub(u)),{div:g.div,mod:_}):u.length>this.length||this.cmp(u)<0?{div:new n(0),mod:this}:u.length===1?c==="div"?{div:this.divn(u.words[0]),mod:null}:c==="mod"?{div:null,mod:new n(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new n(this.modrn(u.words[0]))}:this._wordDiv(u,c)},n.prototype.div=function(u){return this.divmod(u,"div",!1).div},n.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},n.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},n.prototype.divRound=function(u){var c=this.divmod(u);if(c.mod.isZero())return c.div;var m=c.div.negative!==0?c.mod.isub(u):c.mod,v=u.ushrn(1),_=u.andln(1),g=m.cmp(v);return g<0||_===1&&g===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},n.prototype.modrn=function(u){var c=u<0;c&&(u=-u),t(u<=67108863);for(var m=(1<<26)%u,v=0,_=this.length-1;_>=0;_--)v=(m*v+(this.words[_]|0))%u;return c?-v:v},n.prototype.modn=function(u){return this.modrn(u)},n.prototype.idivn=function(u){var c=u<0;c&&(u=-u),t(u<=67108863);for(var m=0,v=this.length-1;v>=0;v--){var _=(this.words[v]|0)+m*67108864;this.words[v]=_/u|0,m=_%u}return this._strip(),c?this.ineg():this},n.prototype.divn=function(u){return this.clone().idivn(u)},n.prototype.egcd=function(u){t(u.negative===0),t(!u.isZero());var c=this,m=u.clone();c.negative!==0?c=c.umod(u):c=c.clone();for(var v=new n(1),_=new n(0),g=new n(0),x=new n(1),y=0;c.isEven()&&m.isEven();)c.iushrn(1),m.iushrn(1),++y;for(var s=m.clone(),w=c.clone();!c.isZero();){for(var I=0,S=1;(c.words[0]&S)==0&&I<26;++I,S<<=1);if(I>0)for(c.iushrn(I);I-- >0;)(v.isOdd()||_.isOdd())&&(v.iadd(s),_.isub(w)),v.iushrn(1),_.iushrn(1);for(var R=0,$=1;(m.words[0]&$)==0&&R<26;++R,$<<=1);if(R>0)for(m.iushrn(R);R-- >0;)(g.isOdd()||x.isOdd())&&(g.iadd(s),x.isub(w)),g.iushrn(1),x.iushrn(1);c.cmp(m)>=0?(c.isub(m),v.isub(g),_.isub(x)):(m.isub(c),g.isub(v),x.isub(_))}return{a:g,b:x,gcd:m.iushln(y)}},n.prototype._invmp=function(u){t(u.negative===0),t(!u.isZero());var c=this,m=u.clone();c.negative!==0?c=c.umod(u):c=c.clone();for(var v=new n(1),_=new n(0),g=m.clone();c.cmpn(1)>0&&m.cmpn(1)>0;){for(var x=0,y=1;(c.words[0]&y)==0&&x<26;++x,y<<=1);if(x>0)for(c.iushrn(x);x-- >0;)v.isOdd()&&v.iadd(g),v.iushrn(1);for(var s=0,w=1;(m.words[0]&w)==0&&s<26;++s,w<<=1);if(s>0)for(m.iushrn(s);s-- >0;)_.isOdd()&&_.iadd(g),_.iushrn(1);c.cmp(m)>=0?(c.isub(m),v.isub(_)):(m.isub(c),_.isub(v))}var I;return c.cmpn(1)===0?I=v:I=_,I.cmpn(0)<0&&I.iadd(u),I},n.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var c=this.clone(),m=u.clone();c.negative=0,m.negative=0;for(var v=0;c.isEven()&&m.isEven();v++)c.iushrn(1),m.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;m.isEven();)m.iushrn(1);var _=c.cmp(m);if(_<0){var g=c;c=m,m=g}else if(_===0||m.cmpn(1)===0)break;c.isub(m)}while(!0);return m.iushln(v)},n.prototype.invm=function(u){return this.egcd(u).a.umod(u)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(u){return this.words[0]&u},n.prototype.bincn=function(u){t(typeof u=="number");var c=u%26,m=(u-c)/26,v=1<<c;if(this.length<=m)return this._expand(m+1),this.words[m]|=v,this;for(var _=v,g=m;_!==0&&g<this.length;g++){var x=this.words[g]|0;x+=_,_=x>>>26,x&=67108863,this.words[g]=x}return _!==0&&(this.words[g]=_,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(u){var c=u<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var m;if(this.length>1)m=1;else{c&&(u=-u),t(u<=67108863,"Number is too big");var v=this.words[0]|0;m=v===u?0:v<u?-1:1}return this.negative!==0?-m|0:m},n.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var c=this.ucmp(u);return this.negative!==0?-c|0:c},n.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var c=0,m=this.length-1;m>=0;m--){var v=this.words[m]|0,_=u.words[m]|0;if(v!==_){v<_?c=-1:v>_&&(c=1);break}}return c},n.prototype.gtn=function(u){return this.cmpn(u)===1},n.prototype.gt=function(u){return this.cmp(u)===1},n.prototype.gten=function(u){return this.cmpn(u)>=0},n.prototype.gte=function(u){return this.cmp(u)>=0},n.prototype.ltn=function(u){return this.cmpn(u)===-1},n.prototype.lt=function(u){return this.cmp(u)===-1},n.prototype.lten=function(u){return this.cmpn(u)<=0},n.prototype.lte=function(u){return this.cmp(u)<=0},n.prototype.eqn=function(u){return this.cmpn(u)===0},n.prototype.eq=function(u){return this.cmp(u)===0},n.red=function(u){return new V(u)},n.prototype.toRed=function(u){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(u){return this.red=u,this},n.prototype.forceRed=function(u){return t(!this.red,"Already a number in reduction context"),this._forceRed(u)},n.prototype.redAdd=function(u){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},n.prototype.redIAdd=function(u){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},n.prototype.redSub=function(u){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},n.prototype.redISub=function(u){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},n.prototype.redShl=function(u){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},n.prototype.redMul=function(u){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},n.prototype.redIMul=function(u){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(u){return t(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var B={k256:null,p224:null,p192:null,p25519:null};function T(L,u){this.name=L,this.p=new n(u,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var u=new n(null);return u.words=new Array(Math.ceil(this.n/13)),u},T.prototype.ireduce=function(u){var c=u,m;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),m=c.bitLength();while(m>this.n);var v=m<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},T.prototype.split=function(u,c){u.iushrn(this.n,0,c)},T.prototype.imulK=function(u){return u.imul(this.k)};function q(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(q,T),q.prototype.split=function(u,c){for(var m=4194303,v=Math.min(u.length,9),_=0;_<v;_++)c.words[_]=u.words[_];if(c.length=v,u.length<=9){u.words[0]=0,u.length=1;return}var g=u.words[9];for(c.words[c.length++]=g&m,_=10;_<u.length;_++){var x=u.words[_]|0;u.words[_-10]=(x&m)<<4|g>>>22,g=x}g>>>=22,u.words[_-10]=g,g===0&&u.length>10?u.length-=10:u.length-=9},q.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var c=0,m=0;m<u.length;m++){var v=u.words[m]|0;c+=v*977,u.words[m]=c&67108863,c=v*64+(c/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function N(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(N,T);function G(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(G,T);function H(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(H,T),H.prototype.imulK=function(u){for(var c=0,m=0;m<u.length;m++){var v=(u.words[m]|0)*19+c,_=v&67108863;v>>>=26,u.words[m]=_,c=v}return c!==0&&(u.words[u.length++]=c),u},n._prime=function(u){if(B[u])return B[u];var c;if(u==="k256")c=new q;else if(u==="p224")c=new N;else if(u==="p192")c=new G;else if(u==="p25519")c=new H;else throw new Error("Unknown prime "+u);return B[u]=c,c};function V(L){if(typeof L=="string"){var u=n._prime(L);this.m=u.p,this.prime=u}else t(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}V.prototype._verify1=function(u){t(u.negative===0,"red works only with positives"),t(u.red,"red works only with red numbers")},V.prototype._verify2=function(u,c){t((u.negative|c.negative)==0,"red works only with positives"),t(u.red&&u.red===c.red,"red works only with red numbers")},V.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(d(u,u.umod(this.m)._forceRed(this)),u)},V.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},V.prototype.add=function(u,c){this._verify2(u,c);var m=u.add(c);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},V.prototype.iadd=function(u,c){this._verify2(u,c);var m=u.iadd(c);return m.cmp(this.m)>=0&&m.isub(this.m),m},V.prototype.sub=function(u,c){this._verify2(u,c);var m=u.sub(c);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},V.prototype.isub=function(u,c){this._verify2(u,c);var m=u.isub(c);return m.cmpn(0)<0&&m.iadd(this.m),m},V.prototype.shl=function(u,c){return this._verify1(u),this.imod(u.ushln(c))},V.prototype.imul=function(u,c){return this._verify2(u,c),this.imod(u.imul(c))},V.prototype.mul=function(u,c){return this._verify2(u,c),this.imod(u.mul(c))},V.prototype.isqr=function(u){return this.imul(u,u.clone())},V.prototype.sqr=function(u){return this.mul(u,u)},V.prototype.sqrt=function(u){if(u.isZero())return u.clone();var c=this.m.andln(3);if(t(c%2==1),c===3){var m=this.m.add(new n(1)).iushrn(2);return this.pow(u,m)}for(var v=this.m.subn(1),_=0;!v.isZero()&&v.andln(1)===0;)_++,v.iushrn(1);t(!v.isZero());var g=new n(1).toRed(this),x=g.redNeg(),y=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new n(2*s*s).toRed(this);this.pow(s,y).cmp(x)!==0;)s.redIAdd(x);for(var w=this.pow(s,v),I=this.pow(u,v.addn(1).iushrn(1)),S=this.pow(u,v),R=_;S.cmp(g)!==0;){for(var $=S,U=0;$.cmp(g)!==0;U++)$=$.redSqr();t(U<R);var z=this.pow(w,new n(1).iushln(R-U-1));I=I.redMul(z),w=z.redSqr(),S=S.redMul(w),R=U}return I},V.prototype.invm=function(u){var c=u._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},V.prototype.pow=function(u,c){if(c.isZero())return new n(1).toRed(this);if(c.cmpn(1)===0)return u.clone();var m=4,v=new Array(1<<m);v[0]=new n(1).toRed(this),v[1]=u;for(var _=2;_<v.length;_++)v[_]=this.mul(v[_-1],u);var g=v[0],x=0,y=0,s=c.bitLength()%26;for(s===0&&(s=26),_=c.length-1;_>=0;_--){for(var w=c.words[_],I=s-1;I>=0;I--){var S=w>>I&1;if(g!==v[0]&&(g=this.sqr(g)),S===0&&x===0){y=0;continue}x<<=1,x|=S,y++,!(y!==m&&(_!==0||I!==0))&&(g=this.mul(g,v[x]),y=0,x=0)}s=26}return g},V.prototype.convertTo=function(u){var c=u.umod(this.m);return c===u?c.clone():c},V.prototype.convertFrom=function(u){var c=u.clone();return c.red=null,c},n.mont=function(u){return new j(u)};function j(L){V.call(this,L),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(j,V),j.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},j.prototype.convertFrom=function(u){var c=this.imod(u.mul(this.rinv));return c.red=null,c},j.prototype.imul=function(u,c){if(u.isZero()||c.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(c),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=m.isub(v).iushrn(this.shift),g=_;return _.cmp(this.m)>=0?g=_.isub(this.m):_.cmpn(0)<0&&(g=_.iadd(this.m)),g._forceRed(this)},j.prototype.mul=function(u,c){if(u.isZero()||c.isZero())return new n(0)._forceRed(this);var m=u.mul(c),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=m.isub(v).iushrn(this.shift),g=_;return _.cmp(this.m)>=0?g=_.isub(this.m):_.cmpn(0)<0&&(g=_.iadd(this.m)),g._forceRed(this)},j.prototype.invm=function(u){var c=this.imod(u._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(typeof ur=="undefined"||ur,ln)});var pn=W((exports,module)=>{(function(){"use strict";function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,r){return r={exports:{}},e(r,r.exports),r.exports}var readOnlyError=createCommonjsModule(function(e){function r(t){throw new TypeError('"'+t+'" is read-only')}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_readOnlyError=unwrapExports(readOnlyError),setPrototypeOf=createCommonjsModule(function(e){function r(t,a){return e.exports=r=Object.setPrototypeOf||function(o,f){return o.__proto__=f,o},e.exports.default=e.exports,e.exports.__esModule=!0,r(t,a)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(setPrototypeOf);var isNativeReflectConstruct=createCommonjsModule(function(e){function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(isNativeReflectConstruct);var construct=createCommonjsModule(function(e){function r(t,a,n){return isNativeReflectConstruct()?(e.exports=r=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(f,l,h){var d=[null];d.push.apply(d,l);var p=Function.bind.apply(f,d),b=new p;return h&&setPrototypeOf(b,h.prototype),b},e.exports.default=e.exports,e.exports.__esModule=!0),r.apply(null,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_construct=unwrapExports(construct),arrayWithHoles=createCommonjsModule(function(e){function r(t){if(Array.isArray(t))return t}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(arrayWithHoles);var iterableToArray=createCommonjsModule(function(e){function r(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(iterableToArray);var arrayLikeToArray=createCommonjsModule(function(e){function r(t,a){(a==null||a>t.length)&&(a=t.length);for(var n=0,o=new Array(a);n<a;n++)o[n]=t[n];return o}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(arrayLikeToArray);var unsupportedIterableToArray=createCommonjsModule(function(e){function r(t,a){if(!!t){if(typeof t=="string")return arrayLikeToArray(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return arrayLikeToArray(t,a)}}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(unsupportedIterableToArray);var nonIterableRest=createCommonjsModule(function(e){function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(nonIterableRest);var toArray=createCommonjsModule(function(e){function r(t){return arrayWithHoles(t)||iterableToArray(t)||unsupportedIterableToArray(t)||nonIterableRest()}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_toArray=unwrapExports(toArray),arrayWithoutHoles=createCommonjsModule(function(e){function r(t){if(Array.isArray(t))return arrayLikeToArray(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(arrayWithoutHoles);var nonIterableSpread=createCommonjsModule(function(e){function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(nonIterableSpread);var toConsumableArray=createCommonjsModule(function(e){function r(t){return arrayWithoutHoles(t)||iterableToArray(t)||unsupportedIterableToArray(t)||nonIterableSpread()}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_toConsumableArray=unwrapExports(toConsumableArray),asyncToGenerator=createCommonjsModule(function(e){function r(a,n,o,f,l,h,d){try{var p=a[h](d),b=p.value}catch(A){o(A);return}p.done?n(b):Promise.resolve(b).then(f,l)}function t(a){return function(){var n=this,o=arguments;return new Promise(function(f,l){var h=a.apply(n,o);function d(b){r(h,f,l,d,p,"next",b)}function p(b){r(h,f,l,d,p,"throw",b)}d(void 0)})}}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),_asyncToGenerator=unwrapExports(asyncToGenerator),classCallCheck=createCommonjsModule(function(e){function r(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_classCallCheck=unwrapExports(classCallCheck),createClass=createCommonjsModule(function(e){function r(a,n){for(var o=0;o<n.length;o++){var f=n[o];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function t(a,n,o){return n&&r(a.prototype,n),o&&r(a,o),a}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),_createClass=unwrapExports(createClass),defineProperty=createCommonjsModule(function(e){function r(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_defineProperty=unwrapExports(defineProperty),objectWithoutPropertiesLoose=createCommonjsModule(function(e){function r(t,a){if(t==null)return{};var n={},o=Object.keys(t),f,l;for(l=0;l<o.length;l++)f=o[l],!(a.indexOf(f)>=0)&&(n[f]=t[f]);return n}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(objectWithoutPropertiesLoose);var objectWithoutProperties=createCommonjsModule(function(e){function r(t,a){if(t==null)return{};var n=objectWithoutPropertiesLoose(t,a),o,f;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(f=0;f<l.length;f++)o=l[f],!(a.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(n[o]=t[o]))}return n}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_objectWithoutProperties=unwrapExports(objectWithoutProperties),iterableToArrayLimit=createCommonjsModule(function(e){function r(t,a){var n=t&&(typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var o=[],f=!0,l=!1,h,d;try{for(n=n.call(t);!(f=(h=n.next()).done)&&(o.push(h.value),!(a&&o.length===a));f=!0);}catch(p){l=!0,d=p}finally{try{!f&&n.return!=null&&n.return()}finally{if(l)throw d}}return o}}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(iterableToArrayLimit);var slicedToArray=createCommonjsModule(function(e){function r(t,a){return arrayWithHoles(t)||iterableToArrayLimit(t,a)||unsupportedIterableToArray(t,a)||nonIterableRest()}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_slicedToArray=unwrapExports(slicedToArray),_typeof_1=createCommonjsModule(function(e){function r(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(e.exports=r=function(n){return typeof n},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_typeof=unwrapExports(_typeof_1),asyncIterator=createCommonjsModule(function(e){function r(t){var a;if(typeof Symbol!="undefined"&&(Symbol.asyncIterator&&(a=t[Symbol.asyncIterator]),a==null&&Symbol.iterator&&(a=t[Symbol.iterator])),a==null&&(a=t["@@asyncIterator"]),a==null&&(a=t["@@iterator"]),a==null)throw new TypeError("Object is not async iterable");return a.call(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_asyncIterator=unwrapExports(asyncIterator),AwaitValue=createCommonjsModule(function(e){function r(t){this.wrapped=t}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(AwaitValue);var awaitAsyncGenerator=createCommonjsModule(function(e){function r(t){return new AwaitValue(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_awaitAsyncGenerator=unwrapExports(awaitAsyncGenerator),AsyncGenerator_1=createCommonjsModule(function(e){function r(t){var a,n;function o(h,d){return new Promise(function(p,b){var A={key:h,arg:d,resolve:p,reject:b,next:null};n?n=n.next=A:(a=n=A,f(h,d))})}function f(h,d){try{var p=t[h](d),b=p.value,A=b instanceof AwaitValue;Promise.resolve(A?b.wrapped:b).then(function(E){if(A){f(h==="return"?"return":"next",E);return}l(p.done?"return":"normal",E)},function(E){f("throw",E)})}catch(E){l("throw",E)}}function l(h,d){switch(h){case"return":a.resolve({value:d,done:!0});break;case"throw":a.reject(d);break;default:a.resolve({value:d,done:!1});break}a=a.next,a?f(a.key,a.arg):n=null}this._invoke=o,typeof t.return!="function"&&(this.return=void 0)}r.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},r.prototype.next=function(t){return this._invoke("next",t)},r.prototype.throw=function(t){return this._invoke("throw",t)},r.prototype.return=function(t){return this._invoke("return",t)},e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0});unwrapExports(AsyncGenerator_1);var wrapAsyncGenerator=createCommonjsModule(function(e){function r(t){return function(){return new AsyncGenerator_1(t.apply(this,arguments))}}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}),_wrapAsyncGenerator=unwrapExports(wrapAsyncGenerator),runtime_1=createCommonjsModule(function(e){var r=function(t){var a=Object.prototype,n=a.hasOwnProperty,o,f=typeof Symbol=="function"?Symbol:{},l=f.iterator||"@@iterator",h=f.asyncIterator||"@@asyncIterator",d=f.toStringTag||"@@toStringTag";function p(_,g,x){return Object.defineProperty(_,g,{value:x,enumerable:!0,configurable:!0,writable:!0}),_[g]}try{p({},"")}catch(_){p=function(g,x,y){return g[x]=y}}function b(_,g,x,y){var s=g&&g.prototype instanceof P?g:P,w=Object.create(s.prototype),I=new c(y||[]);return w._invoke=V(_,x,I),w}t.wrap=b;function A(_,g,x){try{return{type:"normal",arg:_.call(g,x)}}catch(y){return{type:"throw",arg:y}}}var E="suspendedStart",F="suspendedYield",M="executing",D="completed",C={};function P(){}function O(){}function k(){}var B={};B[l]=function(){return this};var T=Object.getPrototypeOf,q=T&&T(T(m([])));q&&q!==a&&n.call(q,l)&&(B=q);var N=k.prototype=P.prototype=Object.create(B);O.prototype=N.constructor=k,k.constructor=O,O.displayName=p(k,d,"GeneratorFunction");function G(_){["next","throw","return"].forEach(function(g){p(_,g,function(x){return this._invoke(g,x)})})}t.isGeneratorFunction=function(_){var g=typeof _=="function"&&_.constructor;return g?g===O||(g.displayName||g.name)==="GeneratorFunction":!1},t.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,k):(_.__proto__=k,p(_,d,"GeneratorFunction")),_.prototype=Object.create(N),_},t.awrap=function(_){return{__await:_}};function H(_,g){function x(w,I,S,R){var $=A(_[w],_,I);if($.type==="throw")R($.arg);else{var U=$.arg,z=U.value;return z&&typeof z=="object"&&n.call(z,"__await")?g.resolve(z.__await).then(function(Pe){x("next",Pe,S,R)},function(Pe){x("throw",Pe,S,R)}):g.resolve(z).then(function(Pe){U.value=Pe,S(U)},function(Pe){return x("throw",Pe,S,R)})}}var y;function s(w,I){function S(){return new g(function(R,$){x(w,I,R,$)})}return y=y?y.then(S,S):S()}this._invoke=s}G(H.prototype),H.prototype[h]=function(){return this},t.AsyncIterator=H,t.async=function(_,g,x,y,s){s===void 0&&(s=Promise);var w=new H(b(_,g,x,y),s);return t.isGeneratorFunction(g)?w:w.next().then(function(I){return I.done?I.value:w.next()})};function V(_,g,x){var y=E;return function(w,I){if(y===M)throw new Error("Generator is already running");if(y===D){if(w==="throw")throw I;return v()}for(x.method=w,x.arg=I;;){var S=x.delegate;if(S){var R=j(S,x);if(R){if(R===C)continue;return R}}if(x.method==="next")x.sent=x._sent=x.arg;else if(x.method==="throw"){if(y===E)throw y=D,x.arg;x.dispatchException(x.arg)}else x.method==="return"&&x.abrupt("return",x.arg);y=M;var $=A(_,g,x);if($.type==="normal"){if(y=x.done?D:F,$.arg===C)continue;return{value:$.arg,done:x.done}}else $.type==="throw"&&(y=D,x.method="throw",x.arg=$.arg)}}}function j(_,g){var x=_.iterator[g.method];if(x===o){if(g.delegate=null,g.method==="throw"){if(_.iterator.return&&(g.method="return",g.arg=o,j(_,g),g.method==="throw"))return C;g.method="throw",g.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var y=A(x,_.iterator,g.arg);if(y.type==="throw")return g.method="throw",g.arg=y.arg,g.delegate=null,C;var s=y.arg;if(!s)return g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,C;if(s.done)g[_.resultName]=s.value,g.next=_.nextLoc,g.method!=="return"&&(g.method="next",g.arg=o);else return s;return g.delegate=null,C}G(N),p(N,d,"Generator"),N[l]=function(){return this},N.toString=function(){return"[object Generator]"};function L(_){var g={tryLoc:_[0]};1 in _&&(g.catchLoc=_[1]),2 in _&&(g.finallyLoc=_[2],g.afterLoc=_[3]),this.tryEntries.push(g)}function u(_){var g=_.completion||{};g.type="normal",delete g.arg,_.completion=g}function c(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(L,this),this.reset(!0)}t.keys=function(_){var g=[];for(var x in _)g.push(x);return g.reverse(),function y(){for(;g.length;){var s=g.pop();if(s in _)return y.value=s,y.done=!1,y}return y.done=!0,y}};function m(_){if(_){var g=_[l];if(g)return g.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length)){var x=-1,y=function s(){for(;++x<_.length;)if(n.call(_,x))return s.value=_[x],s.done=!1,s;return s.value=o,s.done=!0,s};return y.next=y}}return{next:v}}t.values=m;function v(){return{value:o,done:!0}}return c.prototype={constructor:c,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(u),!_)for(var g in this)g.charAt(0)==="t"&&n.call(this,g)&&!isNaN(+g.slice(1))&&(this[g]=o)},stop:function(){this.done=!0;var _=this.tryEntries[0],g=_.completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var g=this;function x(R,$){return w.type="throw",w.arg=_,g.next=R,$&&(g.method="next",g.arg=o),!!$}for(var y=this.tryEntries.length-1;y>=0;--y){var s=this.tryEntries[y],w=s.completion;if(s.tryLoc==="root")return x("end");if(s.tryLoc<=this.prev){var I=n.call(s,"catchLoc"),S=n.call(s,"finallyLoc");if(I&&S){if(this.prev<s.catchLoc)return x(s.catchLoc,!0);if(this.prev<s.finallyLoc)return x(s.finallyLoc)}else if(I){if(this.prev<s.catchLoc)return x(s.catchLoc,!0)}else if(S){if(this.prev<s.finallyLoc)return x(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(_,g){for(var x=this.tryEntries.length-1;x>=0;--x){var y=this.tryEntries[x];if(y.tryLoc<=this.prev&&n.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var s=y;break}}s&&(_==="break"||_==="continue")&&s.tryLoc<=g&&g<=s.finallyLoc&&(s=null);var w=s?s.completion:{};return w.type=_,w.arg=g,s?(this.method="next",this.next=s.finallyLoc,C):this.complete(w)},complete:function(_,g){if(_.type==="throw")throw _.arg;return _.type==="break"||_.type==="continue"?this.next=_.arg:_.type==="return"?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):_.type==="normal"&&g&&(this.next=g),C},finish:function(_){for(var g=this.tryEntries.length-1;g>=0;--g){var x=this.tryEntries[g];if(x.finallyLoc===_)return this.complete(x.completion,x.afterLoc),u(x),C}},catch:function(_){for(var g=this.tryEntries.length-1;g>=0;--g){var x=this.tryEntries[g];if(x.tryLoc===_){var y=x.completion;if(y.type==="throw"){var s=y.arg;u(x)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(_,g,x){return this.delegate={iterator:m(_),resultName:g,nextLoc:x},this.method==="next"&&(this.arg=o),C}},t}(e.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}),regenerator=runtime_1,_excluded=["token"],_excluded2=["stderr","stdin","stdout"];function _createForOfIteratorHelper(e,r){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,f=!1,l;return{s:function(){t=t.call(e)},n:function(){var d=t.next();return o=d.done,d},e:function(d){f=!0,l=d},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(f)throw l}}}}function _unsupportedIterableToArray(e,r){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray(e,r)}}function _arrayLikeToArray(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(a){_defineProperty(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}(function(e,r){typeof define=="function"&&define.amd?define(["bn.js"],function(t){return e.lips=r(e,t)}):(typeof module=="undefined"?"undefined":_typeof(module))==="object"&&module.exports?module.exports=r(e,hn()):e.lips=r(e,e.BN)})(typeof global!="undefined"?global:self,function(root,BN,undefined$1){function contentLoaded(e,r){var t=!1,a=!0,n=e.document,o=n.documentElement,f=n.addEventListener,l=f?"addEventListener":"attachEvent",h=f?"removeEventListener":"detachEvent",d=f?"":"on",p=function A(E){E.type=="readystatechange"&&n.readyState!="complete"||((E.type=="load"?e:n)[h](d+E.type,A,!1),!t&&(t=!0)&&r.call(e,E.type||E))},b=function A(){try{o.doScroll("left")}catch(E){setTimeout(A,50);return}p("poll")};if(n.readyState=="complete")r.call(e,"lazy");else{if(!f&&o.doScroll){try{a=!e.frameElement}catch(A){}a&&b()}n[l](d+"DOMContentLoaded",p,!1),n[l](d+"readystatechange",p,!1),e[l](d+"load",p,!1)}}function log(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:null,t=arguments[1]===!0;function a(n){if(!!is_debug()){var o=global_env.get("repr")(n);(r===null||r instanceof RegExp&&r.test(o))&&console.log(global_env.get("type")(n)+": "+o),t&&console.log(n)}}return is_promise(e)?e.then(a):a(e),e}function is_debug(){return user_env&&user_env.get("DEBUG",{throwError:!1})}root.fetch||(root.fetch=function(e,r){return r=r||{},new Promise(function(t,a){var n=new XMLHttpRequest;n.open(r.method||"get",e,!0);for(var o in r.headers)n.setRequestHeader(o,r.headers[o]);n.withCredentials=r.credentials=="include",n.onload=function(){t(f())},n.onerror=a,n.send(r.body||null);function f(){var l=[],h=[],d={},p;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(b,A,E){l.push(A=A.toLowerCase()),h.push([A,E]),p=d[A],d[A]=p?"".concat(p,",").concat(E):E}),{ok:(n.status/100|0)==2,status:n.status,statusText:n.statusText,url:n.responseURL,clone:f,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},headers:{keys:function(){return l},entries:function(){return h},get:function(A){return d[A.toLowerCase()]},has:function(A){return A.toLowerCase()in d}}}}})});function num_mnemicic_re(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function gen_rational_re(e,r){return"".concat(num_mnemicic_re(e),"[+-]?").concat(r,"+/").concat(r,"+")}function gen_complex_re(e,r){return"".concat(num_mnemicic_re(e),"(?:[+-]?(?:").concat(r,"+/").concat(r,"+|nan.0|inf.0|").concat(r,"+))?(?:[+-]i|[+-]?(?:").concat(r,"+/").concat(r,"+|").concat(r,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function gen_integer_re(e,r){return"".concat(num_mnemicic_re(e),"[+-]?").concat(r,"+")}var re_re=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/,float_stre="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)",complex_float_stre="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(float_stre,"|[+-]?[0-9]+))?(?:").concat(float_stre,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i"),float_re=new RegExp("^(#[ie])?".concat(float_stre,"$"),"i");function make_complex_match_re(e,r){var t=e==="x"?"(?!\\+|".concat(r,")"):"(?!\\.|".concat(r,")"),a="";return e===""&&(a="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"),new RegExp("^((?:(?:".concat(a,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(r,"+/").concat(r,"+(?!").concat(r,")|[+-]?").concat(r,"+)").concat(t,")?)(").concat(a,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(r,"+/").concat(r,"+|[+-]?").concat(r,"+|[+-])i$"),"i")}var complex_list_re=function(){var e={};return[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(r){var t=_slicedToArray(r,3),a=t[0],n=t[1],o=t[2];e[a]=make_complex_match_re(n,o)}),e}(),characters={alarm:"\x07",backspace:"\b",delete:"\x7F",escape:"",newline:`
`,null:"\0",return:"\r",space:" ",tab:"	",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"\x07",etb:"",bs:"\b",can:"",ht:"	",em:"",lf:`
`,sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:"\x7F"};function ucs2decode(e){for(var r=[],t=0,a=e.length;t<a;){var n=e.charCodeAt(t++);if(n>=55296&&n<=56319&&t<a){var o=e.charCodeAt(t++);(o&64512)==56320?r.push(((n&1023)<<10)+(o&1023)+65536):(r.push(n),t--)}else r.push(n)}return r}var character_symbols=Object.keys(characters).join("|"),char_sre_re="#\\\\(?:x[0-9a-f]+|".concat(character_symbols,"|[\\s\\S])"),char_re=new RegExp("^".concat(char_sre_re,"$"),"i");function make_num_stre(e){var r=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]],t=r.map(function(a){var n=_slicedToArray(a,2),o=n[0],f=n[1];return e(o,f)}).join("|");return e===gen_complex_re&&(t=complex_float_stre+"|"+t),t}function make_type_re(e){return new RegExp("^(?:"+make_num_stre(e)+")$","i")}var complex_re=make_type_re(gen_complex_re),rational_re=make_type_re(gen_rational_re),int_re=make_type_re(gen_integer_re),int_bare_re=new RegExp("^(?:"+gen_integer_re("","[0-9a-f]")+")$","i"),rational_bare_re=new RegExp("^(?:"+gen_rational_re("","[0-9a-f]")+")$","i"),complex_bare_re=new RegExp("^(?:"+gen_complex_re("","[0-9a-f]")+")$","i"),complex_bare_match_re=make_complex_match_re("","[0-9a-fA-F]"),pre_num_parse_re=/((?:#[xodbie]){0,2})(.*)/i;function num_pre_parse(e){var r=e.match(pre_num_parse_re),t={};if(r[1]){var a=r[1].replace(/#/g,"").toLowerCase().split("");a.includes("x")?t.radix=16:a.includes("o")?t.radix=8:a.includes("b")?t.radix=2:a.includes("d")&&(t.radix=10),a.includes("i")&&(t.inexact=!0),a.includes("e")&&(t.exact=!0)}return t.number=r[2],t}function parse_rational(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:10,t=num_pre_parse(e),a=t.number.split("/"),n=LRational({num:LNumber([a[0],t.radix||r]),denom:LNumber([a[1],t.radix||r])});return t.inexact?n.valueOf():n}function parse_integer(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:10,t=num_pre_parse(e);return t.inexact?LFloat(parseInt(t.number,t.radix||r)):LNumber([t.number,t.radix||r])}function parse_character(e){var r=e.match(/#\\x([0-9a-f]+)$/i),t;if(r){var a=parseInt(r[1],16);t=String.fromCodePoint(a)}else r=e.match(/#\\(.+)$/),r&&(t=r[1]);if(t)return LCharacter(t);throw new Error("Parse: invalid character")}function parse_complex(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:10;function t(h){var d;if(h==="+")d=LNumber(1);else if(h==="-")d=LNumber(-1);else if(h.match(int_bare_re))d=LNumber([h,r]);else if(h.match(rational_bare_re)){var p=h.split("/");d=LRational({num:LNumber([p[0],r]),denom:LNumber([p[1],r])})}else if(h.match(float_re)){var b=parse_float(h);return a.exact?b.toRational():b}else{if(h.match(/nan.0$/))return LNumber(NaN);if(h.match(/inf.0$/))return h[0]==="-"?LNumber(Number.NEGATIVE_INFINITY):LNumber(Number.POSITIVE_INFINITY);throw new Error("Internal Parser Error")}return a.inexact?LFloat(d.valueOf()):d}var a=num_pre_parse(e);r=a.radix||r;var n,o=a.number.match(complex_bare_match_re);r!==10&&o?n=o:n=a.number.match(complex_list_re[r]);var f,l;return l=t(n[2]),n[1]?f=t(n[1]):f=LNumber(0),l.cmp(0)===0&&l.__type__==="bigint"?f:LComplex({im:l,re:f})}function is_int(e){return parseInt(e.toString(),10)===e}function parse_big_int(e){var r=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(r){var t=parseInt(r[4],10),a,n=r[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length,o=r[3]&&r[3].length;n<Math.abs(t)&&(a=LNumber([r[1].replace(/\./,""),10]),o&&(t-=o))}return{exponent:t,mantisa:a}}function parse_float(e){var r=num_pre_parse(e),t=parseFloat(r.number),a=(r.number.match(/\.0$/)||!r.number.match(/\./))&&!r.number.match(/e/i);if(!r.inexact){if(r.exact&&a||is_int(t)&&r.number.match(/e\+?[0-9]/i))return LNumber(t);var n=parse_big_int(r.number),o=n.mantisa,f=n.exponent;if(o!==undefined$1&&f!==undefined$1){var l=LNumber(10).pow(LNumber(Math.abs(f)));if(r.exact&&f<0)return LRational({num:o,denom:l});if(f>0)return LNumber(o).mul(l)}}return t=LFloat(t),r.exact?t.toRational():t}function parse_string(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(t,a){return"\\u"+a.padStart(4,"0")}).replace(/\n/g,"\\n");var r=e.match(/(\\*)(\\x[0-9A-F])/i);if(r&&r[1].length%2==0)throw new Error("Invalid string literal, unclosed ".concat(r[2]));try{return LString(JSON.parse(e))}catch(t){throw new Error("Invalid string literal")}}function parse_symbol(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"	",r:"\r",n:`
`};e=e.replace(/\\(x[^;]+);/g,function(t,a){return String.fromCharCode(parseInt("0"+a,16))}).replace(/\\(.)/g,function(t,a){return r[a]||a})}return new LSymbol(e)}function parse_argument(e){if(constants.hasOwnProperty(e))return constants[e];if(e.match(/^"[\s\S]*"$/))return parse_string(e);if(e[0]==="#"){var r=e.match(re_re);if(r)return new RegExp(r[1],r[2]);if(e.match(char_re))return parse_character(e);var t=e.match(/#\\(.+)/);if(t&&ucs2decode(t[1]).length===1)return parse_character(e)}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(int_re))return parse_integer(e);if(e.match(float_re))return parse_float(e);if(e.match(rational_re))return parse_rational(e);if(e.match(complex_re))return parse_complex(e)}if(e.match(/^#[iexobd]/))throw new Error("Invalid numeric constant: "+e);return parse_symbol(e)}function is_symbol_string(e){return!(["(",")","[","]"].includes(e)||e.match(re_re)||e.match(/^"[\s\S]*"$/)||e.match(int_re)||e.match(float_re)||e.match(complex_re)||e.match(rational_re)||e.match(char_re)||["#t","#f","nil","true","false"].includes(e))}var string_re=/"(?:\\[\S\s]|[^"])*"?/g;function escape_regex(e){if(typeof e=="string"){var r=/([-\\^$[\]()+{}?*.|])/g;return e.replace(r,"\\$1")}return e}function Stack(){this.data=[]}Stack.prototype.push=function(e){this.data.push(e)},Stack.prototype.top=function(){return this.data[this.data.length-1]},Stack.prototype.pop=function(){return this.data.pop()},Stack.prototype.is_empty=function(){return!this.data.length};function tokens(e){e instanceof LString&&(e=e.valueOf());for(var r=new Lexer(e,{whitespace:!0}),t=[];;){var a=r.peek(!0);if(a===eof)break;t.push(a),r.skip()}return t}function multiline_formatter(e){var r=e.token,t=_objectWithoutProperties(e,_excluded);if(r.match(/^"[\s\S]*"$/)&&r.match(/\n/)){var a=new RegExp("^ {1,"+(e.col+1)+"}","mg");r=r.replace(a,"")}return _objectSpread({token:r},t)}function Thunk(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:function(){};this.fn=e,this.cont=r}Thunk.prototype.toString=function(){return"#<Thunk>"};function trampoline(e){return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return unwind(e.apply(this,t))}}function unwind(e){for(;e instanceof Thunk;){var r=e;e=e.fn(),e instanceof Thunk||r.cont()}return e}function tokenize(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;if(e instanceof LString&&(e=e.toString()),r)return tokens(e);var t=tokens(e).map(function(a){return a.token==="#\\ "?a.token:a.token.trim()}).filter(function(a){return a&&!a.match(/^;/)&&!a.match(/^#\|[\s\S]*\|#$/)});return strip_s_comments(t)}function strip_s_comments(e){for(var r=0,t=null,a=[],n=0;n<e.length;++n){var o=e[n];if(o==="#;"){["(","["].includes(e[n+1])?(r=1,t=n):a.push([n,n+2]),n+=1;continue}t!==null&&([")","]"].includes(o)?r--:["(","["].includes(o)&&r++,r===0&&(a.push([t,n+1]),t=null))}e=e.slice(),a.reverse();for(var f=0,l=a;f<l.length;f++){var h=_slicedToArray(l[f],2),d=h[0],p=h[1];e.splice(d,p-d)}return e}function isSymbol(e){return _typeof(e)==="symbol"||_typeof(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function LSymbol(e){if(typeof this!="undefined"&&this.constructor!==LSymbol||typeof this=="undefined")return new LSymbol(e);if(e instanceof LString&&(e=e.valueOf()),LSymbol.list[e]instanceof LSymbol)return LSymbol.list[e];this.__name__=e,typeof e=="string"&&(LSymbol.list[e]=this)}LSymbol.list={},LSymbol.is=function(e,r){return e instanceof LSymbol&&(r instanceof LSymbol&&e.__name__===r.__name__||typeof r=="string"&&e.__name__===r||r instanceof RegExp&&r.test(e.__name__))},LSymbol.prototype.toString=function(e){if(isSymbol(this.__name__))return symbol_to_string(this.__name__);var r=this.valueOf();return e&&r.match(/\s/)?"|".concat(r,"|"):r},LSymbol.prototype.serialize=function(){return LString.isString(this.__name__)?this.__name__:[symbol_to_string(this.__name__)]},LSymbol.prototype.valueOf=function(){return this.__name__.valueOf()},LSymbol.prototype.is_gensym=function(){return is_gensym(this.__name__)};function symbol_to_string(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function is_gensym(e){return _typeof(e)==="symbol"?!!e.toString().match(/^Symbol\(#:/):!1}var gensym=function(){var e=0;return function(){var r=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return r instanceof LSymbol&&(r=r.valueOf()),is_gensym(r)?LSymbol(r):r!==null?new LSymbol(Symbol("#:".concat(r))):(e++,new LSymbol(Symbol("#:g".concat(e))))}}();function QuotedPromise(e){var r=this,t={pending:!0,rejected:!1,fulfilled:!1,reason:undefined$1,type:undefined$1};e=e.then(function(a){return t.type=type(a),t.fulfilled=!0,t.pending=!1,a}),read_only(this,"_promise",e,{hidden:!0}),is_function(e.catch)&&(e=e.catch(function(a){t.rejected=!0,t.pending=!1,t.reason=a})),Object.keys(t).forEach(function(a){Object.defineProperty(r,"__".concat(a,"__"),{enumerable:!0,get:function(){return t[a]}})}),read_only(this,"__promise__",e),this.then=!1}QuotedPromise.prototype.then=function(e){return new QuotedPromise(this.valueOf().then(e))},QuotedPromise.prototype.catch=function(e){return new QuotedPromise(this.valueOf().catch(e))},QuotedPromise.prototype.valueOf=function(){if(!this._promise)throw new Error("QuotedPromise: invalid promise created");return this._promise},QuotedPromise.prototype.toString=function(){return this.__pending__?QuotedPromise.pending_str:this.__rejected__?QuotedPromise.rejected_str:"#<js-promise resolved (".concat(this.__type__,")>")},QuotedPromise.pending_str="#<js-promise (pending)>",QuotedPromise.rejected_str="#<js-promise (rejected)>";function promise_all(e){return Array.isArray(e)?Promise.all(escape_quoted_promises(e)).then(unescape_quoted_promises):e}function escape_quoted_promises(e){for(var r=new Array(e.length),t=e.length;t--;){var a=e[t];a instanceof QuotedPromise?r[t]=new Value(a):r[t]=a}return r}function unescape_quoted_promises(e){for(var r=new Array(e.length),t=e.length;t--;){var a=e[t];a instanceof Value?r[t]=a.valueOf():r[t]=a}return r}var specials={LITERAL:Symbol.for("literal"),SPLICE:Symbol.for("splice"),SYMBOL:Symbol.for("symbol"),names:function(){return Object.keys(this._specials)},type:function(r){return this.get(r).type},get:function(r){return this._specials[r]},off:function(r){var t=this,a=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:null;Array.isArray(r)?r.forEach(function(n){return t.off(n,a)}):a===null?delete this._events[r]:this._events=this._events.filter(function(n){return n!==a})},on:function(r,t){var a=this;Array.isArray(r)?r.forEach(function(n){return a.on(n,t)}):this._events[r]?this._events[r].push(t):this._events[r]=[t]},trigger:function(r){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];this._events[r]&&this._events[r].forEach(function(o){return o.apply(void 0,a)})},remove:function(r){this.trigger("remove"),delete this._specials[r]},append:function(r,t,a){this.trigger("append"),this._specials[r]={seq:r,symbol:t,type:a}},_events:{},_specials:{}};function is_literal(e){return specials.type(e)===specials.LITERAL}var defined_specials=[["'",new LSymbol("quote"),specials.LITERAL],["`",new LSymbol("quasiquote"),specials.LITERAL],[",@",new LSymbol("unquote-splicing"),specials.LITERAL],[",",new LSymbol("unquote"),specials.LITERAL],["'>",new LSymbol("quote-promise"),specials.LITERAL]];Object.defineProperty(specials,"builtin",{writable:!1,value:defined_specials.map(function(e){return e[0]})}),defined_specials.forEach(function(e){var r=_slicedToArray(e,3),t=r[0],a=r[1],n=r[2];specials.append(t,a,n)});var Lexer=function(){function e(r){var t=this,a=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},n=a.whitespace,o=n===void 0?!1:n;_classCallCheck(this,e),read_only(this,"__input__",r.replace(/\r/g,""));var f={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(l){Object.defineProperty(t,l,{configurable:!1,enumerable:!1,get:function(){return f[l]},set:function(d){f[l]=d}})}),this._whitespace=o,this._i=this._line=this._col=this._newline=0,this._state=this._next=this._token=null,this._prev_char=""}return _createClass(e,[{key:"get",value:function(t){return this.__internal[t]}},{key:"set",value:function(t,a){this.__internal[t]=a}},{key:"token",value:function(){var t=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:!1;if(t){var a=this._line;return this._whitespace&&this._token===`
`&&--a,{token:this._token,col:this._col,offset:this._i,line:a}}return this._token}},{key:"peek",value:function(){var t=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:!1;if(this._i>=this.__input__.length)return eof;if(this._token)return this.token(t);var a=this.next_token();return a?(this._token=this.__input__.substring(this._i,this._next),this.token(t)):eof}},{key:"skip",value:function(){this._next!==null&&(this._token=null,this._i=this._next)}},{key:"read_line",value:function(){var t=this.__input__.length;if(this._i>=t)return eof;for(var a=this._i;a<t;++a){var n=this.__input__[a];if(n===`
`){var o=this.__input__.substring(this._i,a);return this._i=a+1,++this._line,o}}return this.read_rest()}},{key:"read_rest",value:function(){var t=this._i;return this._i=this.__input__.length,this.__input__.substring(t)}},{key:"read_string",value:function(t){var a=this.__input__.length;if(this._i>=a)return eof;if(t+this._i>=a)return this.read_rest();var n=this._i+t,o=this.__input__.substring(this._i,n),f=o.match(/\n/g);return f&&(this._line+=f.length),this._i=n,o}},{key:"peek_char",value:function(){return this._i>=this.__input__.length?eof:LCharacter(this.__input__[this._i])}},{key:"read_char",value:function(){var t=this.peek_char();return this.skip_char(),t}},{key:"skip_char",value:function(){this._i<this.__input__.length&&(++this._i,this._token=null)}},{key:"match_rule",value:function(t){var a=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},n=a.prev_char,o=a.char,f=a.next_char,l=_slicedToArray(t,4),h=l[0],d=l[1],p=l[2],b=l[3];if(t.length!==5)throw new Error("Lexer: Invald rule of length ".concat(t.length));return!(!o.match(h)||!match_or_null(d,n)||!match_or_null(p,f)||b!==this._state)}},{key:"next_token",value:function(){if(this._i>=this.__input__.length)return!1;var t=!0;e:for(var a=this._i,n=this.__input__.length;a<n;++a){var o=this.__input__[a],f=this.__input__[a-1]||"",l=this.__input__[a+1]||"";if(o===`
`){++this._line;var h=this._newline;if(this._state===null&&(this._newline=a+1),this._whitespace&&this._state===null)return this._next=a+1,this._col=this._i-h,!0}if(t&&this._state===null&&o.match(/\s/))if(this._whitespace){if(l.match(/\s/))continue;return this._next=a+1,this._col=this._i-this._newline,!0}else{this._i=a+1;continue}t=!1;var d=_createForOfIteratorHelper(e.rules),p;try{for(d.s();!(p=d.n()).done;){var b=p.value;if(this.match_rule(b,{prev_char:f,char:o,next_char:l})){var A=b[b.length-1];if(this._state=A,this._state===null)return this._next=a+1,this._col=this._i-this._newline,!0;continue e}}}catch(F){d.e(F)}finally{d.f()}if(this._state!==null)continue e;var E=this.__input__.split(`
`)[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,`
`).concat(E))}}}]),e}();Lexer.symbol_rule=function(r,t){var a=Lexer.literal_rule(r,t,Lexer.boundary,/\S/);return a.concat([[/\S/,/\S/,Lexer.boundary,null,null],[/\S/,/\S/,null,null,Lexer.symbol],[/\S/,null,Lexer.boundary,Lexer.symbol,null]])},Lexer.literal_rule=function(r,t){var a=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:null,n=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:null;if(r.length===0)throw new Error("Lexer: invalid literal rule");if(r.length===1)return[[r,a,n,null,null]];for(var o=[],f=0,l=r.length;f<l;++f){var h=[];h.push(r[f]),h.push(r[f-1]||a),h.push(r[f+1]||n),f===0?(h.push(null),h.push(t)):f===l-1?(h.push(t),h.push(null)):(h.push(t),h.push(t)),o.push(h)}return o},Lexer.string=Symbol.for("string"),Lexer.symbol=Symbol.for("symbol"),Lexer.comment=Symbol.for("comment"),Lexer.regex=Symbol.for("regex"),Lexer.regex_class=Symbol.for("regex_class"),Lexer.character=Symbol.for("character"),Lexer.bracket=Symbol.for("bracket"),Lexer.b_symbol=Symbol.for("b_symbol"),Lexer.b_comment=Symbol.for("b_comment"),Lexer.i_comment=Symbol.for("i_comment"),Lexer.l_datum=Symbol.for("l_datum"),Lexer.boundary=/^$|[\s()[\]]/,Lexer._rules=[[/"/,/^$|[^\\]/,null,null,Lexer.string],[/"/,/^$|[^\\]/,null,Lexer.string,null],[/#/,null,/[bdxoeitf]/i,null,Lexer.symbol],[/#/,null,/\\/,null,Lexer.character],[/\\/,/#/,/\s/,Lexer.character,Lexer.character],[/\\/,/#/,/[()[\]]/,Lexer.character,Lexer.character],[/\s/,/\\/,null,Lexer.character,null],[/\S/,null,Lexer.boundary,Lexer.character,null],[/#/,Lexer.boundary,/\//,null,Lexer.regex],[/[ \t]/,null,null,Lexer.regex,Lexer.regex],[/\[/,null,null,Lexer.regex,Lexer.regex_class],[/\]/,/[^\\]/,null,Lexer.regex_class,Lexer.regex],[/[()[\]]/,null,null,Lexer.regex,Lexer.regex],[/\//,/\\/,null,Lexer.regex,Lexer.regex],[/\//,/[^#]/,Lexer.boundary,Lexer.regex,null],[/[gimyus]/,/\//,Lexer.boundary,Lexer.regex,null],[/[gimyus]/,/\//,/[gimyus]/,Lexer.regex,Lexer.regex],[/[gimyus]/,/[gimyus]/,Lexer.boundary,Lexer.regex,null],[/;/,/^$|[^#]/,null,null,Lexer.comment],[/[\s\S]/,null,/\n/,Lexer.comment,null],[/\s/,null,null,Lexer.comment,Lexer.comment],[/#/,null,/\|/,null,Lexer.b_comment],[/\s/,null,null,Lexer.b_comment,Lexer.b_comment],[/#/,/\|/,null,Lexer.b_comment,null],[/#/,null,/;/,null,Lexer.i_comment],[/;/,/#/,null,Lexer.i_comment,null],[/#/,null,/[0-9]/,null,Lexer.l_datum],[/=/,/[0-9]/,null,Lexer.l_datum,null],[/#/,/[0-9]/,null,Lexer.l_datum,null],[/\|/,null,null,null,Lexer.b_symbol],[/\s/,null,null,Lexer.b_symbol,Lexer.b_symbol],[/\|/,null,Lexer.boundary,Lexer.b_symbol,null]],Lexer._brackets=[[/[()[\]]/,null,null,null,null]],Lexer._symbol_rules=[[/\S/,Lexer.boundary,Lexer.boundary,null,null],[/\S/,Lexer.boundary,null,null,Lexer.symbol],[/\S/,null,Lexer.boundary,null,null],[/\S/,null,null,null,Lexer.symbol],[/\S/,null,Lexer.boundary,Lexer.symbol,null]],Lexer._cache={valid:!1,rules:null},specials.on(["remove","append"],function(){Lexer._cache.valid=!1,Lexer._cache.rules=null}),Object.defineProperty(Lexer,"rules",{get:function(){if(Lexer._cache.valid)return Lexer._cache.rules;var r=specials.names().sort(function(a,n){return n.length-a.length||a.localeCompare(n)}),t=r.reduce(function(a,n){var o=specials.get(n),f=o.type,l=o.symbol,h,d;return n[0]==="#"?n.length===1?d=Symbol.for(n):d=Symbol.for(n[1]):d=l,f===specials.SYMBOL?h=Lexer.symbol_rule(n,d):h=Lexer.literal_rule(n,d),a.concat(h)},[]);return Lexer._cache.rules=Lexer._rules.concat(Lexer._brackets,t,Lexer._symbol_rules),Lexer._cache.valid=!0,Lexer._cache.rules}});function match_or_null(e,r){return e===null||r.match(e)}var Parser=function(){function e(r){var t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},a=t.env,n=t.meta,o=n===void 0?!1:n,f=t.formatter,l=f===void 0?multiline_formatter:f;_classCallCheck(this,e),r instanceof LString&&(r=r.toString()),read_only(this,"_formatter",l,{hidden:!0}),read_only(this,"__lexer__",new Lexer(r)),read_only(this,"__env__",a),read_only(this,"_meta",o,{hidden:!0}),read_only(this,"_refs",[],{hidden:!0})}return _createClass(e,[{key:"resolve",value:function(t){return this.__env__&&this.__env__.get(t,{throwError:!1})}},{key:"peek",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(n=this.__lexer__.peek(!0),n!==eof){f.next=4;break}return f.abrupt("return",eof);case 4:if(!this.is_comment(n.token)){f.next=7;break}return this.skip(),f.abrupt("continue",0);case 7:if(n.token!=="#;"){f.next=14;break}if(this.skip(),this.__lexer__.peek()!==eof){f.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:return f.next=13,this._read_object();case 13:return f.abrupt("continue",0);case 14:return f.abrupt("break",17);case 17:if(n=this._formatter(n),!this._meta){f.next=20;break}return f.abrupt("return",n);case 20:return f.abrupt("return",n.token);case 21:case"end":return f.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"reset",value:function(){this._refs.length=0}},{key:"skip",value:function(){this.__lexer__.skip()}},{key:"is_special",value:function(t){return specials.names().includes(t)}},{key:"is_builtin",value:function(t){return specials.builtin.includes(t)}},{key:"read",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.peek();case 2:return n=f.sent,this.skip(),f.abrupt("return",n);case 5:case"end":return f.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function(t){var a=t.match(/^#([0-9]+)=$/);return a&&a[1]}},{key:"match_datum_ref",value:function(t){var a=t.match(/^#([0-9]+)#$/);return a&&a[1]}},{key:"is_open",value:function(t){return["(","["].includes(t)}},{key:"is_close",value:function(t){return[")","]"].includes(t)}},{key:"read_list",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n,o,f,l;return regenerator.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:n=_nil,o=n;case 1:return d.next=4,this.peek();case 4:if(f=d.sent,f!==eof){d.next=7;break}return d.abrupt("break",27);case 7:if(!this.is_close(f)){d.next=10;break}return this.skip(),d.abrupt("break",27);case 10:if(!(f==="."&&n!==_nil)){d.next=17;break}return this.skip(),d.next=14,this._read_object();case 14:o.cdr=d.sent,d.next=25;break;case 17:return d.t0=Pair,d.next=20,this._read_object();case 20:d.t1=d.sent,d.t2=_nil,l=new d.t0(d.t1,d.t2),n===_nil?n=l:o.cdr=l,o=l;case 25:d.next=1;break;case 27:return d.abrupt("return",n);case 28:case"end":return d.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.read();case 2:if(n=f.sent,n!==eof){f.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return f.abrupt("return",parse_argument(n));case 6:case"end":return f.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"is_comment",value:function(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function(t){return _evaluate(t,{env:this.__env__,error:function(n){throw n}})}},{key:"read_object",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.reset(),f.next=3,this._read_object();case 3:if(n=f.sent,n instanceof DatumReference&&(n=n.valueOf()),!this._refs.length){f.next=7;break}return f.abrupt("return",this._resolve_object(n));case 7:return f.abrupt("return",n);case 8:case"end":return f.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"_resolve_object",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(n){var o=this,f;return regenerator.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!Array.isArray(n)){h.next=2;break}return h.abrupt("return",n.map(function(d){return o._resolve_object(d)}));case 2:if(!is_plain_object(n)){h.next=6;break}return f={},Object.keys(n).forEach(function(d){f[d]=o._resolve_object(n[d])}),h.abrupt("return",f);case 6:if(!(n instanceof Pair)){h.next=8;break}return h.abrupt("return",this._resolve_pair(n));case 8:return h.abrupt("return",n);case 9:case"end":return h.stop()}},a,this)}));function t(a){return r.apply(this,arguments)}return t}()},{key:"_resolve_pair",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(n){return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(n instanceof Pair)){f.next=15;break}if(!(n.car instanceof DatumReference)){f.next=7;break}return f.next=4,n.car.valueOf();case 4:n.car=f.sent,f.next=8;break;case 7:this._resolve_pair(n.car);case 8:if(!(n.cdr instanceof DatumReference)){f.next=14;break}return f.next=11,n.cdr.valueOf();case 11:n.cdr=f.sent,f.next=15;break;case 14:this._resolve_pair(n.cdr);case 15:return f.abrupt("return",n);case 16:case"end":return f.stop()}},a,this)}));function t(a){return r.apply(this,arguments)}return t}()},{key:"_read_object",value:function(){var r=_asyncToGenerator(regenerator.mark(function a(){var n,o,f,l,h,d,p,b,A;return regenerator.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.peek();case 2:if(n=F.sent,n!==eof){F.next=5;break}return F.abrupt("return",n);case 5:if(!this.is_special(n)){F.next=35;break}return o=specials.get(n),f=this.is_builtin(n),this.skip(),F.next=11,this._read_object();case 11:if(h=F.sent,f){F.next=22;break}if(d=this.__env__.get(o.symbol),typeof d!="function"){F.next=22;break}if(!is_literal(n)){F.next=19;break}return F.abrupt("return",d.call(this.__env__,h));case 19:if(!(h instanceof Pair)){F.next=21;break}return F.abrupt("return",d.apply(this.__env__,h.to_array(!1)));case 21:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(o.symbol));case 22:if(is_literal(n)?l=new Pair(o.symbol,new Pair(h,_nil)):l=new Pair(o.symbol,h),!f){F.next=25;break}return F.abrupt("return",l);case 25:if(!(d instanceof Macro)){F.next=34;break}return F.next=28,this.evaluate(l);case 28:if(p=F.sent,!(p instanceof Pair||p instanceof LSymbol)){F.next=31;break}return F.abrupt("return",Pair.fromArray([LSymbol("quote"),p]));case 31:return F.abrupt("return",p);case 34:throw new Error("Parse Error: invlid parser extension: "+o.symbol);case 35:if(b=this.match_datum_ref(n),b===null){F.next=41;break}if(this.skip(),!this._refs[b]){F.next=40;break}return F.abrupt("return",new DatumReference(b,this._refs[b]));case 40:throw new Error("Parse Error: invalid datum label #".concat(b,"#"));case 41:if(A=this.match_datum_label(n),A===null){F.next=48;break}return this.skip(),this._refs[A]=this._read_object(),F.abrupt("return",this._refs[A]);case 48:if(!this.is_open(n)){F.next=53;break}return this.skip(),F.abrupt("return",this.read_list());case 53:return F.abrupt("return",this.read_value());case 54:case"end":return F.stop()}},a,this)}));function t(){return r.apply(this,arguments)}return t}()}]),e}(),DatumReference=function(){function e(r,t){_classCallCheck(this,e),this.name=r,this.data=t}return _createClass(e,[{key:"valueOf",value:function(){return this.data}}]),e}();function parse(e,r){return _parse.apply(this,arguments)}function _parse(){return _parse=_wrapAsyncGenerator(regenerator.mark(function e(r,t){var a,n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:t||(global_env?t=global_env.get("**interaction-environment**",{throwError:!1}):t=user_env),a=new Parser(r,{env:t});case 2:return f.next=5,_awaitAsyncGenerator(a.read_object());case 5:if(n=f.sent,n!==eof){f.next=8;break}return f.abrupt("break",12);case 8:return f.next=10,n;case 10:f.next=2;break;case 12:case"end":return f.stop()}},e)})),_parse.apply(this,arguments)}function unpromise(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:function(n){return n},t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:null;if(is_promise(e)){var a=e.then(r);return t===null?a:a.catch(t)}return e instanceof Array?unpromise_array(e,r,t):is_plain_object(e)?unpromise_object(e,r,t):r(e)}function unpromise_array(e,r,t){return e.find(is_promise)?unpromise(promise_all(e),function(a){return Object.isFrozen(e)&&Object.freeze(a),a},t):r(e)}function unpromise_object(e,r,t){for(var a=Object.keys(e),n=[],o=[],f=a.length;f--;){var l=a[f],h=e[l];n[f]=h,is_promise(h)&&o.push(h)}return o.length?unpromise(promise_all(n),function(d){var p={};return d.forEach(function(b,A){var E=a[A];p[E]=b}),Object.isFrozen(e)&&Object.freeze(p),p},t):r(e)}function read_only(e,r,t){var a=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:{},n=a.hidden,o=n===void 0?!1:n;Object.defineProperty(e,r,{value:t,configurable:!0,enumerable:!o})}function uniterate_async(e){return _uniterate_async.apply(this,arguments)}function _uniterate_async(){return _uniterate_async=_asyncToGenerator(regenerator.mark(function e(r){var t,a,n,o,f,l,h,d;return regenerator.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:t=[],a=!0,n=!1,b.prev=3,f=_asyncIterator(r);case 5:return b.next=7,f.next();case 7:return l=b.sent,a=l.done,b.next=11,l.value;case 11:if(h=b.sent,a){b.next=18;break}d=h,t.push(d);case 15:a=!0,b.next=5;break;case 18:b.next=24;break;case 20:b.prev=20,b.t0=b.catch(3),n=!0,o=b.t0;case 24:if(b.prev=24,b.prev=25,!(!a&&f.return!=null)){b.next=29;break}return b.next=29,f.return();case 29:if(b.prev=29,!n){b.next=32;break}throw o;case 32:return b.finish(29);case 33:return b.finish(24);case 34:return b.abrupt("return",t);case 35:case"end":return b.stop()}},e,null,[[3,20,24,34],[25,,29,33]])})),_uniterate_async.apply(this,arguments)}function matcher(e,r){if(r instanceof RegExp)return function(t){return String(t).match(r)};if(is_function(r))return r;throw new Error("Invalid matcher")}function doc(e,r,t,a){return typeof e!="string"&&(r=arguments[0],t=arguments[1],a=arguments[2],e=null),t&&(a?r.__doc__=t:r.__doc__=trim_lines(t)),e?r.__name__=e:r.name&&!is_lambda(r)&&(r.__name__=r.name),r}function trim_lines(e){return e.split(`
`).map(function(r){return r.trim()}).join(`
`)}function previousSexp(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:1,t=e.length;if(r<=0)throw Error("previousSexp: Invalid argument sexp = ".concat(r));e:for(;r--&&t>=0;){for(var a=1;a>0;){var n=e[--t];if(!n)break e;n==="("||n.token==="("?a--:(n===")"||n.token===")")&&a++}t--}return e.slice(t+1)}function lineIndent(e){if(!e||!e.length)return 0;var r=e.length;if(e[r-1].token===`
`)return 0;for(;--r;)if(e[r].token===`
`){var t=(e[r+1]||{}).token;if(t)return t.length}return 0}function match(e,r){return t(e,r)===r.length;function t(a,n){function o(E,F){var M=_createForOfIteratorHelper(E),D;try{for(M.s();!(D=M.n()).done;){var C=D.value,P=t(C,F);if(P!==-1)return P}}catch(O){M.e(O)}finally{M.f()}return-1}function f(){return a[h]===Symbol.for("symbol")&&!is_symbol_string(n[p])}function l(){var E=a[h+1],F=n[p+1];if(E!==undefined$1&&F!==undefined$1)return t([E],[F])}for(var h=0,d={},p=0;p<n.length;++p){if(typeof a[h]=="undefined")return p;if(a[h]instanceof Pattern){var b;if(["+","*"].includes(a[h].flag)){for(;p<n.length&&(b=o(a[h].patterns,n.slice(p)),b!==-1);)p+=b;p-=1,h++;continue}else if(a[h].flag==="?"){b=o(a[h].patterns,n.slice(p)),b===-1?p-=2:h++;continue}}else if(a[h]instanceof RegExp){if(!n[p].match(a[h]))return-1}else if(lips.LString.isString(a[h])){if(a[h].valueOf()!==n[p])return-1}else if(_typeof(a[h])==="symbol"){if(a[h]===Symbol.for("*")){if(d[h]=d[h]||0,["(","["].includes(n[p])?d[h]++:[")","]"].includes(n[p])&&d[h]--,typeof a[h+1]!="undefined"&&d[h]===0&&l()===-1||d[h]>0)continue}else if(f())return-1}else if(a[h]instanceof Array){var A=t(a[h],n.slice(p));if(A===-1||A+p>n.length)return-1;p+=A-1,h++;continue}else return-1;h++}return a.length!==h?-1:n.length}}function Formatter(e){this.__code__=e.replace(/\r/g,"")}Formatter.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}},Formatter.match=match,Formatter.prototype._options=function(r){var t=Formatter.defaults;if(typeof r=="undefined")return Object.assign({},t);var a=r&&r.exceptions||{},n=a.specials||[],o=a.shift||{1:[]};return _objectSpread(_objectSpread(_objectSpread({},t),r),{},{exceptions:{specials:[].concat(_toConsumableArray(t.exceptions.specials),_toConsumableArray(n)),shift:_objectSpread(_objectSpread({},o),{},{1:[].concat(_toConsumableArray(t.exceptions.shift[1]),_toConsumableArray(o[1]))})}})},Formatter.prototype.indent=function(r){var t=tokenize(this.__code__,!0);return this._indent(t,r)},Formatter.exception_shift=function(e,r){function t(d){if(!d.length)return!1;if(d.indexOf(e)!==-1)return!0;var p=d.filter(function(F){return F instanceof RegExp});if(!p.length)return!1;var b=_createForOfIteratorHelper(p),A;try{for(b.s();!(A=b.n()).done;){var E=A.value;if(e.match(E))return!0}}catch(F){b.e(F)}finally{b.f()}return!1}if(t(r.exceptions.specials))return r.indent;for(var a=r.exceptions.shift,n=0,o=Object.entries(a);n<o.length;n++){var f=_slicedToArray(o[n],2),l=f[0],h=f[1];if(t(h))return+l}return-1},Formatter.prototype._indent=function(r,t){var a=this._options(t),n=lineIndent(r),o=previousSexp(r),f=r[r.length-o.length-1],l=r[r.length-1];if(l.token.match(/^"[\S\s]+[^"]$/))return n+a.indent;if(o&&o.length){if(o[0].line>0&&(a.offset=0),o.toString()===r.toString()&&balanced(o))return a.offset+o[0].col;if(o.length===1)return a.offset+o[0].col+1;var h=-1;if(f){var d=Formatter.exception_shift(f.token,a);d!==-1&&(h=d)}if(h===-1&&(h=Formatter.exception_shift(o[1].token,a)),h!==-1)return a.offset+o[0].col+h;if(o[0].line<o[1].line)return a.offset+o[0].col+1;if(o.length>3&&o[1].line===o[3].line)return o[1].token==="("||o[1].token==="["?a.offset+o[1].col:a.offset+o[3].col;if(o[0].line===o[1].line)return a.offset+a.indent+o[0].col;for(var p=o.slice(2),b=0;b<p.length;++b){var A=p[b];if(A.token.trim())return A.col}}else return 0;return n+a.indent};function Ahead(e){this.pattern=e}Ahead.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")},Ahead.prototype.match=function(e){return e.match(this.pattern)};function Pattern(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var a=r.pop();this.patterns=r,this.flag=a}Pattern.prototype.toString=function(){var e=this.patterns.map(function(r){return toString(r)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")},Formatter.Pattern=Pattern,Formatter.Ahead=Ahead;var p_o=/^[[(]$/,p_e=/^[\])]$/,not_p=/[^()[\]]/,not_close=new Ahead(/[^)\]]/),glob=Symbol.for("*"),sexp_or_atom=new Pattern([p_o,glob,p_e],[not_p],"+"),sexp=new Pattern([p_o,glob,p_e],"+"),symbol=new Pattern([Symbol.for("symbol")],"?"),symbols=new Pattern([Symbol.for("symbol")],"*"),identifiers=[p_o,symbols,p_e],let_value=new Pattern([p_o,Symbol.for("symbol"),glob,p_e],"+"),def_lambda_re=keywords_re("define","lambda","define-macro","syntax-rules"),non_def=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/,let_re=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function keywords_re(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return new RegExp("^(?:#:)?(?:".concat(r.join("|"),")$"))}Formatter.rules=[[[sexp],0,not_close],[[p_o,keywords_re("begin","cond-expand")],1],[[p_o,let_re,symbol,p_o,let_value,p_e],1],[[p_o,let_re,symbol,sexp,sexp_or_atom],0,not_close],[[p_o,keywords_re("define-syntax"),/.+/],1],[[p_o,non_def,new Pattern([/[^()[\]]/],"+"),sexp],1,not_close],[[p_o,sexp],1,not_close],[[p_o,not_p,sexp],1,not_close],[[p_o,keywords_re("lambda","if"),not_p],1,not_close],[[p_o,keywords_re("while"),not_p,sexp],1,not_close],[[p_o,keywords_re("if"),not_p,glob],1],[[p_o,def_lambda_re,identifiers],1,not_close],[[p_o,def_lambda_re,identifiers,string_re],1,not_close],[[p_o,def_lambda_re,identifiers,string_re,sexp],1,not_close],[[p_o,def_lambda_re,identifiers,sexp],1,not_close]],Formatter.prototype.break=function(){for(var e=this.__code__.replace(/\n[ \t]*/g,`
 `),r=function(C){return C.token.match(string_re)||C.token.match(re_re)?C.token:C.token.replace(/\s+/," ")},t=tokenize(e,!0).map(r).filter(function(D){return D!==`
`}),a=Formatter.rules,n=1;n<t.length;++n)if(!!t[n].trim()){var o=t.slice(0,n),f={};a.map(function(D){return D[1]}).forEach(function(D){D=D.valueOf(),D>0&&!f[D]&&(f[D]=previousSexp(o,D))});var l=_createForOfIteratorHelper(a),h;try{for(l.s();!(h=l.n()).done;){var d=_slicedToArray(h.value,3),p=d[0],b=d[1],A=d[2];b=b.valueOf();var E=b>0?f[b]:o,F=match(p,E.filter(function(D){return D.trim()})),M=t.slice(n).find(function(D){return D.trim()});if(F&&(A instanceof Ahead&&A.match(M)||!A)){t[n-1].trim()?(t.splice(n,0,`
`),n++):t[n-1]=`
`;continue}}}catch(D){l.e(D)}finally{l.f()}}return this.__code__=t.join(""),this},Formatter.prototype._spaces=function(e){return new Array(e+1).join(" ")},Formatter.prototype.format=function(r){for(var t=this.__code__.replace(/[ \t]*\n[ \t]*/g,`
 `),a=tokenize(t,!0),n=this._options(r),o=0,f=0,l=0;l<a.length;++l){var h=a[l];if(h.token===`
`&&(o=this._indent(a.slice(0,l),n),f+=o,a[l+1])){a[l+1].token=this._spaces(o),o--,f--;for(var d=l+2;d<a.length;++d)if(a[d].offset+=f,a[d].col+=o,a[d].token===`
`){l=d-1;break}}}return a.map(function(p){if(p.token.match(string_re)&&p.token.match(/\n/)){var b=new Array(p.col+1).join(" "),A=p.token.split(`
`);p.token=[A[0]].concat(A.slice(1).map(function(E){return b+E})).join(`
`)}return p.token}).join("")};function flatten(e,r){var t=Object.prototype.toString,a="[object Array]",n=[],o=r&&e||e.slice(),f;if(!e.length)return n;f=o.pop();do t.call(f)===a?o.push.apply(o,f):n.push(f);while(o.length&&(f=o.pop())!==undefined$1);return n.reverse(),n}function Nil(){}Nil.prototype.toString=function(){return"()"},Nil.prototype.valueOf=function(){return undefined$1},Nil.prototype.serialize=function(){return 0},Nil.prototype.to_object=function(){return{}},Nil.prototype.append=function(e){return new Pair(e,_nil)},Nil.prototype.to_array=function(){return[]};var _nil=new Nil;function Pair(e,r){if(typeof this!="undefined"&&this.constructor!==Pair||typeof this=="undefined")return new Pair(e,r);this.car=e,this.cdr=r}function to_array(e,r){return function(a){if(typecheck(e,a,["pair","nil"]),a===_nil)return[];for(var n=[],o=a;;)if(o instanceof Pair){if(o.haveCycles("cdr"))break;var f=o.car;r&&f instanceof Pair&&(f=this.get(e).call(this,f)),n.push(f),o=o.cdr}else{if(o===_nil)break;throw new Error("".concat(e,": can't convert improper list"))}return n}}Pair.prototype.flatten=function(){return Pair.fromArray(flatten(this.to_array()))},Pair.prototype.length=function(){for(var e=0,r=this;!(!r||r===_nil||!(r instanceof Pair)||r.haveCycles("cdr"));)e++,r=r.cdr;return e},Pair.match=function(e,r){return e instanceof LSymbol?LSymbol.is(e,r):e instanceof Pair?Pair.match(e.car,r)||Pair.match(e.cdr,r):Array.isArray(e)?e.some(function(t){return Pair.match(t,r)}):is_plain_object(e)?Object.values(e).some(function(t){return Pair.match(t,r)}):!1},Pair.prototype.find=function(e){return Pair.match(this,e)},Pair.prototype.clone=function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:!0,r=new Map;function t(a){if(a instanceof Pair){if(r.has(a))return r.get(a);var n=new Pair;return r.set(a,n),e?n.car=t(a.car):n.car=a.car,n.cdr=t(a.cdr),n[__cycles__]=a[__cycles__],n}return a}return t(this)},Pair.prototype.last_pair=function(){for(var e=this;;){if(e.cdr===_nil)return e;e=e.cdr}},Pair.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:!0,r=[];return this.car instanceof Pair?e?r.push(this.car.to_array()):r.push(this.car):r.push(this.car.valueOf()),this.cdr instanceof Pair&&(r=r.concat(this.cdr.to_array())),r},Pair.fromArray=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:!1;if(e instanceof Pair||t&&e instanceof Array&&e[__data__])return e;if(r===!1){for(var a=_nil,n=e.length;n--;)a=new Pair(e[n],a);return a}e.length&&!(e instanceof Array)&&(e=_toConsumableArray(e));for(var o=_nil,f=e.length;f--;){var l=e[f];l instanceof Array?l=Pair.fromArray(l,r,t):typeof l=="string"?l=LString(l):typeof l=="number"&&!Number.isNaN(l)&&(l=LNumber(l)),o=new Pair(l,o)}return o},Pair.prototype.to_object=function(){for(var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:!1,r=this,t={};r instanceof Pair&&r.car instanceof Pair;){var a=r.car,n=a.car;n instanceof LSymbol&&(n=n.__name__),n instanceof LString&&(n=n.valueOf());var o=a.cdr;o instanceof Pair&&(o=o.to_object(e)),is_native(o)&&(e||(o=o.valueOf())),t[n]=o,r=r.cdr}return t},Pair.fromPairs=function(e){return e.reduce(function(r,t){return new Pair(new Pair(new LSymbol(t[0]),t[1]),r)},_nil)},Pair.fromObject=function(e){var r=Object.keys(e).map(function(t){return[t,e[t]]});return Pair.fromPairs(r)},Pair.prototype.reduce=function(e){for(var r=this,t=_nil;r!==_nil;)t=e(t,r.car),r=r.cdr;return t},Pair.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var e=this,r=_nil;e!==_nil;){var t=e.cdr;e.cdr=r,r=e,e=t}return r},Pair.prototype.transform=function(e){function r(t){if(t instanceof Pair){if(t.replace)return delete t.replace,t;var a=e(t.car);a instanceof Pair&&(a=r(a));var n=e(t.cdr);return n instanceof Pair&&(n=r(n)),new Pair(a,n)}return t}return r(this)},Pair.prototype.map=function(e){return typeof this.car!="undefined"?new Pair(e(this.car),this.cdr===_nil?_nil:this.cdr.map(e)):_nil};var repr=new Map;function is_plain_object(e){return e&&_typeof(e)==="object"&&e.constructor===Object}var props=Object.getOwnPropertyNames(Array.prototype),array_methods=[];props.forEach(function(e){array_methods.push(Array[e],Array.prototype[e])});function is_array_method(e){return e=unbind(e),array_methods.includes(e)}function is_lips_function(e){return is_function(e)&&(is_lambda(e)||e.__doc__)}function user_repr(e){var r=e.constructor||Object,t=is_plain_object(e),a=is_function(e[Symbol.asyncIterator])||is_function(e[Symbol.iterator]),n;return repr.has(r)?n=repr.get(r):repr.forEach(function(o,f){f=unbind(f),e.constructor===f&&(f===Object&&t&&!a||f!==Object)&&(n=o)}),n}var str_mapping=new Map;[[!0,"#t"],[!1,"#f"],[null,"null"],[undefined$1,"#<undefined>"]].forEach(function(e){var r=_slicedToArray(e,2),t=r[0],a=r[1];str_mapping.set(t,a)});function symbolize(e){if(e&&_typeof(e)==="object"){var r={},t=Object.getOwnPropertySymbols(e);t.forEach(function(n){var o=n.toString().replace(/Symbol\(([^)]+)\)/,"$1");r[o]=toString(e[n])});var a=Object.getOwnPropertyNames(e);return a.forEach(function(n){var o=e[n];o&&_typeof(o)==="object"&&o.constructor===Object?r[n]=symbolize(o):r[n]=toString(o)}),r}return e}function get_props(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function has_own_function(e,r){return e.hasOwnProperty(r)&&is_function(e.toString)}function function_to_string(e){if(is_native_function(e))return"#<procedure(native)>";var r=e.prototype&&e.prototype.constructor;if(is_function(r)&&is_lambda(r)&&e[__class__]&&r.hasOwnProperty("__name__")){var t=r.__name__;return LString.isString(t)?(t=t.toString(),"#<class:".concat(t,">")):"#<class>"}if(e.hasOwnProperty("__name__")){var a=e.__name__;if(_typeof(a)==="symbol"&&(a=symbol_to_string(a)),typeof a=="string")return"#<procedure:".concat(a,">")}return has_own_function(e,"toString")?e.toString():e.name&&!is_lambda(e)?"#<procedure:".concat(e.name.trim(),">"):"#<procedure>"}var instances=new Map;[[Error,function(e){return e.message}],[Pair,function(e,r){var t=r.quote,a=r.skip_cycles,n=r.pair_args;return a||e.markCycles(),e.toString.apply(e,[t].concat(_toConsumableArray(n)))}],[LCharacter,function(e,r){var t=r.quote;return t?e.toString():e.valueOf()}],[LString,function(e,r){var t=r.quote;return e=e.toString(),t?JSON.stringify(e).replace(/\\n/g,`
`):e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var r=_slicedToArray(e,2),t=r[0],a=r[1];instances.set(t,a)});var native_types=[LSymbol,LNumber,Macro,Values,InputPort,OutputPort,Environment,QuotedPromise];function toString(e,r,t){if(typeof jQuery!="undefined"&&e instanceof jQuery.fn.init)return"#<jQuery("+e.length+")>";if(str_mapping.has(e))return str_mapping.get(e);if(e){var a=e.constructor;if(instances.has(a)){for(var n=arguments.length,o=new Array(n>3?n-3:0),f=3;f<n;f++)o[f-3]=arguments[f];return instances.get(a)(e,{quote:r,skip_cycles:t,pair_args:o})}}var l=_createForOfIteratorHelper(native_types),h;try{for(l.s();!(h=l.n()).done;){var d=h.value;if(e instanceof d)return e.toString(r)}}catch(E){l.e(E)}finally{l.f()}if([_nil,eof].includes(e))return e.toString();if(is_function(e))return function_to_string(e);if(e===root)return"#<js:global>";if(e===null)return"null";if(_typeof(e)==="object"){var p=e.constructor;p||(p=Object);var b;if(typeof p.__class__=="string")b=p.__class__;else{if(is_prototype(e))return"#<prototype>";var A=user_repr(e);if(A){if(is_function(A))return A(e,r);throw new Error("toString: Invalid repr value")}b=p.name}return is_function(e.toString)&&is_lambda(e.toString)?e.toString().valueOf():(type(e)==="instance"&&(is_lambda(p)&&p.__name__?b=p.__name__.valueOf():is_native_function(p)||(b="instance")),is_iterator(e,Symbol.iterator)?b?"#<iterator(".concat(b,")>"):"#<iterator>":is_iterator(e,Symbol.asyncIterator)?b?"#<asyncIterator(".concat(b,")>"):"#<asyncIterator>":b!==""?"#<"+b+">":"#<Object>")}return typeof e!="string"?e.toString():e}function is_prototype(e){return e&&_typeof(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor=="function"&&e.constructor.prototype===e}Pair.prototype.markCycles=function(){return markCycles(this),this},Pair.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return e?!!(this[__cycles__]&&this[__cycles__][e]):this.haveCycles("car")||this.haveCycles("cdr")};function markCycles(e){var r=[],t=[],a=[];function n(d){r.includes(d)||r.push(d)}function o(d,p,b,A){if(b instanceof Pair&&A.includes(b))return a.includes(b)||a.push(b),d[__cycles__]||(d[__cycles__]={}),d[__cycles__][p]=b,t.includes(d)||t.push(d),!0}var f=trampoline(function d(p,b){if(p instanceof Pair){delete p.ref,delete p[__cycles__],n(p),b.push(p);var A=o(p,"car",p.car,b),E=o(p,"cdr",p.cdr,b);if(A||f(p.car,b.slice()),!E)return new Thunk(function(){return d(p.cdr,b.slice())})}});function l(d,p){if(d[__cycles__][p]instanceof Pair){var b=h.indexOf(d[__cycles__][p]);d[__cycles__][p]="#".concat(b,"#")}}f(e,[]);var h=r.filter(function(d){return a.includes(d)});h.forEach(function(d,p){d[__ref__]="#".concat(p,"=")}),t.forEach(function(d){l(d,"car"),l(d,"cdr")})}Pair.prototype.toString=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.nested,a=t===void 0?!1:t,n=[];this[__ref__]?n.push(this[__ref__]+"("):a||n.push("(");var o;if(this[__cycles__]&&this[__cycles__].car?o=this[__cycles__].car:o=toString(this.car,e,!0),o!==undefined$1&&n.push(o),this.cdr instanceof Pair)if(this[__cycles__]&&this[__cycles__].cdr)n.push(" . "),n.push(this[__cycles__].cdr);else{this.cdr[__ref__]?n.push(" . "):n.push(" ");var f=this.cdr.toString(e,{nested:!0});n.push(f)}else this.cdr!==_nil&&(n=n.concat([" . ",toString(this.cdr,e,!0)]));return(!a||this[__ref__])&&n.push(")"),n.join("")},Pair.prototype.set=function(e,r){this[e]=r,r instanceof Pair&&this.markCycles()},Pair.prototype.append=function(e){if(e instanceof Array)return this.append(Pair.fromArray(e));var r=this;if(r.car===undefined$1)e instanceof Pair?(this.car=e.car,this.cdr=e.cdr):this.car=e;else if(e!==_nil){for(;r instanceof Pair&&r.cdr!==_nil;)r=r.cdr;r.cdr=e}return this},Pair.prototype.serialize=function(){return[this.car,this.cdr]};function abs(e){return e<0?-e:e}function seq_compare(e,r){for(var t=_toArray(r),a=t[0],n=t.slice(1);n.length>0;){var o=n,f=_slicedToArray(o,1),l=f[0];if(!e(a,l))return!1;var h=n,d=_toArray(h);a=d[0],n=d.slice(1)}return!0}function equal(e,r){if(is_function(e))return is_function(r)&&unbind(e)===unbind(r);if(e instanceof LNumber){if(!(r instanceof LNumber))return!1;var t;return e.__type__===r.__type__&&(e.__type__==="complex"?t=e.__im__.__type__===r.__im__.__type__&&e.__re__.__type__===r.__re__.__type__:t=!0,t&&e.cmp(r)===0)?e.valueOf()===0?Object.is(e.valueOf(),r.valueOf()):!0:!1}else return typeof e=="number"?typeof r!="number"?!1:Number.isNaN(e)?Number.isNaN(r):e===Number.NEGATIVE_INFINITY?r===Number.NEGATIVE_INFINITY:e===Number.POSITIVE_INFINITY?r===Number.POSITIVE_INFINITY:equal(LNumber(e),LNumber(r)):e instanceof LCharacter?r instanceof LCharacter?e.__char__===r.__char__:!1:e===r}function same_atom(e,r){return type(e)!==type(r)||!is_atom(e)?!1:e instanceof RegExp?e.source===r.source:e instanceof LString?e.valueOf()===r.valueOf():equal(e,r)}function is_atom(e){return e instanceof LSymbol||LString.isString(e)||e===_nil||e===null||e instanceof LCharacter||e instanceof LNumber||e===!0||e===!1}var truncate=function(){return Math.trunc?Math.trunc:function(e){return e===0?0:e<0?Math.ceil(e):Math.floor(e)}}();function Macro(e,r,t,a){if(typeof this!="undefined"&&this.constructor!==Macro||typeof this=="undefined")return new Macro(e,r);typecheck("Macro",e,"string",1),typecheck("Macro",r,"function",2),t&&(a?this.__doc__=t:this.__doc__=trim_lines(t)),this.__name__=e,this.__fn__=r}Macro.defmacro=function(e,r,t,a){var n=new Macro(e,r,t,a);return n.__defmacro__=!0,n},Macro.prototype.invoke=function(e,r,t){var a=r.env,n=r.dynamic_scope,o=r.error,f={dynamic_scope:n,error:o,macro_expand:t},l=this.__fn__.call(a,e,f,this.__name__);return l},Macro.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var macro="define-macro",recur_guard=-1e4;function macro_expand(e){return function(){var r=_asyncToGenerator(regenerator.mark(function t(a,n){var o,f,l,h,d,p,b,A,E,F,M,D,C,P,O;return regenerator.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(O=function(){return O=_asyncToGenerator(regenerator.mark(function q(N,G,H){var V,j,L,u,c,m,v,_,g,x,y,s,w;return regenerator.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(N instanceof Pair&&N.car instanceof LSymbol)){S.next=50;break}if(!N[__data__]){S.next=3;break}return S.abrupt("return",N);case 3:if(V=N.car.valueOf(),j=H.get(N.car,{throwError:!1}),L=p(N.car),u=L||b(j,N)||A(j),!(u&&N.cdr.car instanceof Pair)){S.next=28;break}if(!L){S.next=15;break}return f=F(N.cdr.car),S.next=12,D(N.cdr.car,G);case 12:c=S.sent,S.next=17;break;case 15:f=E(N.cdr.car),c=N.cdr.car;case 17:return S.t0=Pair,S.t1=N.car,S.t2=Pair,S.t3=c,S.next=23,P(N.cdr.cdr,G,H);case 23:return S.t4=S.sent,S.t5=new S.t2(S.t3,S.t4),S.abrupt("return",new S.t0(S.t1,S.t5));case 28:if(!M(V,j)){S.next=50;break}return m=j instanceof Syntax?N:N.cdr,S.next=32,j.invoke(m,_objectSpread(_objectSpread({},n),{},{env:H}),!0);case 32:if(v=S.sent,!(j instanceof Syntax)){S.next=41;break}if(_=v,g=_.expr,x=_.scope,!(g instanceof Pair)){S.next=40;break}if(!(G!==-1&&G<=1||G<recur_guard)){S.next=38;break}return S.abrupt("return",g);case 38:return G!==-1&&(G=G-1),S.abrupt("return",P(g,G,x));case 40:v=g;case 41:if(!(v instanceof LSymbol)){S.next=43;break}return S.abrupt("return",quote(v));case 43:if(!(v instanceof Pair)){S.next=48;break}if(!(G!==-1&&G<=1||G<recur_guard)){S.next=46;break}return S.abrupt("return",v);case 46:return G!==-1&&(G=G-1),S.abrupt("return",P(v,G,H));case 48:if(!is_atom(v)){S.next=50;break}return S.abrupt("return",v);case 50:if(y=N.car,!(y instanceof Pair)){S.next=55;break}return S.next=54,P(y,G,H);case 54:y=S.sent;case 55:if(s=N.cdr,!(s instanceof Pair)){S.next=60;break}return S.next=59,P(s,G,H);case 59:s=S.sent;case 60:return w=new Pair(y,s),S.abrupt("return",w);case 62:case"end":return S.stop()}},q)})),O.apply(this,arguments)},P=function(q,N,G){return O.apply(this,arguments)},C=function(){return C=_asyncToGenerator(regenerator.mark(function q(N,G){var H;return regenerator.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(N!==_nil){j.next=2;break}return j.abrupt("return",_nil);case 2:return H=N.car,j.t0=Pair,j.t1=Pair,j.t2=H.car,j.next=8,P(H.cdr,G,o);case 8:return j.t3=j.sent,j.t4=new j.t1(j.t2,j.t3),j.next=12,D(N.cdr);case 12:return j.t5=j.sent,j.abrupt("return",new j.t0(j.t4,j.t5));case 14:case"end":return j.stop()}},q)})),C.apply(this,arguments)},D=function(q,N){return C.apply(this,arguments)},M=function(q,N){return N instanceof Macro&&N.__defmacro__&&!f.includes(q)},F=function(q){return[].concat(_toConsumableArray(f),_toConsumableArray(q.to_array(!1).map(function(N){if(N instanceof Pair)return N.car.valueOf();throw new Error("macroexpand: Invalid let binding")})))},E=function(q){for(var N=[];q!==_nil;){if(q instanceof LSymbol){N.push(q.valueOf());break}N.push(q.car.valueOf()),q=q.cdr}return[].concat(_toConsumableArray(f),N)},A=function(q){return q===h},b=function(q,N){return q===d&&N.cdr.car instanceof Pair},p=function(q){var N=q.valueOf();return l.includes(N)},o=n.env=this,f=[],l=["let","let*","letrec"],h=global_env.get("lambda"),d=global_env.get("define"),!(a.cdr instanceof Pair&&LNumber.isNumber(a.cdr.car))){B.next=21;break}return B.t0=quote,B.next=19,P(a,a.cdr.car.valueOf(),o);case 19:return B.t1=B.sent.car,B.abrupt("return",(0,B.t0)(B.t1));case 21:if(!e){B.next=27;break}return B.t2=quote,B.next=25,P(a,1,o);case 25:return B.t3=B.sent.car,B.abrupt("return",(0,B.t2)(B.t3));case 27:return B.t4=quote,B.next=30,P(a,-1,o);case 30:return B.t5=B.sent.car,B.abrupt("return",(0,B.t4)(B.t5));case 32:case"end":return B.stop()}},t,this)}));return function(t,a){return r.apply(this,arguments)}}()}function Syntax(e,r){this.__env__=r,this.__fn__=e,this.__defmacro__=!0}Syntax.__merge_env__=Symbol.for("merge"),Syntax.prototype=Object.create(Macro.prototype),Syntax.prototype.invoke=function(e,r,t){var a=r.error,n=r.env,o={error:a,env:n,dynamic_scope:this.__env__,macro_expand:t};return this.__fn__.call(n,e,o,this.__name__||"syntax")},Syntax.prototype.constructor=Syntax,Syntax.prototype.toString=function(){return this.__name__?"#<syntax:".concat(this.__name__,">"):"#<syntax>"},Syntax.className="syntax";function extract_patterns(e,r,t,a){var n=arguments.length>4&&arguments[4]!==undefined$1?arguments[4]:{},o={"...":{symbols:{},lists:[]},symbols:{}},f=n.expansion,l=n.define;function h(p){is_debug()&&console.log(p)}h(t);function d(p,b){var A=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:[],E=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:!1;if(h({code:b&&toString(b,!0),pattern:p&&toString(p,!0)}),is_atom(p)&&!(p instanceof LSymbol))return same_atom(p,b);if(p instanceof LSymbol&&t.includes(p.valueOf())){var F=f.ref(b);return LSymbol.is(b,p)?typeof F=="undefined"?!0:F===l||F===global_env:!1}if(p instanceof Pair&&p.car instanceof Pair&&p.car.cdr instanceof Pair&&LSymbol.is(p.car.cdr.car,a)&&(h(">> 0"),b===_nil&&(h({pattern:p.toString()}),p.car.car instanceof LSymbol))){if(p.car.cdr instanceof Pair&&LSymbol.is(p.car.cdr.car,a)){var M=p.car.car.valueOf(),D=p.last_pair();return LSymbol.is(D.car,a)?(o["..."].symbols[M]=null,!0):!1}var C=p.car.car.valueOf();if(o["..."].symbols[C])throw new Error("syntax: named ellipsis can only appear onces");o["..."].symbols[C]=b}if(p instanceof Pair&&p.cdr instanceof Pair&&LSymbol.is(p.cdr.car,a)){if(p.cdr.cdr!==_nil&&p.cdr.cdr instanceof Pair){for(var P=p.cdr.cdr.length(),O=b.length(),k=b;O-1>P;)k=k.cdr,O--;var B=k.cdr;if(k.cdr=_nil,!d(p.cdr.cdr,B,A,E))return!1}if(p.car instanceof LSymbol){var T=p.car.__name__;if(o["..."].symbols[T]&&!A.includes(T)&&!E)throw new Error("syntax: named ellipsis can only appear onces");if(h(">> 1"),b===_nil)h(">> 2"),E?(h("NIL"),o["..."].symbols[T]=_nil):(h("NULL"),o["..."].symbols[T]=null);else if(b instanceof Pair&&(b.car instanceof Pair||b.car===_nil))if(h(">> 3 "+E),E)if(o["..."].symbols[T]){var q=o["..."].symbols[T];q===_nil?q=new Pair(_nil,new Pair(b,_nil)):q=q.append(new Pair(b,_nil)),o["..."].symbols[T]=q}else o["..."].symbols[T]=new Pair(b,_nil);else h(">> 4"),o["..."].symbols[T]=new Pair(b,_nil);else if(h(">> 6"),b instanceof Pair){if(h(">> 7 "+E),A.push(T),!o["..."].symbols[T])o["..."].symbols[T]=new Pair(b,_nil);else{var N=o["..."].symbols[T];o["..."].symbols[T]=N.append(new Pair(b,_nil))}h({IIIIII:o["..."].symbols[T].toString()})}else return h(">> 8"),!1;return!0}else if(p.car instanceof Pair){var G=_toConsumableArray(A);if(b===_nil)return h(">> 9"),o["..."].lists.push(_nil),!0;h(">> 10");for(var H=b;H instanceof Pair;){if(!d(p.car,H.car,G,!0))return!1;H=H.cdr}return!0}return!1}if(p instanceof LSymbol){if(LSymbol.is(p,a))throw new Error("syntax: invalid usage of ellipsis");h(">> 11");var V=p.__name__;return t.includes(V)||(h({name:V,ellipsis:E}),E&&(o["..."].symbols[V]=o["..."].symbols[V]||[],o["..."].symbols[V].push(b)),o.symbols[V]=b,!o.symbols[V]),!0}if(p instanceof Pair&&b instanceof Pair){if(h(">> 12"),h({a:12,code:b&&b.toString(),pattern:p.toString()}),b.cdr===_nil){var j=p.car instanceof LSymbol&&p.cdr instanceof LSymbol;if(j){if(!d(p.car,b.car,A,E))return!1;h(">> 12 | 1");var L=p.cdr.valueOf();return L in o.symbols||(o.symbols[L]=_nil),L=p.car.valueOf(),L in o.symbols||(o.symbols[L]=b.car),!0}}if(h({pattern:p.toString(),code:b.toString()}),p.cdr instanceof Pair&&p.car instanceof LSymbol&&p.cdr.cdr instanceof Pair&&p.cdr.car instanceof LSymbol&&LSymbol.is(p.cdr.cdr.car,a)&&p.cdr.cdr.cdr instanceof Pair&&!LSymbol.is(p.cdr.cdr.cdr.car,a)&&d(p.car,b.car,A,E)&&d(p.cdr.cdr.cdr,b.cdr,A,E)){var u=p.cdr.car.__name__;return h({pattern:p.car.toString(),code:b.car.toString(),name:u}),t.includes(u)||(o["..."].symbols[u]=null),!0}if(h("recur"),d(p.car,b.car,A,E)&&d(p.cdr,b.cdr,A,E))return!0}else{if(p===_nil&&(b===_nil||b===undefined$1))return!0;if(p.car instanceof Pair&&LSymbol.is(p.car.car,a))throw new Error("syntax: invalid usage of ellipsis");return!1}}if(d(e,r))return o}function clear_gensyms(e,r){function t(a){if(a instanceof Pair){if(!r.length)return a;var n=t(a.car),o=t(a.cdr);return new Pair(n,o)}else if(a instanceof LSymbol){var f=r.find(function(l){return l.gensym===a});return f?LSymbol(f.name):a}else return a}return t(e)}function transform_syntax(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:{},r=e.bindings,t=e.expr,a=e.scope,n=e.symbols,o=e.names,f=e.ellipsis,l={};function h(D){return D instanceof LSymbol?!0:["string","symbol"].includes(_typeof(D))}function d(D){if(!h(D)){var C=type(D);throw new Error("syntax: internal error, need symbol got ".concat(C))}var P=D.valueOf();if(P===f)throw new Error("syntax: internal error, ellipis not transformed");var O=_typeof(P);if(["string","symbol"].includes(O)){if(P in r.symbols)return r.symbols[P];if(O==="string"&&P.match(/\./)){var k=P.split("."),B=k[0];if(B in r.symbols)return Pair.fromArray([LSymbol("."),r.symbols[B]].concat(k.slice(1).map(function(T){return LString(T)})))}}return n.includes(P)?LSymbol(P):b(P)}function p(D){is_debug()&&console.log(D)}function b(D){if(!l[D]){var C=a.ref(D),P=gensym(D);if(C){var O=a.get(D);a.set(P,O)}else{var k=a.get(D,{throwError:!1});typeof k!="undefined"&&a.set(P,k)}o.push({name:D,gensym:P}),l[D]=P}return l[D]}function A(D,C,P){var O=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:function(){},k=P.nested;if(p(" ==> "+D.toString(!0)),p(C),D instanceof LSymbol){var B=D.valueOf();if(p("[t 1"),C[B]){if(C[B]instanceof Pair){var T=C[B],q=T.car,N=T.cdr;if(k){var G=q.car,H=q.cdr;return H!==_nil&&O(B,new Pair(H,_nil)),G}return N!==_nil&&O(B,N),q}else if(C[B]instanceof Array)return O(B,C[B].slice(1)),C[B][0]}return d(B)}if(D instanceof Pair){if(D.car instanceof LSymbol&&D.cdr instanceof Pair&&LSymbol.is(D.cdr.car,f)){p("[t 2");var V=D.car.valueOf(),j=C[V];if(p({expr:D.toString(!0),name:V,bindings:C,item:j}),j===null)return;if(j)if(p({b:C[V].toString()}),j instanceof Pair){p("[t 2 Pair "+k),p({______:j.toString()});var L=j.car,u=j.cdr;return k?(u!==_nil&&(p("|| next 1"),O(V,u)),p({car:L.toString()}),L):(L.cdr!==_nil&&(p("|| next 2"),O(V,new Pair(L.cdr,u))),p({car:L.car.toString()}),L.car)}else if(j instanceof Array){if(p("[t 2 Array "+k),k)return O(V,j.slice(1)),Pair.fromArray(j);var c=j.slice(1);return c.length&&O(V,c),j[0]}else return j}p("[t 3 recur "+D.toString());var m=A(D.car,C,P,O),v=A(D.cdr,C,P,O);return new Pair(m,v)}return D}function E(D,C){var P=Object.values(D),O=Object.getOwnPropertySymbols(D);return O.length&&P.push.apply(P,_toConsumableArray(O.map(function(k){return D[k]}))),P.length&&P.every(function(k){return k===null?!C:k instanceof Pair||k===_nil||k instanceof Array&&k.length})}function F(D){return Object.keys(D).concat(Object.getOwnPropertySymbols(D))}function M(D){var C=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},P=C.disabled;if(p("traverse>> "+D.toString()),D instanceof Pair){if(!P&&D.car instanceof Pair&&LSymbol.is(D.car.car,f))return M(D.car.cdr,{disabled:!0});if(D.cdr instanceof Pair&&LSymbol.is(D.cdr.car,f)&&!P){p(">> 1");var O=r["..."].symbols,k=Object.values(O);if(k.length&&k.every(function(R){return R===null}))return M(D.cdr.cdr,{disabled:P});var B=F(O),T=D.car instanceof LSymbol&&LSymbol.is(D.cdr.cdr.car,f);if(D.car instanceof Pair||T){if(r["..."].lists[0]===_nil)return _nil;var q=D.car;T&&(q=new Pair(D.car,new Pair(D.cdr.car,_nil))),p(">> 2");var N;if(B.length){p(">> 2 (a)");var G=_objectSpread({},O);N=_nil;for(var H=function(){if(!E(G))return"break";var $={},U=function(Z,Y){$[Z]=Y},z=A(q,G,{nested:!0},U);z!==undefined$1&&(T?N===_nil?N=z:N=N.append(z):N=new Pair(z,N)),G=$};;){var V=H();if(V==="break")break}if(N!==_nil&&!T&&(N=N.reverse()),D.cdr.cdr!==_nil&&!LSymbol.is(D.cdr.cdr.car,f)){var j=M(D.cdr.cdr,{disabled:P});return N.append(j)}return N}else{p(">> 3");var L=A(D.car,O,{nested:!0});return L?new Pair(L,_nil):_nil}}else if(D.car instanceof LSymbol){p(">> 4"),LSymbol.is(D.cdr.cdr.car,f)?p(">> 4 (a)"):p(">> 4 (b)");for(var u=D.car.__name__,c=_defineProperty({},u,O[u]),m=O[u]===null,v=_nil,_=function(){if(!E(c,!0))return p({bind:c}),"break";var $={},U=function(Z,Y){$[Z]=Y},z=A(D,c,{nested:!1},U);p({value:z.toString()}),typeof z!="undefined"&&(v=new Pair(z,v)),c=$};;){var g=_();if(g==="break")break}if(v!==_nil&&(v=v.reverse()),D.cdr instanceof Pair&&(D.cdr.cdr instanceof Pair||D.cdr.cdr instanceof LSymbol)){var x=M(D.cdr.cdr,{disabled:P});if(m)return x;p("<<<< 1"),v.append(x)}return p("<<<< 2"),v}}var y=M(D.car,{disabled:P}),s,w;if(D.car instanceof LSymbol){var I=a.get(D.car,{throwError:!1});w=I instanceof Macro&&I.__name__==="syntax-rules"}return w?D.cdr.car instanceof LSymbol?s=new Pair(M(D.cdr.car,{disabled:P}),new Pair(D.cdr.cdr.car,M(D.cdr.cdr.cdr,{disabled:P}))):s=new Pair(D.cdr.car,M(D.cdr.cdr,{disabled:P})):s=M(D.cdr,{disabled:P}),p({a:!0,car:toString(D.car),cdr:toString(D.cdr),head:toString(y),rest:toString(s)}),new Pair(y,s)}if(D instanceof LSymbol){if(P&&LSymbol.is(D,f))return D;var S=d(D);if(typeof S!="undefined")return S}return D}return M(t,{})}function is_null(e){return is_undef(e)||e===_nil||e===null}function is_function(e){return typeof e=="function"&&typeof e.bind=="function"}function is_promise(e){return e instanceof QuotedPromise?!1:e instanceof Promise?!0:e&&is_function(e.then)}function is_undef(e){return typeof e=="undefined"}function box(e){switch(_typeof(e)){case"string":return LString(e);case"number":if(!Number.isNaN(e))return LNumber(e)}return e}function map_object(e,r){var t=Object.getOwnPropertyNames(e),a=Object.getOwnPropertySymbols(e);return t.concat(a).forEach(function(n){var o=r(e[n]),f=Object.getOwnPropertyDescriptor(e,n);(!f||f.writable&&e[n]!==o)&&(e[n]=o)}),e}function unbox(e){var r=[LString,LCharacter,LNumber].some(function(t){return e instanceof t});return r?e.valueOf():e instanceof Array?e.map(unbox):(e instanceof QuotedPromise&&delete e.then,is_plain_object(e)?map_object(e,unbox):e)}function patch_value(e,r){return e instanceof Pair?(e.markCycles(),quote(e)):is_function(e)&&r?bind(e,r):box(e)}function unbind(e){return is_bound(e)?e[__fn__]:e}function bind(e,r){if(e[Symbol.for("__bound__")])return e;var t=e.bind(r),a=Object.getOwnPropertyNames(e),n=_createForOfIteratorHelper(a),o;try{for(n.s();!(o=n.n()).done;){var f=o.value;if(filter_fn_names(f))try{t[f]=e[f]}catch(l){}}}catch(l){n.e(l)}finally{n.f()}return hidden_prop(t,"__fn__",e),hidden_prop(t,"__context__",r),hidden_prop(t,"__bound__",!0),is_native_function(e)&&hidden_prop(t,"__native__",!0),is_plain_object(r)&&is_lambda(e)&&hidden_prop(t,"__method__",!0),t.valueOf=function(){return e},t}function is_object_bound(e){return is_bound(e)&&e[Symbol.for("__context__")]===Object}function is_bound(e){return!!(is_function(e)&&e[__fn__])}function lips_context(e){if(is_function(e)){var r=e[__context__];if(r&&(r===lips||r.constructor&&r.constructor.__class__))return!0}return!1}function is_port(e){return e instanceof InputPort||e instanceof OutputPort}function is_port_method(e){return!!(is_function(e)&&is_port(e[__context__]))}var __context__=Symbol.for("__context__"),__fn__=Symbol.for("__fn__"),__data__=Symbol.for("__data__"),__ref__=Symbol.for("__ref__"),__cycles__=Symbol.for("__cycles__"),__class__=Symbol.for("__class__"),__method__=Symbol.for("__method__"),__prototype__=Symbol.for("__prototype__"),__lambda__=Symbol.for("__lambda__"),exluded_names=["name","length","caller","callee","arguments","prototype"];function filter_fn_names(e){return!exluded_names.includes(e)}function hidden_prop(e,r,t){Object.defineProperty(e,Symbol.for(r),{get:function(){return t},set:function(){},configurable:!1,enumerable:!1})}function set_fn_length(e,r){try{return Object.defineProperty(e,"length",{get:function(){return r}}),e}catch(n){var t=new Array(r).fill(0).map(function(o,f){return"a"+f}).join(","),a=new Function("f","return function(".concat(t,`) {
                return f.apply(this, arguments);
            };`));return a(e)}}function is_lambda(e){return e&&e[__lambda__]}function is_method(e){return e&&e[__method__]}function is_raw_lambda(e){return is_lambda(e)&&!e[__prototype__]&&!is_method(e)&&!is_port_method(e)}function is_native_function(e){var r=Symbol.for("__native__");return is_function(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[r]===!0||!e.name.match(/^bound /)&&!e[r])}function let_macro(e){var r;switch(e){case Symbol.for("letrec"):r="letrec";break;case Symbol.for("let"):r="let";break;case Symbol.for("let*"):r="let*";break;default:throw new Error("Invalid let_macro value")}return Macro.defmacro(r,function(t,a){var n=a.dynamic_scope,o=a.error,f=a.macro_expand,l;if(t.car instanceof LSymbol){if(!(t.cdr.car instanceof Pair||t.cdr.car===_nil))throw new Error("let require list of pairs");var h;return t.cdr.car===_nil?(l=_nil,h=_nil):(h=t.cdr.car.map(function(M){return M.car}),l=t.cdr.car.map(function(M){return M.cdr.car})),Pair.fromArray([LSymbol("letrec"),[[t.car,Pair(LSymbol("lambda"),Pair(h,t.cdr.cdr))]],Pair(t.car,l)])}else if(f)return;var d=this;l=global_env.get("list->array")(t.car);var p=d.inherit(r),b,A;r==="let*"?A=p:r==="let"&&(b=[]);var E=0;function F(){var M=new Pair(new LSymbol("begin"),t.cdr);return _evaluate(M,{env:p,dynamic_scope:n,error:o})}return function M(){var D=l[E++];if(n&&(n=r==="let*"?p:d),D){r==="let"?A=d:r==="letrec"&&(A=p);var N=_evaluate(D.cdr.car,{env:A,dynamic_scope:n,error:o});return r==="let*"&&(A=p=A.inherit("let*["+E+"]")),b?(b.push({name:D.car,value:N}),M()):unpromise(N,function(G){return p.set(D.car,G),M()})}else{if(b&&b.length){var C=b.map(function(G){return G.value}),P=C.filter(is_promise);if(P.length)return promise_all(C).then(function(G){for(var H=0,V=G.length;H<V;++H)p.set(b[H].name,G[H])}).then(F);var O=_createForOfIteratorHelper(b),k;try{for(O.s();!(k=O.n()).done;){var B=k.value,T=B.name,q=B.value;p.set(T,q)}}catch(G){O.e(G)}finally{O.f()}}return F()}}()})}function pararel(e,r){return new Macro(e,function(t){var a=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},n=a.dynamic_scope,o=a.error,f=this;n&&(n=this);for(var l=t,h=[];l instanceof Pair;)h.push(_evaluate(l.car,{env:f,dynamic_scope:n,error:o})),l=l.cdr;var d=h.filter(is_promise).length;return d?promise_all(h).then(r.bind(this)):r.call(this,h)})}function guard_math_call(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];return t.forEach(function(n){typecheck("",n,"number")}),e.apply(void 0,t)}function pipe(){for(var e=this,r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(n,o){typecheck("pipe",n,"function",o+1)}),function(){for(var n=arguments.length,o=new Array(n),f=0;f<n;f++)o[f]=arguments[f];return t.reduce(function(l,h){return[h.apply(e,l)]},o)[0]}}function compose(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.forEach(function(a,n){typecheck("compose",a,"function",n+1)}),pipe.apply(void 0,_toConsumableArray(r.reverse()))}function fold(e,r){var t=this;return function a(n,o){typecheck(e,n,"function");for(var f=arguments.length,l=new Array(f>2?f-2:0),h=2;h<f;h++)l[h-2]=arguments[h];return l.some(is_null)?typeof o=="number"?LNumber(o):o:r.call.apply(r,[t,a,n,o].concat(l))}}function limit_math_op(e,r){return limit(e+1,curry(guard_math_call,r))}var single_math_op=curry(limit_math_op,1),binary_math_op=curry(limit_math_op,2);function reduce_math_op(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:null;return function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r!==null&&(a=[r].concat(_toConsumableArray(a))),a.reduce(binary_math_op(e))}}function curry(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];typecheck("curry",e,"function");var n=e.length;return function(){var o=t.slice();function f(){for(var l=arguments.length,h=new Array(l),d=0;d<l;d++)h[d]=arguments[d];return o=o.concat(h),o.length>=n?e.apply(this,o):f}return f.apply(this,arguments)}}function limit(e,r){return typecheck("limit",r,"function",2),function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r.apply(void 0,_toConsumableArray(a.slice(0,e)))}}function LCharacter(e){if(typeof this!="undefined"&&!(this instanceof LCharacter)||typeof this=="undefined")return new LCharacter(e);e instanceof LString&&(e=e.valueOf());var r;if(Array.from(e).length>1)if(e=e.toLowerCase(),LCharacter.__names__[e])r=e,e=LCharacter.__names__[e];else throw new Error("Internal: Unknown named character");else r=LCharacter.__rev_names__[e];Object.defineProperty(this,"__char__",{value:e,enumerable:!0}),r&&Object.defineProperty(this,"__name__",{value:r,enumerable:!0})}LCharacter.__names__=characters,LCharacter.__rev_names__={},Object.keys(LCharacter.__names__).forEach(function(e){var r=LCharacter.__names__[e];LCharacter.__rev_names__[r]=e}),LCharacter.prototype.toUpperCase=function(){return LCharacter(this.__char__.toUpperCase())},LCharacter.prototype.toLowerCase=function(){return LCharacter(this.__char__.toLowerCase())},LCharacter.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)},LCharacter.prototype.valueOf=LCharacter.prototype.serialize=function(){return this.__char__};function LString(e){if(typeof this!="undefined"&&!(this instanceof LString)||typeof this=="undefined")return new LString(e);e instanceof Array?this.__string__=e.map(function(r,t){return typecheck("LString",r,"character",t+1),r.toString()}).join(""):this.__string__=e.valueOf()}{var ignore=["length","constructor"],_keys=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!ignore.includes(e)}),wrap=function(r){return function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r.apply(this.__string__,a)}},_iterator11=_createForOfIteratorHelper(_keys),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var key=_step11.value;LString.prototype[key]=wrap(String.prototype[key])}}catch(e){_iterator11.e(e)}finally{_iterator11.f()}}LString.prototype.serialize=function(){return this.valueOf()},LString.isString=function(e){return e instanceof LString||typeof e=="string"},LString.prototype.get=function(e){return typecheck("LString::get",e,"number"),Array.from(this.__string__)[e.valueOf()]},LString.prototype.cmp=function(e){typecheck("LString::cmp",e,"string");var r=this.valueOf(),t=e.valueOf();return r<t?-1:r===t?0:1},LString.prototype.lower=function(){return LString(this.__string__.toLowerCase())},LString.prototype.upper=function(){return LString(this.__string__.toUpperCase())},LString.prototype.set=function(e,r){typecheck("LString::set",e,"number"),typecheck("LString::set",r,["string","character"]),e=e.valueOf(),r instanceof LCharacter&&(r=r.__char__);var t=[];e>0&&t.push(this.__string__.substring(0,e)),t.push(r),e<this.__string__.length-1&&t.push(this.__string__.substring(e+1)),this.__string__=t.join("")},Object.defineProperty(LString.prototype,"length",{get:function(){return this.__string__.length}}),LString.prototype.clone=function(){return LString(this.valueOf())},LString.prototype.fill=function(e){typecheck("LString::fill",e,["string","character"]),e instanceof LCharacter&&(e=e.toString());var r=this.__string__.length;this.__string__=new Array(r+1).join(e)};function LNumber(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;if(e instanceof LNumber)return e;if(typeof this!="undefined"&&!(this instanceof LNumber)||typeof this=="undefined")return new LNumber(e,r);if(typeof e=="undefined")throw new Error("Invalid LNumber constructor call");var t=LNumber.getType(e);if(LNumber.types[t])return LNumber.types[t](e,r);var a=e instanceof Array&&LString.isString(e[0])&&LNumber.isNumber(e[1]);if(e instanceof LNumber)return LNumber(e.value);if(!LNumber.isNumber(e)&&!a)throw new Error("You can't create LNumber from ".concat(type(e)));e===null&&(e=0);var n;if(a){var o=e,f=_slicedToArray(o,2),l=f[0],h=f[1];l instanceof LString&&(l=l.valueOf()),h instanceof LNumber&&(h=h.valueOf());var d=l.match(/^([+-])/),p=!1;d&&(l=l.replace(/^[+-]/,""),d[1]==="-"&&(p=!0))}if(Number.isNaN(e))return LFloat(e);if(typeof BigInt!="undefined"){if(typeof e!="bigint"){if(a){var b;switch(h){case 8:b="0o";break;case 16:b="0x";break;case 2:b="0b";break;case 10:b="";break}if(typeof b=="undefined"){var A=BigInt(h);n=_toConsumableArray(l).map(function(E,F){return BigInt(parseInt(E,h))*Math.pow(A,BigInt(F))}).reduce(function(E,F){return E+F})}else n=BigInt(b+l)}else n=BigInt(e);p&&(n*=BigInt(-1))}else n=e;return LBigInteger(n,!0)}else{if(typeof BN!="undefined"&&!(e instanceof BN))return e instanceof Array?LBigInteger(_construct(BN,_toConsumableArray(e))):LBigInteger(new BN(e));a?this.constant(parseInt(l,h),"integer"):this.constant(e,"integer")}}LNumber.prototype.constant=function(e,r){Object.defineProperty(this,"__value__",{value:e,enumerable:!0}),Object.defineProperty(this,"__type__",{value:r,enumerable:!0})},LNumber.types={float:function(r){var t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;return new LFloat(r,t)},complex:function(r){var t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;return LNumber.isComplex(r)||(r={im:0,re:r}),new LComplex(r,t)},rational:function(r){var t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;return LNumber.isRational(r)||(r={num:r,denom:1}),new LRational(r,t)}},LNumber.prototype.serialize=function(){return this.__value__},LNumber.prototype.isNaN=function(){return Number.isNaN(this.__value__)},LNumber.prototype.gcd=function(e){var r=this.abs();if(e=e.abs(),e.cmp(r)===1){var t=r;r=e,e=t}for(;;){if(r=r.rem(e),r.cmp(0)===0)return e;if(e=e.rem(r),e.cmp(0)===0)return r}},LNumber.isFloat=function(r){return r instanceof LFloat||Number(r)===r&&r%1!=0},LNumber.isNumber=function(e){return e instanceof LNumber||LNumber.isNative(e)||LNumber.isBN(e)},LNumber.isComplex=function(e){if(!e)return!1;var r=e instanceof LComplex||(LNumber.isNumber(e.im)||Number.isNaN(e.im))&&(LNumber.isNumber(e.re)||Number.isNaN(e.re));return r},LNumber.isRational=function(e){return e?e instanceof LRational||LNumber.isNumber(e.num)&&LNumber.isNumber(e.denom):!1},LNumber.isInteger=function(e){return!(!(LNumber.isNative(e)||e instanceof LNumber)||LNumber.isFloat(e)||LNumber.isRational(e)||LNumber.isComplex(e))},LNumber.isNative=function(e){return typeof e=="bigint"||typeof e=="number"},LNumber.isBigInteger=function(e){return e instanceof LBigInteger||typeof e=="bigint"||LNumber.isBN(e)},LNumber.isBN=function(e){return typeof BN!="undefined"&&e instanceof BN},LNumber.getArgsType=function(e,r){return e instanceof LFloat||r instanceof LFloat?LFloat:e instanceof LBigInteger||r instanceof LBigInteger?LBigInteger:LNumber},LNumber.prototype.toString=function(e){return Number.isNaN(this.__value__)?"+nan.0":e>2&&e<36?this.__value__.toString(e):this.__value__.toString()},LNumber.prototype.asType=function(e){var r=LNumber.getType(this);return LNumber.types[r]?LNumber.types[r](e):LNumber(e)},LNumber.prototype.isBigNumber=function(){return typeof this.__value__=="bigint"||typeof BN!="undefined"&&!(this.value instanceof BN)},["floor","ceil","round"].forEach(function(e){LNumber.prototype[e]=function(){return this.float||LNumber.isFloat(this.__value__)?LNumber(Math[e](this.__value__)):LNumber(Math[e](this.valueOf()))}}),LNumber.prototype.valueOf=function(){if(LNumber.isNative(this.__value__))return Number(this.__value__);if(LNumber.isBN(this.__value__))return this.__value__.toNumber()};var matrix=function(){var e=function(a,n){return[a,n]};return{bigint:{bigint:e,float:function(a,n){return[LFloat(a.valueOf()),n]},rational:function(a,n){return[{num:a,denom:1},n]},complex:function(a,n){return[{im:0,re:a},n]}},integer:{integer:e,float:function(a,n){return[LFloat(a.valueOf()),n]},rational:function(a,n){return[{num:a,denom:1},n]},complex:function(a,n){return[{im:0,re:a},n]}},float:{bigint:function(a,n){return[a,n&&LFloat(n.valueOf())]},integer:function(a,n){return[a,n&&LFloat(n.valueOf())]},float:e,rational:function(a,n){return[a,n&&LFloat(n.valueOf())]},complex:function(a,n){return[{re:a,im:LFloat(0)},n]}},complex:{bigint:r("bigint"),integer:r("integer"),float:r("float"),rational:r("rational"),complex:function(a,n){var o=LNumber.coerce(a.__re__,n.__re__),f=_slicedToArray(o,2),l=f[0],h=f[1],d=LNumber.coerce(a.__im__,n.__im__),p=_slicedToArray(d,2),b=p[0],A=p[1];return[{im:b,re:l},{im:A,re:h}]}},rational:{bigint:function(a,n){return[a,n&&{num:n,denom:1}]},integer:function(a,n){return[a,n&&{num:n,denom:1}]},float:function(a,n){return[LFloat(a.valueOf()),n]},rational:e,complex:function(a,n){return[{im:coerce(a.__type__,n.__im__.__type__,0)[0],re:coerce(a.__type__,n.__re__.__type__,a)[0]},{im:coerce(a.__type__,n.__im__.__type__,n.__im__)[0],re:coerce(a.__type__,n.__re__.__type__,n.__re__)[0]}]}}};function r(t){return function(a,n){return[{im:coerce(t,a.__im__.__type__,0,a.__im__)[1],re:coerce(t,a.__re__.__type__,0,a.__re__)[1]},{im:coerce(t,a.__im__.__type__,0,0)[1],re:coerce(t,n.__type__,0,n)[1]}]}}}();function coerce(e,r,t,a){return matrix[e][r](t,a)}LNumber.coerce=function(e,r){var t=LNumber.getType(e),a=LNumber.getType(r);if(matrix[t]){if(!matrix[t][a])throw new Error("LNumber::coerce unknown rhs type ".concat(a))}else throw new Error("LNumber::coerce unknown lhs type ".concat(t));var n=matrix[t][a](e,r);return n.map(function(o){return LNumber(o,!0)})},LNumber.prototype.coerce=function(e){if(!(typeof e=="number"||e instanceof LNumber))throw new Error("LNumber: you can't coerce ".concat(type(e)));return typeof e=="number"&&(e=LNumber(e)),LNumber.coerce(this,e)},LNumber.getType=function(e){if(e instanceof LNumber)return e.__type__;if(LNumber.isFloat(e))return"float";if(LNumber.isComplex(e))return"complex";if(LNumber.isRational(e))return"rational";if(typeof e=="number")return"integer";if(typeof BigInt!="undefined"&&typeof e!="bigint"||typeof BN!="undefined"&&!(e instanceof BN))return"bigint"},LNumber.prototype.isFloat=function(){return!!(LNumber.isFloat(this.__value__)||this.float)};var mapping={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"},rev_mapping={};Object.keys(mapping).forEach(function(e){rev_mapping[mapping[e]]=e,LNumber.prototype[e]=function(r){return this.op(mapping[e],r)}}),LNumber._ops={"*":function(r,t){return r*t},"+":function(r,t){return r+t},"-":function(r,t){return typeof t=="undefined"?-r:r-t},"/":function(r,t){return r/t},"%":function(r,t){return r%t},"|":function(r,t){return r|t},"&":function(r,t){return r&t},"~":function(r){return~r},">>":function(r,t){return r>>t},"<<":function(r,t){return r<<t}},LNumber.prototype.op=function(e,r){if(typeof r=="undefined")return LNumber(LNumber._ops[e](this.valueOf()));if(typeof r=="number"&&(r=LNumber(r)),Number.isNaN(this.__value__)&&!LNumber.isComplex(r)||!LNumber.isComplex(this)&&Number.isNaN(r.__value__))return LNumber(NaN);var t=this.coerce(r),a=_slicedToArray(t,2),n=a[0],o=a[1];return n._op?n._op(e,o):LNumber(LNumber._ops[e](n,o))},LNumber.prototype.sqrt=function(){var e=this.valueOf();return this.cmp(0)<0?LComplex({re:0,im:Math.sqrt(-e)}):new LNumber(Math.sqrt(e))};var pow=function(r,t){var a=typeof r=="bigint"?BigInt(1):1;return new Array(Number(t)).fill(0).reduce(function(n){return n*r},a)};LNumber.prototype.pow=function(e){var r;return LNumber.isBN(this.__value__)?r=this.__value__.pow(e.__value__):r=pow(this.__value__,e.__value__),LNumber(r)},LNumber.prototype.abs=function(){var e=this.__value__;return LNumber.isNative(this.__value__)?e<0&&(e=-e):LNumber.isBN(e)&&e.iabs(),new LNumber(e)},LNumber.prototype.isOdd=function(){if(LNumber.isNative(this.__value__))return this.isBigNumber()?this.__value__%BigInt(2)===BigInt(1):this.__value__%2==1;if(LNumber.isBN(this.__value__))return this.__value__.isOdd()},LNumber.prototype.isEven=function(){return!this.isOdd()},LNumber.prototype.cmp=function(e){var r=this.coerce(e),t=_slicedToArray(r,2),a=t[0],n=t[1];function o(f,l){return f.__value__<l.__value__?-1:f.__value__===l.__value__?0:1}if(a.__type__==="bigint"){if(LNumber.isNative(a.__value__))return o(a,n);if(LNumber.isBN(a.__value__))return this.__value__.cmp(n.__value__)}else if(a instanceof LFloat)return o(a,n)};function LComplex(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;if(typeof this!="undefined"&&!(this instanceof LComplex)||typeof this=="undefined")return new LComplex(e,r);if(e instanceof LComplex)return LComplex({im:e.__im__,re:e.__re__});if(LNumber.isNumber(e)&&r){if(!r)return Number(e)}else if(!LNumber.isComplex(e))throw new Error("Invalid constructor call for LComplex");var t=e.im instanceof LNumber?e.im:LNumber(e.im),a=e.re instanceof LNumber?e.re:LNumber(e.re);this.constant(t,a)}LComplex.prototype=Object.create(LNumber.prototype),LComplex.prototype.constructor=LComplex,LComplex.prototype.constant=function(e,r){Object.defineProperty(this,"__im__",{value:e,enumerable:!0}),Object.defineProperty(this,"__re__",{value:r,enumerable:!0}),Object.defineProperty(this,"__type__",{value:"complex",enumerable:!0})},LComplex.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}},LComplex.prototype.toRational=function(e){if(LNumber.isFloat(this.__im__)&&LNumber.isFloat(this.__re__)){var r=LFloat(this.__im__).toRational(e),t=LFloat(this.__re__).toRational(e);return LComplex({im:r,re:t})}return this},LComplex.prototype.add=function(e){return this.complex_op("add",e,function(r,t,a,n){return{re:r.add(t),im:a.add(n)}})},LComplex.prototype.factor=function(){if(this.__im__ instanceof LFloat||this.__im__ instanceof LFloat){var e=this.__re__,r=this.__im__,t,a;return e instanceof LFloat?t=e.toRational().mul(e.toRational()):t=e.mul(e),r instanceof LFloat?a=r.toRational().mul(r.toRational()):a=r.mul(r),t.add(a)}else return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))},LComplex.prototype.modulus=function(){return this.factor().sqrt()},LComplex.prototype.conjugate=function(){return LComplex({re:this.__re__,im:this.__im__.sub()})},LComplex.prototype.sqrt=function(){var e=this.modulus(),r,t;return e.cmp(0)===0?r=t=e:this.__re__.cmp(0)===1?(r=LFloat(.5).mul(e.add(this.__re__)).sqrt(),t=this.__im__.div(r).div(2)):(t=LFloat(.5).mul(e.sub(this.__re__)).sqrt(),this.__im__.cmp(0)===-1&&(t=t.sub()),r=this.__im__.div(t).div(2)),LComplex({im:t,re:r})},LComplex.prototype.div=function(e){if(LNumber.isNumber(e)&&!LNumber.isComplex(e)){e instanceof LNumber||(e=LNumber(e));var r=this.__re__.div(e),t=this.__im__.div(e);return LComplex({re:r,im:t})}else if(!LNumber.isComplex(e))throw new Error("[LComplex::div] Invalid value");var a=this.coerce(e),n=_slicedToArray(a,2),o=n[0],f=n[1],l=f.factor(),h=o.mul(f.conjugate()),d=h.__re__.op("/",l),p=h.__im__.op("/",l);return LComplex({re:d,im:p})},LComplex.prototype.sub=function(e){return this.complex_op("sub",e,function(r,t,a,n){return{re:r.sub(t),im:a.sub(n)}})},LComplex.prototype.mul=function(e){return this.complex_op("mul",e,function(r,t,a,n){var o={re:r.mul(t).sub(a.mul(n)),im:r.mul(n).add(t.mul(a))};return o})},LComplex.prototype.complex_op=function(e,r,t){var a=this,n=function(d,p){var b=t(a.__re__,d,a.__im__,p);return"im"in b&&"re"in b?b.im.cmp(0)===0&&!LNumber.isFloat(b.im)?b.re:LComplex(b,!0):b};if(typeof r=="undefined")return n();if(LNumber.isNumber(r)&&!LNumber.isComplex(r)){r instanceof LNumber||(r=LNumber(r));var o=r.asType(0);r={__im__:o,__re__:r}}else if(!LNumber.isComplex(r))throw new Error("[LComplex::".concat(e,"] Invalid value"));var f=r.__re__ instanceof LNumber?r.__re__:this.__re__.asType(r.__re__),l=r.__im__ instanceof LNumber?r.__im__:this.__im__.asType(r.__im__);return n(f,l)},LComplex._op={"+":"add","-":"sub","*":"mul","/":"div"},LComplex.prototype._op=function(e,r){var t=LComplex._op[e];return this[t](r)},LComplex.prototype.cmp=function(e){var r=this.coerce(e),t=_slicedToArray(r,2),a=t[0],n=t[1],o=a.__re__.coerce(n.__re__),f=_slicedToArray(o,2),l=f[0],h=f[1],d=l.cmp(h);if(d!==0)return d;var p=a.__im__.coerce(n.__im__),b=_slicedToArray(p,2),A=b[0],E=b[1];return A.cmp(E)},LComplex.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})},LComplex.prototype.toString=function(){var e;this.__re__.cmp(0)!==0?e=[toString(this.__re__)]:e=[];var r=this.__im__.valueOf(),t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(r),a=toString(this.__im__);if(!t&&!Number.isNaN(r)){var n=this.__im__.cmp(0);n<0||n===0&&this.__im__._minus?e.push("-"):e.push("+"),a=a.replace(/^-/,"")}return e.push(a),e.push("i"),e.join("")};function LFloat(e){if(typeof this!="undefined"&&!(this instanceof LFloat)||typeof this=="undefined")return new LFloat(e);if(!LNumber.isNumber(e))throw new Error("Invalid constructor call for LFloat");if(e instanceof LNumber)return LFloat(e.valueOf());typeof e=="number"&&(Object.is(e,-0)&&Object.defineProperty(this,"_minus",{value:!0}),this.constant(e,"float"))}LFloat.prototype=Object.create(LNumber.prototype),LFloat.prototype.constructor=LFloat,LFloat.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY)return"-inf.0";if(this.__value__===Number.POSITIVE_INFINITY)return"+inf.0";if(Number.isNaN(this.__value__))return"+nan.0";var e=this.__value__.toString();if(!LNumber.isFloat(this.__value__)&&!e.match(/e/i)){var r=e+".0";return this._minus?"-"+r:r}return e.replace(/^([0-9]+)e/,"$1.0e")},LFloat.prototype._op=function(e,r){r instanceof LNumber&&(r=r.__value__);var t=LNumber._ops[e];return e==="/"&&this.__value__===0&&r===0?NaN:LFloat(t(this.__value__,r))},LFloat.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return e===null?toRational(this.__value__.valueOf()):approxRatio(e.valueOf())(this.__value__.valueOf())};var toRational=approxRatio(1e-10);function approxRatio(e){return function(r){var t=function(o,f,l){var h=function d(p,b){return b<o?p:d(b,p%b)};return Number.isNaN(f)||Number.isNaN(l)?NaN:h(Math.abs(f),Math.abs(l))},a=t(e||1/1e4,1,r);return LRational({num:Math.floor(r/a),denom:Math.floor(1/a)})}}function rationalize(e,r){var t=e.sub(r),a=e.add(r),n;return t.cmp(a)>0?n=simplest_rational2(a,t):a.cmp(t)<=0?n=t:t.cmp(0)>0?n=simplest_rational2(t,a):r.cmp(0)<0?n=LNumber(simplest_rational2(a.sub(),t.sub())).sub():n=LNumber(0),LNumber.isFloat(r)||LNumber.isFloat(e)?LFloat(n):n}function simplest_rational2(e,r){var t=LNumber(e).floor(),a=LNumber(r).floor();if(e.cmp(t)<1)return t;if(t.cmp(a)===0){var n=LNumber(1).div(r.sub(a)),o=LNumber(1).div(e.sub(t));return t.add(LNumber(1).div(simplest_rational2(n,o)))}else return t.add(LNumber(1))}function LRational(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;if(typeof this!="undefined"&&!(this instanceof LRational)||typeof this=="undefined")return new LRational(e,r);if(!LNumber.isRational(e))throw new Error("Invalid constructor call for LRational");var t,a;if(e instanceof LRational?(t=LNumber(e.__num__),a=LNumber(e.__denom__)):(t=LNumber(e.num),a=LNumber(e.denom)),!r&&a.cmp(0)!==0){var n=t.op("%",a).cmp(0)===0;if(n)return LNumber(t.div(a))}this.constant(t,a)}LRational.prototype=Object.create(LNumber.prototype),LRational.prototype.constructor=LRational,LRational.prototype.constant=function(e,r){Object.defineProperty(this,"__num__",{value:e,enumerable:!0}),Object.defineProperty(this,"__denom__",{value:r,enumerable:!0}),Object.defineProperty(this,"__type__",{value:"rational",enumerable:!0})},LRational.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}},LRational.prototype.pow=function(e){var r=e.cmp(0);if(r===0)return LNumber(1);if(r===-1){e=e.sub();var t=this.__denom__.pow(e),a=this.__num__.pow(e);return LRational({num:t,denom:a})}var n=this;for(e=e.valueOf();e>1;)n=n.mul(this),e--;return n},LRational.prototype.sqrt=function(){var e=this.__num__.sqrt(),r=this.__denom__.sqrt();return e instanceof LFloat&&(e.toRational(),_readOnlyError("num")),r instanceof LFloat&&(r.toRational(),_readOnlyError("denom")),LRational({num:e,denom:r})},LRational.prototype.abs=function(){var e=this.__num__,r=this.__denom__;return e.cmp(0)===-1&&(e=e.sub()),r.cmp(0)!==1&&(r=r.sub()),LRational({num:e,denom:r})},LRational.prototype.cmp=function(e){return LNumber(this.valueOf(),!0).cmp(e)},LRational.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__),r,t;e.cmp(1)!==0?(r=this.__num__.div(e),r instanceof LRational&&(r=LNumber(r.valueOf(!0))),t=this.__denom__.div(e),t instanceof LRational&&(t=LNumber(t.valueOf(!0)))):(r=this.__num__,t=this.__denom__);var a=this.cmp(0)<0;if(a){if(r.abs().cmp(t.abs())===0)return r.toString()}else if(r.cmp(t)===0)return r.toString();return r.toString()+"/"+t.toString()},LRational.prototype.valueOf=function(e){return this.__denom__.cmp(0)===0?this.__num__.cmp(0)<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:e?LNumber._ops["/"](this.__num__.value,this.__denom__.value):LFloat(this.__num__.valueOf()).div(this.__denom__.valueOf())},LRational.prototype.mul=function(e){if(e instanceof LNumber||(e=LNumber(e)),LNumber.isRational(e)){var r=this.__num__.mul(e.__num__),t=this.__denom__.mul(e.__denom__);return LRational({num:r,denom:t})}var a=LNumber.coerce(this,e),n=_slicedToArray(a,2),o=n[0],f=n[1];return o.mul(f)},LRational.prototype.div=function(e){if(e instanceof LNumber||(e=LNumber(e)),LNumber.isRational(e)){var r=this.__num__.mul(e.__denom__),t=this.__denom__.mul(e.__num__);return LRational({num:r,denom:t})}var a=LNumber.coerce(this,e),n=_slicedToArray(a,2),o=n[0],f=n[1],l=o.div(f);return l},LRational.prototype._op=function(e,r){return this[rev_mapping[e]](r)},LRational.prototype.sub=function(e){if(typeof e=="undefined")return this.mul(-1);if(e instanceof LNumber||(e=LNumber(e)),LNumber.isRational(e)){var r=e.__num__.sub(),t=e.__denom__;return this.add(LRational({num:r,denom:t}))}e instanceof LNumber?e=e.sub():e=LNumber(e).sub();var a=LNumber.coerce(this,e),n=_slicedToArray(a,2),o=n[0],f=n[1];return o.add(f)},LRational.prototype.add=function(e){if(e instanceof LNumber||(e=LNumber(e)),LNumber.isRational(e)){var r=this.__denom__,t=e.__denom__,a=this.__num__,n=e.__num__,o,f;return r!==t?(f=t.mul(a).add(n.mul(r)),o=r.mul(t)):(f=a.add(n),o=r),LRational({num:f,denom:o})}if(LNumber.isFloat(e))return LFloat(this.valueOf()).add(e);var l=LNumber.coerce(this,e),h=_slicedToArray(l,2),d=h[0],p=h[1];return d.add(p)};function LBigInteger(e,r){if(typeof this!="undefined"&&!(this instanceof LBigInteger)||typeof this=="undefined")return new LBigInteger(e,r);if(e instanceof LBigInteger)return LBigInteger(e.__value__,e._native);if(!LNumber.isBigInteger(e))throw new Error("Invalid constructor call for LBigInteger");this.constant(e,"bigint"),Object.defineProperty(this,"_native",{value:r})}LBigInteger.prototype=Object.create(LNumber.prototype),LBigInteger.prototype.constructor=LBigInteger,LBigInteger.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"},LBigInteger.prototype.serialize=function(){return this.__value__.toString()},LBigInteger.prototype._op=function(e,r){if(typeof r=="undefined")return LNumber.isBN(this.__value__)?(e=LBigInteger.bn_op[e],LBigInteger(this.__value__.clone()[e](),!1)):LBigInteger(LNumber._ops[e](this.__value__),!0);if(LNumber.isBN(this.__value__)&&LNumber.isBN(r.__value__))return e=LBigInteger.bn_op[e],LBigInteger(this.__value__.clone()[e](r),!1);var t=LNumber._ops[e](this.__value__,r.__value__);if(e==="/"){var a=this.op("%",r).cmp(0)===0;return a?LNumber(t):LRational({num:this,denom:r})}return LBigInteger(t,!0)},LBigInteger.prototype.sqrt=function(){var e,r=this.cmp(0)<0;return LNumber.isNative(this.__value__)?e=LNumber(Math.sqrt(r?-this.valueOf():this.valueOf())):LNumber.isBN(this.__value__)&&(e=r?this.__value__.neg().sqrt():this.__value__.sqrt()),r?LComplex({re:0,im:e}):e},LNumber.NaN=LNumber(NaN);function InputPort(e){var r=this;if(typeof this!="undefined"&&!(this instanceof InputPort)||typeof this=="undefined")return new InputPort(e);typecheck("InputPort",e,"function"),read_only(this,"__type__",text_port);var t;Object.defineProperty(this,"__parser__",{enumerable:!0,get:function(){return t},set:function(n){typecheck("InputPort::__parser__",n,"parser"),t=n}}),this._read=e,this._with_parser=this._with_init_parser.bind(this,_asyncToGenerator(regenerator.mark(function a(){var n;return regenerator.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r.char_ready()){f.next=5;break}return f.next=3,r._read();case 3:n=f.sent,t=new Parser(n,{env:r});case 5:return f.abrupt("return",r.__parser__);case 6:case"end":return f.stop()}},a)}))),this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==eof},this._make_defaults()}InputPort.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()}),this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()}),this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()}),this.read_string=this._with_parser(function(e,r){if(!LNumber.isInteger(r)){var t=LNumber.getType(r);typeErrorMessage("read-string",t,"integer")}return e.__lexer__.read_string(r.valueOf())}),this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})},InputPort.prototype._with_init_parser=function(e,r){var t=this;return function(){var a=_asyncToGenerator(regenerator.mark(function n(){var o,f,l,h,d=arguments;return regenerator.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,e.call(t);case 2:for(o=b.sent,f=d.length,l=new Array(f),h=0;h<f;h++)l[h]=d[h];return b.abrupt("return",r.apply(void 0,[o].concat(l)));case 5:case"end":return b.stop()}},n)}));return function(){return a.apply(this,arguments)}}()},InputPort.prototype.is_open=function(){return this._with_parser!==null},InputPort.prototype.close=function(){var e=this;this.__parser__=null,this._with_parser=null,["read","close","read_char","peek-char","read_line"].forEach(function(r){e[r]=function(){throw new Error("input-port: port is closed")}}),this.char_ready=function(){return!1}},InputPort.prototype.toString=function(){return"#<input-port>"};function OutputPort(e){if(typeof this!="undefined"&&!(this instanceof OutputPort)||typeof this=="undefined")return new OutputPort(e);typecheck("OutputPort",e,"function"),read_only(this,"__type__",text_port),this.write=e}OutputPort.prototype.is_open=function(){return this._closed!==!0},OutputPort.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function(){return!0},set:function(){},configurable:!1,enumerable:!1}),this.write=function(){throw new Error("output-port: port is closed")}},OutputPort.prototype.toString=function(){return"#<output-port>"};function OutputStringPort(e){var r=this;if(typeof this!="undefined"&&!(this instanceof OutputStringPort)||typeof this=="undefined")return new OutputStringPort(e);typecheck("OutputStringPort",e,"function"),read_only(this,"__type__",text_port),read_only(this,"__buffer__",[]),this.write=function(t){LString.isString(t)?t=t.valueOf():t=e(t),r.__buffer__.push(t)}}OutputStringPort.prototype=Object.create(OutputPort.prototype),OutputStringPort.prototype.constructor=OutputStringPort,OutputStringPort.prototype.toString=function(){return"#<output-port (string)>"},OutputStringPort.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function OutputFilePort(e,r){var t=this;if(typeof this!="undefined"&&!(this instanceof OutputFilePort)||typeof this=="undefined")return new OutputFilePort(e,r);typecheck("OutputFilePort",e,"string"),read_only(this,"__filename__",e),read_only(this,"_fd",r.valueOf(),{hidden:!0}),read_only(this,"__type__",text_port),this.write=function(a){LString.isString(a)?a=a.valueOf():a=toString(a),t.fs().write(t._fd,a,function(n){if(n)throw n})}}OutputFilePort.prototype=Object.create(OutputPort.prototype),OutputFilePort.prototype.constructor=OutputFilePort,OutputFilePort.prototype.fs=function(){return this._fs||(this._fs=this.internal("fs")),this._fs},OutputFilePort.prototype.internal=function(e){return user_env.get("**internal-env**").get(e)},OutputFilePort.prototype.close=function(){var e=this;return new Promise(function(r,t){e.fs().close(e._fd,function(a){a?t(a):(read_only(e,"_fd",null,{hidden:!0}),OutputPort.prototype.close.call(e),r())})})},OutputFilePort.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function InputStringPort(e,r){var t=this;if(typeof this!="undefined"&&!(this instanceof InputStringPort)||typeof this=="undefined")return new InputStringPort(e);typecheck("InputStringPort",e,"string"),r=r||global_env,e=e.valueOf(),this._with_parser=this._with_init_parser.bind(this,function(){return t.__parser__||(t.__parser__=new Parser(e,{env:r})),t.__parser__}),read_only(this,"__type__",text_port),this._make_defaults()}InputStringPort.prototype.char_ready=function(){return!0},InputStringPort.prototype=Object.create(InputPort.prototype),InputStringPort.prototype.constructor=InputStringPort,InputStringPort.prototype.toString=function(){return"#<input-port (string)>"};function InputByteVectorPort(e){if(typeof this!="undefined"&&!(this instanceof InputByteVectorPort)||typeof this=="undefined")return new InputByteVectorPort(e);typecheck("InputByteVectorPort",e,"uint8array"),read_only(this,"__vector__",e),read_only(this,"__type__",binary_port);var r=0;Object.defineProperty(this,"__index__",{enumerable:!0,get:function(){return r},set:function(a){if(typecheck("InputByteVectorPort::__index__",a,"number"),a instanceof LNumber&&(a=a.valueOf()),typeof a=="bigint"&&(a=Number(a)),Math.floor(a)!==a)throw new Error("InputByteVectorPort::__index__ value is not integer");r=a}})}InputByteVectorPort.prototype=Object.create(InputPort.prototype),InputByteVectorPort.prototype.constructor=InputByteVectorPort,InputByteVectorPort.prototype.toString=function(){return"#<input-port (bytevector)>"},InputByteVectorPort.prototype.close=function(){var e=this;read_only(this,"__vector__",_nil),["read_u8","close","peek_u8","read_u8_vector"].forEach(function(r){e[r]=function(){throw new Error("Input-binary-port: port is closed")}}),this.char_ready=function(){return!1}},InputByteVectorPort.prototype.u8_ready=function(){return!0},InputByteVectorPort.prototype.peek_u8=function(){return this.__index__>=this.__vector__.length?eof:this.__vector__[this.__index__]},InputByteVectorPort.prototype.skip=function(){this.__index__<=this.__vector__.length&&++this.__index__},InputByteVectorPort.prototype.read_u8=function(){var e=this.peek_u8();return this.skip(),e},InputByteVectorPort.prototype.read_u8_vector=function(e){return typeof e=="undefined"?e=this.__vector__.length:e>this.__index__+this.__vector__.length&&(e=this.__index__+this.__vector__.length),this.peek_u8()===eof?eof:this.__vector__.slice(this.__index__,e)};function OutputByteVectorPort(){if(typeof this!="undefined"&&!(this instanceof OutputByteVectorPort)||typeof this=="undefined")return new OutputByteVectorPort;read_only(this,"__type__",binary_port),read_only(this,"_buffer",[],{hidden:!0}),this.write=function(e){if(typecheck("write",e,["number","uint8array"]),LNumber.isNumber(e))this._buffer.push(e.valueOf());else{var r;(r=this._buffer).push.apply(r,_toConsumableArray(Array.from(e)))}},Object.defineProperty(this,"__buffer__",{enumerable:!0,get:function(){return Uint8Array.from(this._buffer)}})}OutputByteVectorPort.prototype=Object.create(OutputPort.prototype),OutputByteVectorPort.prototype.constructor=OutputByteVectorPort,OutputByteVectorPort.prototype.close=function(){OutputPort.prototype.close.call(this),read_only(this,"_buffer",null,{hidden:!0})},OutputByteVectorPort.prototype._close_guard=function(){if(this._closed)throw new Error("output-port: binary port is closed")},OutputByteVectorPort.prototype.write_u8=function(e){typecheck("OutputByteVectorPort::write_u8",e,"number"),this.write(e)},OutputByteVectorPort.prototype.write_u8_vector=function(e){typecheck("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)},OutputByteVectorPort.prototype.toString=function(){return"#<output-port (bytevector)>"},OutputByteVectorPort.prototype.valueOf=function(){return this.__buffer__};function InputFilePort(e,r){if(typeof this!="undefined"&&!(this instanceof InputFilePort)||typeof this=="undefined")return new InputFilePort(e,r);InputStringPort.call(this,e),typecheck("InputFilePort",r,"string"),read_only(this,"__filename__",r)}InputFilePort.prototype=Object.create(InputStringPort.prototype),InputFilePort.prototype.constructor=InputFilePort,InputFilePort.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function InputBinaryFilePort(e,r){if(typeof this!="undefined"&&!(this instanceof InputBinaryFilePort)||typeof this=="undefined")return new InputBinaryFilePort(e,r);InputByteVectorPort.call(this,e),typecheck("InputBinaryFilePort",r,"string"),read_only(this,"__filename__",r)}InputBinaryFilePort.prototype=Object.create(InputByteVectorPort.prototype),InputBinaryFilePort.prototype.constructor=InputBinaryFilePort,InputBinaryFilePort.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function OutputBinaryFilePort(e,r){if(typeof this!="undefined"&&!(this instanceof OutputBinaryFilePort)||typeof this=="undefined")return new OutputBinaryFilePort(e,r);typecheck("OutputBinaryFilePort",e,"string"),read_only(this,"__filename__",e),read_only(this,"_fd",r.valueOf(),{hidden:!0}),read_only(this,"__type__",binary_port);var t,a;this.write=function(n){var o=this;typecheck("write",n,["number","uint8array"]);var f;return t||(t=this.internal("fs")),a||(a=this.internal("Buffer")),LNumber.isNumber(n)?f=a.from([n.valueOf()]):f=a.from(Array.from(n)),new Promise(function(l,h){t.write(o._fd,f,function(d){d?h(d):l()})})}}OutputBinaryFilePort.prototype=Object.create(OutputFilePort.prototype),OutputBinaryFilePort.prototype.constructor=OutputBinaryFilePort,OutputBinaryFilePort.prototype.write_u8=function(e){typecheck("OutputByteVectorPort::write_u8",e,"number"),this.write(e)},OutputBinaryFilePort.prototype.write_u8_vector=function(e){typecheck("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)};var binary_port=Symbol.for("binary"),text_port=Symbol.for("text"),eof=new EOF;function EOF(){}EOF.prototype.toString=function(){return"#<eof>"};function Interpreter(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.stderr,a=r.stdin,n=r.stdout,o=_objectWithoutProperties(r,_excluded2);if(typeof this!="undefined"&&!(this instanceof Interpreter)||typeof this=="undefined")return new Interpreter(e,_objectSpread({stdin:a,stdout:n,stderr:t},o));typeof e=="undefined"&&(e="anonymous"),this.__env__=user_env.inherit(e,o);var f="**interaction-environment-defaults**";this.set(f,get_props(o).concat(f));var l=internal_env.inherit("internal-".concat(e));is_port(a)&&l.set("stdin",a),is_port(t)&&l.set("stderr",t),is_port(n)&&l.set("stdout",n),set_interaction_env(this.__env__,l)}Interpreter.prototype.exec=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:null;return typecheck("Interpreter::exec",e,["string","array"],1),typecheck("Interpreter::exec",r,"boolean",2),global_env.set("**interaction-environment**",this.__env__),t===null&&(t=this.__env__),exec(e,t,r?t:!1)},Interpreter.prototype.get=function(e){var r=this.__env__.get(e);return is_function(r)?r.bind(this.__env__):r},Interpreter.prototype.set=function(e,r){return this.__env__.set(e,r)},Interpreter.prototype.constant=function(e,r){return this.__env__.constant(e,r)};function LipsError(e,r){this.name="LipsError",this.message=e,this.args=r,this.stack=new Error().stack}LipsError.prototype=new Error,LipsError.prototype.constructor=LipsError;function Environment(e,r,t){arguments.length===1&&(_typeof(arguments[0])==="object"?(e=arguments[0],r=null):typeof arguments[0]=="string"&&(e={},r=null,t=arguments[0])),this.__docs__=new Map,this.__env__=e,this.__parent__=r,this.__name__=t||"anonymous"}Environment.prototype.list=function(){return get_props(this.__env__)},Environment.prototype.fs=function(){return this.get("**fs**")},Environment.prototype.unset=function(e){e instanceof LSymbol&&(e=e.valueOf()),e instanceof LString&&(e=e.valueOf()),delete this.__env__[e]},Environment.prototype.inherit=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{};return _typeof(e)==="object"&&(r=e),(!e||_typeof(e)==="object")&&(e="child of "+(this.__name__||"unknown")),new Environment(r||{},this,e)},Environment.prototype.doc=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:null,t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:!1;if(e instanceof LSymbol&&(e=e.__name__),e instanceof LString&&(e=e.valueOf()),r)return t||(r=trim_lines(r)),this.__docs__.set(e,r),this;if(this.__docs__.has(e))return this.__docs__.get(e);if(this.__parent__)return this.__parent__.doc(e)},Environment.prototype.newFrame=function(e,r){var t=this.inherit("__frame__");return t.set("parent.frame",doc("parent.frame",function(){var a=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:1;a=a.valueOf();var n=t.__parent__;if(!(n instanceof Environment))return _nil;if(a<=0)return n;var o=n.get("parent.frame");return o(a-1)},global_env.__env__["parent.frame"].__doc__)),r.callee=e,t.set("arguments",r),t},Environment.prototype._lookup=function(e){if(e instanceof LSymbol&&(e=e.__name__),e instanceof LString&&(e=e.valueOf()),this.__env__.hasOwnProperty(e))return Value(this.__env__[e]);if(this.__parent__)return this.__parent__._lookup(e)},Environment.prototype.toString=function(){return"#<environment:"+this.__name__+">"},Environment.prototype.clone=function(){var e=this,r={};return Object.keys(this.__env__).forEach(function(t){r[t]=e.__env__[t]}),new Environment(r,this.__parent__,this.__name__)},Environment.prototype.merge=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:"merge";return typecheck("Environment::merge",e,"environment"),this.inherit(r,e.__env__)};function Value(e){if(typeof this!="undefined"&&!(this instanceof Value)||typeof this=="undefined")return new Value(e);this.value=e}Value.isUndefined=function(e){return e instanceof Value&&typeof e.value=="undefined"},Value.prototype.valueOf=function(){return this.value};function Values(e){if(e.length&&e.length===1)return e[0];if(typeof this!="undefined"&&!(this instanceof Values)||typeof this=="undefined")return new Values(e);this.__values__=e}Values.prototype.toString=function(){return this.__values__.map(function(e){return toString(e)}).join(`
`)},Values.prototype.valueOf=function(){return this.__values__},Environment.prototype.get=function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{};typecheck("Environment::get",e,["symbol","string"]);var t=r.throwError,a=t===void 0?!0:t,n=e;(n instanceof LSymbol||n instanceof LString)&&(n=n.valueOf());var o=this._lookup(n);if(o instanceof Value)return Value.isUndefined(o)?undefined$1:patch_value(o.valueOf());if(typeof n=="string"){var f=n.split(".").filter(Boolean);if(f.length>0){var l=_toArray(f),h=l[0],d=l.slice(1);if(o=this._lookup(h),d.length)try{return o instanceof Value?o=o.valueOf():(o=get(root,h),is_function(o)&&(o=unbind(o))),get.apply(void 0,[o].concat(_toConsumableArray(d)))}catch(p){}else if(o instanceof Value)return patch_value(o.valueOf())}o=get(root,n)}if(typeof o!="undefined")return o;if(a)throw new Error("Unbound variable `"+n.toString()+"'")},Environment.prototype.set=function(e,r){var t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:null;return typecheck("Environment::set",e,["string","symbol"]),LNumber.isNumber(r)&&(r=LNumber(r)),e instanceof LSymbol&&(e=e.__name__),e instanceof LString&&(e=e.valueOf()),this.__env__[e]=r,t&&this.doc(e,t),this},Environment.prototype.constant=function(e,r){var t=this;if(this.__env__.hasOwnProperty(e))throw new Error("Environment::constant: ".concat(e," already exists"));if(arguments.length===1&&is_plain_object(arguments[0])){var a=arguments[0];Object.keys(a).forEach(function(n){t.constant(e,a[n])})}else Object.defineProperty(this.__env__,e,{value:r,enumerable:!0});return this},Environment.prototype.has=function(e){return this.__env__.hasOwnProperty(e)},Environment.prototype.ref=function(e){for(var r=this;r;){if(r.has(e))return r;r=r.__parent__}},Environment.prototype.parents=function(){for(var e=this,r=[];e;)r.unshift(e),e=e.__parent__;return r};function quote(e){return is_promise(e)?e.then(quote):((e instanceof Pair||e instanceof LSymbol)&&(e[__data__]=!0),e)}var native_lambda=parse(tokenize(`(lambda ()
                                          "[native code]"
                                          (throw "Invalid Invocation"))`))[0],get=doc("get",function(r){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];is_function(r)&&_typeof(a[0])!=="symbol"&&(r=unbind(r));for(var o,f=a.length;a.length;){var l=a.shift(),h=unbox(l);if(h==="then"&&r instanceof QuotedPromise?o=QuotedPromise.prototype.then:h==="__code__"&&is_function(r)&&typeof r.__code__=="undefined"?o=native_lambda:o=r[h],typeof o=="undefined"){if(a.length)throw new Error("Try to get ".concat(a[0]," from undefined"));return o}else{var d;a.length-1<f&&(d=r),o=patch_value(o,d)}r=o}return o},`(. obj . args)
        (get obj . args)

        Function use object as base and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, e.g. you can't
        pass it as argument.`);function internal(e,r){var t=interaction(e,"**internal-env**");return t.get(r)}function interaction(e,r){var t=e.get("**interaction-environment**");return t.get(r)}var internal_env=new Environment({stdout:new OutputPort(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new OutputPort(function(){var e;(e=console).error.apply(e,arguments)}),stdin:InputPort(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined$1,"internal"),nan=LNumber(NaN),constants={true:!0,false:!1,"#true":!0,"#false":!1,"#t":!0,"#f":!1,nil:_nil,null:null,NaN:nan,"+nan.0":nan,"-nan.0":nan},global_env=new Environment({eof,undefined:undefined$1,"peek-char":doc("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return e===null&&(e=internal(this,"stdin")),typecheck_text_port("peek-char",e,"input-port"),e.peek_char()},`(peek-char port)

            Function get character from string port or EOF object if no more
            data in string port.`),"read-line":doc("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return e===null&&(e=internal(this,"stdin")),typecheck_text_port("read-line",e,"input-port"),e.read_line()},`(read-char port)

            Function read next character from input port.`),"read-char":doc("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:null;return e===null&&(e=internal(this,"stdin")),typecheck_text_port("read-char",e,"input-port"),e.read_char()},`(read-char port)

            Function read next character from input port.`),read:doc("read",function(){var e=_asyncToGenerator(regenerator.mark(function t(){var a,n,o,f,l,h,d,p,b,A=arguments;return regenerator.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(a=A.length>0&&A[0]!==undefined$1?A[0]:null,!LString.isString(a)){F.next=35;break}n=!0,o=!1,F.prev=4,l=_asyncIterator(parse(a,this));case 6:return F.next=8,l.next();case 8:return h=F.sent,n=h.done,F.next=12,h.value;case 12:if(d=F.sent,n){F.next=19;break}return p=d,F.abrupt("return",p);case 16:n=!0,F.next=6;break;case 19:F.next=25;break;case 21:F.prev=21,F.t0=F.catch(4),o=!0,f=F.t0;case 25:if(F.prev=25,F.prev=26,!(!n&&l.return!=null)){F.next=30;break}return F.next=30,l.return();case 30:if(F.prev=30,!o){F.next=33;break}throw f;case 33:return F.finish(30);case 34:return F.finish(25);case 35:return a===null?b=internal(this,"stdin"):b=a,typecheck_text_port("read",b,"input-port"),F.abrupt("return",b.read.call(this));case 38:case"end":return F.stop()}},t,this,[[4,21,25,35],[26,,30,34]])}));function r(){return e.apply(this,arguments)}return r}(),`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:doc("pprint",function(r){r instanceof Pair?(r=new lips.Formatter(r.toString(!0)).break().format(),global_env.get("display").call(global_env,r)):global_env.get("write").call(global_env,r),global_env.get("newline").call(global_env)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:doc("print",function(){for(var r=global_env.get("display"),t=global_env.get("newline"),a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];n.forEach(function(f){r.call(global_env,f),t.call(global_env)})},`(print . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code), the function call newline after printing each arg.`),format:doc("format",function(r){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];typecheck("format",r,"string");var o=/(~[as%~])/g,f=r.match(/(~[as])/g);if(f&&f.length>a.length)throw new Error("Not enough arguments");var l=0,h=global_env.get("repr");if(r=r.replace(o,function(d){var p=d[1];if(p==="~")return"~";if(p==="%")return`
`;var b=a[l++];return p==="a"?h(b):h(b,!0)}),f=r.match(/~([\S])/),f)throw new Error("format: Unrecognized escape seqence ".concat(f[1]));return r},`(format string n1 n2 ...)

            Function accepts string template and replacing any escape sequences
            by arguments:

            * ~a value as if printed with display
            * ~s value as if printed with write
            * ~% newline character
            * ~~ literal tilde '~' is inserted

            if there missing arguments or other escape character it throw exception.`),display:doc("display",function(r){var t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:null;t===null?t=internal(this,"stdout"):typecheck("display",t,"output-port");var a=global_env.get("repr")(r);t.write.call(global_env,a)},`(display arg [port])

            Function send string to standard output or provied port.`),"display-error":doc("display-error",function(){for(var r=internal(this,"stderr"),t=global_env.get("repr"),a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];var f=n.map(t).join(" ");r.write.call(global_env,f),global_env.get("newline")(r)},`(display-error . args)

            Display error message.`),"%same-functions":doc("%same-functions",function(e,r){return!is_function(e)||!is_function(r)?!1:unbind(e)===unbind(r)},`(%same-functions a b)

            Helper function that check if two bound functions are the same`),help:doc(new Macro("help",function(e,r){var t=r.dynamic_scope,a=r.error,n;if(e.car instanceof LSymbol)n=e.car;else if(e.car instanceof Pair&&e.car.car instanceof LSymbol)n=e.car.car;else{var o=this;t&&(t=this);var f=_evaluate(e.car,{env:o,error:a,dynamic_scope:t});return f&&f.__doc__?f.__doc__:void 0}var l,h=this.get(n);if(l=h&&h.__doc__,l)return l;var d=this.ref(n);if(d&&(l=d.doc(n),l))return l}),`(help object)

             Macro returns documentation for function or macro. You can save the function
             or macro in variable and use it in context. But help for variable require
             to pass the symbol itself.`),cons:doc("cons",function(r,t){return new Pair(r,t)},`(cons left right)

            Function return new Pair out of two arguments.`),car:doc("car",function(r){return typecheck("car",r,"pair"),r.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:doc("cdr",function(r){return typecheck("cdr",r,"pair"),r.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":doc(new Macro("set!",function(e){var r=this,t=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},a=t.dynamic_scope,n=t.error;a&&(a=this);var o=this,f,l=_evaluate(e.cdr.car,{env:this,dynamic_scope:a,error:n});l=resolve_promises(l);function h(F,M,D){return is_promise(F)?F.then(function(C){return h(F,C,D)}):is_promise(M)?M.then(function(C){return h(F,C,D)}):is_promise(D)?D.then(function(C){return h(F,M,C)}):(o.get("set-obj!").call(o,F,M,D),D)}if(e.car instanceof Pair&&LSymbol.is(e.car.car,".")){var d=e.car.cdr.car,p=e.car.cdr.cdr.car,b=_evaluate(d,{env:this,dynamic_scope:a,error:n}),A=_evaluate(p,{env:this,dynamic_scope:a,error:n});return h(b,A,l)}if(!(e.car instanceof LSymbol))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");var E=e.car.valueOf();return f=this.ref(e.car.__name__),unpromise(l,function(F){if(!f){var M=E.split(".");if(M.length>1){var D=M.pop(),C=M.join("."),P=r.get(C,{throwError:!1});if(P){h(P,D,F);return}}throw new Error("Unbound variable `"+E+"'")}f.set(E,F)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"unset!":doc(new Macro("set!",function(e){if(!(e.car instanceof LSymbol))throw new Error("unset! first argument need to be a symbol or dot accessor that evaluate to object.");var r=e.car,t=this.ref(r);t&&delete t.__env__[r.__name__]}),`(unset! name)

            Function delete specified name from environment.`),"set-car!":doc("set-car!",function(e,r){typecheck("set-car!",e,"pair"),e.car=r},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":doc("set-cdr!",function(e,r){typecheck("set-cdr!",e,"pair"),e.cdr=r},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":doc("empty?",function(e){return typeof e=="undefined"||e===_nil},`(empty? object)

            Function return true if value is undfined empty list.`),gensym:doc("gensym",gensym,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),load:doc("load",function(r,t){typecheck("load",r,"string");var a=this;a.__name__==="__frame__"&&(a=a.__parent__),t instanceof Environment||(a===global_env?t=a:t=this.get("**interaction-environment**"));var n="**module-path**",o=global_env.get(n,{throwError:!1});r=r.valueOf(),r.match(/.[^.]+$/)||(r+=".scm");function f(l){return type(l)==="buffer"&&(l=l.toString()),l=l.replace(/^#!.*/,""),l.match(/\{/)&&(l=unserialize(l)),exec(l,t)}return is_node()?new Promise(function(l,h){var d=nodeRequire("path");o&&(o=o.valueOf(),r=d.join(o,r)),global_env.set(n,d.dirname(r)),nodeRequire("fs").readFile(r,function(p,b){if(p)h(p),global_env.set(n,o);else try{f(b).then(function(){l(),global_env.set(n,o)}).catch(h)}catch(A){h(A)}})}):(o&&(o=o.valueOf(),r=o+"/"+r.replace(/^\.?\/?/,"")),root.fetch(r).then(function(l){return l.text()}).then(function(l){return global_env.set(n,r.replace(/\/[^/]*$/,"")),f(l)}).then(function(){}).finally(function(){global_env.set(n,o)}))},`(load filename)
            (load filename environment)

            Function fetch the file and evaluate its content as LIPS code,
            If second argument is provided and it's environment the evaluation
            will happen in that environment.`),do:doc(new Macro("do",function(){var e=_asyncToGenerator(regenerator.mark(function r(t,a){var n,o,f,l,h,d,p,b,A,E,F;return regenerator.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:n=a.dynamic_scope,o=a.error,f=this,n&&(n=f),l=f.inherit("do"),h=t.car,d=t.cdr.car,p=t.cdr.cdr,p!==_nil&&(p=new Pair(LSymbol("begin"),p)),b={env:f,dynamic_scope:n,error:o},A=h;case 10:if(A===_nil){D.next=21;break}return E=A.car,D.t0=l,D.t1=E.car,D.next=16,_evaluate(E.cdr.car,b);case 16:D.t2=D.sent,D.t0.set.call(D.t0,D.t1,D.t2),A=A.cdr,D.next=10;break;case 21:b={env:l,dynamic_scope:n,error:o},F=regenerator.mark(function C(){var P,O,k,B,T;return regenerator.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(p===_nil){N.next=3;break}return N.next=3,lips.evaluate(p,b);case 3:P=h,O={};case 5:if(P===_nil){N.next=15;break}if(k=P.car,k.cdr.cdr===_nil){N.next=12;break}return N.next=10,_evaluate(k.cdr.cdr.car,b);case 10:B=N.sent,O[k.car.valueOf()]=B;case 12:P=P.cdr,N.next=5;break;case 15:T=Object.getOwnPropertySymbols(O),Object.keys(O).concat(T).forEach(function(G){l.set(G,O[G])});case 17:case"end":return N.stop()}},C)});case 23:return D.next=25,_evaluate(d.car,b);case 25:if(D.t3=D.sent,D.t3!==!1){D.next=30;break}return D.delegateYield(F(),"t4",28);case 28:D.next=23;break;case 30:if(d.cdr===_nil){D.next=34;break}return D.next=33,_evaluate(d.cdr.car,b);case 33:return D.abrupt("return",D.sent);case 34:case"end":return D.stop()}},r,this)}));return function(r,t){return e.apply(this,arguments)}}()),`(do ((<var> <init> <next>)) (test expression) . body)

             Iteration macro that evaluate the expression body in scope of the variables.
             On Eeach loop it increase the variables according to next expression and run
             test to check if the loop should continue. If test is signle call the macro
             will not return anything. If the test is pair of expression and value the
             macro will return that value after finish.`),if:doc(new Macro("if",function(e,r){var t=r.dynamic_scope,a=r.error;t&&(t=this);var n=this,o=function(h){return h===!1?_evaluate(e.cdr.cdr.car,{env:n,dynamic_scope:t,error:a}):_evaluate(e.cdr.car,{env:n,dynamic_scope:t,error:a})};if(e===_nil)throw new Error("too few expressions for `if`");var f=_evaluate(e.car,{env:n,dynamic_scope:t,error:a});return unpromise(f,o)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let-env":new Macro("let-env",function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.dynamic_scope,a=r.error;typecheck("let-env",e,"pair");var n=_evaluate(e.car,{env:this,dynamic_scope:t,error:a});return unpromise(n,function(o){return typecheck("let-env",o,"environment"),_evaluate(Pair(LSymbol("begin"),e.cdr),{env:o,dynamic_scope:t,error:a})})},`(let-env env . body)

            Special macro that evaluate body in context of given environment
            object.`),letrec:doc(let_macro(Symbol.for("letrec")),`(letrec ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),"letrec*":doc(let_macro(Symbol.for("letrec")),`(letrec* ((a value-a) (b value-b)) body)

             Same as letrec but the order of execution of the binding is guaranteed,
             so use can use recursive code as well as reference previous binding.
             In LIPS both letrec and letrec* behave the same.`),"let*":doc(let_macro(Symbol.for("let*")),`(let* ((a value-a) (b value-b)) body)

             Macro similar to \`let\` but next argument get environment
             from previous let variable, so they you can define one variable,
             and use in next argument.`),let:doc(let_macro(Symbol.for("let")),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":doc(pararel("begin*",function(e){return e.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:doc(new Macro("begin",function(e,r){var t=Object.assign({},r),a=global_env.get("list->array")(e);t.dynamic_scope&&(t.dynamic_scope=this),t.env=this;var n;return function o(){if(a.length){var f=a.shift(),l=_evaluate(f,t);return unpromise(l,function(h){return n=h,o()})}else return n}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new Macro("ignore",function(e,r){var t=r.dynamic_scope,a=r.error,n={env:this,error:a};t&&(n.dynamic_scope=this),_evaluate(new Pair(new LSymbol("begin"),e),n)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:doc(Macro.defmacro("define",function(e,r){var t=this;if(e.car instanceof Pair&&e.car.car instanceof LSymbol){var a=new Pair(new LSymbol("define"),new Pair(e.car.car,new Pair(new Pair(new LSymbol("lambda"),new Pair(e.car.cdr,e.cdr)))));return a}else if(r.macro_expand)return;r.dynamic_scope&&(r.dynamic_scope=this),r.env=t;var n=e.cdr.car,o;return n instanceof Pair?(n=_evaluate(n,r),o=!0):n instanceof LSymbol&&(n=t.get(n)),typecheck("define",e.car,"symbol"),unpromise(n,function(f){t.__name__===Syntax.__merge_env__&&(t=t.__parent__),o&&(is_function(f)&&is_lambda(f)||f instanceof Syntax)&&(f.__name__=e.car.valueOf(),f.__name__ instanceof LString&&(f.__name__=f.__name__.valueOf()));var l;e.cdr.cdr instanceof Pair&&LString.isString(e.cdr.cdr.car)&&(l=e.cdr.cdr.car.valueOf()),t.set(e.car,f,l,!0)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":doc("set-obj!",function(e,r,t){var a=_typeof(e);if(is_null(e)||a!=="object"&&a!=="function"){var n=typeErrorMessage("set-obj!",type(e),["object","function"]);throw new Error(n)}typecheck("set-obj!",r,["string","symbol","number"]),e=unbind(e),r=r.valueOf(),arguments.length===2?delete e[r]:is_prototype(e)&&is_function(t)?(e[r]=unbind(t),e[r][__prototype__]=!0):is_function(t)||is_native(t)||t===_nil?e[r]=t:e[r]=t&&t.valueOf()},`(set-obj! obj key value)

            Function set property of JavaScript object`),"null-environment":doc("null-environment",function(){return global_env.inherit("null")},`(null-environment)

            Function return new base environment with std lib.`),values:doc("values",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return Values(t)},`(values a1 a2 ...)

            If called with more then one elment it will create special
            Values object that can be used in call-with-values function`),"call-with-values":doc("call-with-values",function(e,r){typecheck("call-with-values",e,"function",1),typecheck("call-with-values",r,"function",2);var t=e();return t instanceof Values?r.apply(void 0,_toConsumableArray(t.valueOf())):r(t)},`(call-with-values producer consumer)

            Calls its producer argument with no values and a continuation that,
            when passed some values, calls the consumer procedure with those
            values as arguments.`),"current-environment":doc("current-environment",function(){return this.__name__==="__frame__"?this.__parent__:this},`(current-environment)

            Function return current environement.`),"parent.frame":doc("parent.frame",function(){return user_env},`(parent.frame)

            Return parent environment if called from inside function.
            If no parent frame found it return nil.`),eval:doc("eval",function(e,r){var t=this;return r=r||this,_evaluate(e,{env:r,error:function(n){var o=global_env.get("display-error");if(o.call(t,n.message),n.code){var f=n.code.map(function(l,h){return"[".concat(h+1,"]: ").concat(l)}).join(`
`);o.call(t,f)}}})},`(eval expr)
            (eval expr environment)

            Function evalute LIPS Scheme code.`),lambda:new Macro("lambda",function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.dynamic_scope,a=r.error,n=this,o;e.cdr instanceof Pair&&LString.isString(e.cdr.car)&&e.cdr.cdr!==_nil&&(o=e.cdr.car.valueOf());function f(){var h;t&&this instanceof Environment?h=this:h=n,h=h.inherit("lambda");var d=e.car,p=0,b;typeof this!="undefined"&&!(this instanceof Environment)&&(this&&!this.__instance__&&Object.defineProperty(this,"__instance__",{enumerable:!1,get:function(){return!0},set:function(){},configurable:!1}),h.set("this",this));for(var A=arguments.length,E=new Array(A),F=0;F<A;F++)E[F]=arguments[F];if(this instanceof Environment){var M={throwError:!1};h.set("arguments",this.get("arguments",M)),h.set("parent.frame",this.get("parent.frame",M))}else{var D=E.slice();D.callee=f,D.env=h,h.set("arguments",D)}if(d instanceof LSymbol||d!==_nil)for(;;){if(d.car!==_nil)if(d instanceof LSymbol){b=quote(Pair.fromArray(E.slice(p),!1)),h.__env__[d.__name__]=b;break}else b=E[p],h.__env__[d.car.__name__]=b;if(d.cdr===_nil)break;p++,d=d.cdr}t&&(t=h);var C=o?e.cdr.cdr:e.cdr,P=new Pair(new LSymbol("begin"),C);return _evaluate(P,{env:h,dynamic_scope:t,error:a})}var l=e.car instanceof Pair?e.car.length():null;return f.__code__=new Pair(new LSymbol("lambda"),e),f[__lambda__]=!0,e.car instanceof Pair?doc(set_fn_length(f,l),o,!0):doc(f,o,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new Macro("macroexpand",macro_expand()),"macroexpand-1":new Macro("macroexpand-1",macro_expand(!0)),"define-macro":doc(new Macro(macro,function(e,r){var t=r.dynamic_scope,a=r.error;if(e.car instanceof Pair&&e.car.car instanceof LSymbol){var n=e.car.car.__name__,o;LString.isString(e.cdr.car)&&e.cdr.cdr instanceof Pair&&(o=e.cdr.car.valueOf());var f=Macro.defmacro(n,function(l){for(var h=new Environment({},this,"defmacro"),d=e.car.cdr,p=l;d!==_nil;){if(d instanceof LSymbol){h.__env__[d.__name__]=p;break}else d.car!==_nil&&(p===_nil?h.__env__[d.car.__name__]=_nil:(p.car instanceof Pair&&(p.car[__data__]=!0),h.__env__[d.car.__name__]=p.car));if(d.cdr===_nil)break;p!==_nil&&(p=p.cdr),d=d.cdr}t&&(t=h);var b={env:h,dynamic_scope:t,error:a};if(e.cdr instanceof Pair){var A=o?e.cdr.cdr:e.cdr,E=A.reduce(function(F,M){return _evaluate(M,b)});return unpromise(E,function(F){return _typeof(F)==="object"&&delete F[__data__],F})}},o,!0);f.__code__=new Pair(new LSymbol("define-macro"),e),this.set(n,f)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),"syntax-rules":new Macro("syntax-rules",function(e,r){var t=r.dynamic_scope,a=r.error,n=this;function o(h){for(var d=[];h!==_nil;){var p=h.car;d.push(p.valueOf()),h=h.cdr}return d}function f(h){for(;h!==_nil;){var d=h.car;if(!(d instanceof LSymbol))throw new Error("syntax-rules: wrong identifier");h=h.cdr}}e.car instanceof LSymbol?f(e.cdr.car):f(e.car);var l=new Syntax(function(h,d){var p=d.macro_expand,b=n.inherit("syntax");t&&(t=b);var A=this;if(A.__name__===Syntax.__merge_env__){var E=Object.getOwnPropertySymbols(A.__env__);E.forEach(function(G){A.__parent__.set(G,A.__env__[G])}),A=A.__parent__}var F={env:b,dynamic_scope:t,error:a},M,D,C;for(e.car instanceof LSymbol?(M=e.car,C=o(e.cdr.car),D=e.cdr.cdr):(M="...",C=o(e.car),D=e.cdr);D!==_nil;){var P=D.car.car,O=D.car.cdr.car;log(P);var k=extract_patterns(P,h,C,M,{expansion:this,define:n});if(k){is_debug()&&(console.log(JSON.stringify(symbolize(k),!0,2)),console.log("PATTERN: "+P.toString(!0)),console.log("MACRO: "+h.toString(!0)));var B=[],T=transform_syntax({bindings:k,expr:O,symbols:C,scope:b,lex_scope:A,names:B,ellipsis:M});T&&(O=T);var q=A.merge(b,Syntax.__merge_env__);if(p)return{expr:O,scope:q};var N=_evaluate(O,_objectSpread(_objectSpread({},F),{},{env:q}));return clear_gensyms(N,B)}D=D.cdr}throw new Error("Invalid Syntax ".concat(h.toString(!0)))},n);return l.__code__=e,l},`(syntax-rules () (pattern expression) ...)

            Base of Hygienic macro, it will return new syntax expander
            that works like lisp macros.`),quote:doc(new Macro("quote",function(e){return quote(e.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":doc("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:doc("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:Macro.defmacro("quasiquote",function(e,r){var t=r.dynamic_scope,a=r.error,n=this;t&&(t=n);function o(D){return D instanceof Pair||is_plain_object(D)||Array.isArray(D)}function f(D,C){var P=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:o;if(D instanceof Pair){var O=D.car,k=D.cdr;return P(O)&&(O=C(O)),P(k)&&(k=C(k)),is_promise(O)||is_promise(k)?promise_all([O,k]).then(function(B){var T=_slicedToArray(B,2),q=T[0],N=T[1];return new Pair(q,N)}):new Pair(O,k)}return D}function l(D,C){return D instanceof Pair?C!==_nil&&D.append(C):D=new Pair(D,C),D}function h(D){return!!D.filter(function(C){return C instanceof Pair&&LSymbol.is(C.car,/^(unquote|unquote-splicing)$/)}).length}function d(D,C,P){return D.reduce(function(O,k){if(!(k instanceof Pair))return O.push(k),O;if(LSymbol.is(k.car,"unquote-splicing")){var B;if(C+1<P?B=E(k.cdr,C+1,P):B=_evaluate(k.cdr.car,{env:n,dynamic_scope:t,error:a}),!(B instanceof Pair))throw new Error("Expecting list ".concat(type(k)," found"));return O.concat(B.to_array())}return O.push(E(k,C,P)),O},[])}function p(D,C,P){var O={};return C++,Object.keys(D).forEach(function(k){var B=D[k];if(B instanceof Pair){if(LSymbol.is(B.car,"unquote-splicing"))throw new Error("You can't call `unquote-splicing` inside object");var T;C<P?T=E(B.cdr.car,C,P):T=_evaluate(B.cdr.car,{env:n,dynamic_scope:t,error:a}),O[k]=T}else O[k]=B}),Object.isFrozen(D)&&Object.freeze(O),O}function b(D,C,P){if(C<P)return new Pair(new Pair(D.car.car,E(D.car.cdr,C,P)),_nil);var O=[];return function k(B){var T=_evaluate(B.car,{env:n,dynamic_scope:t,error:a});return O.push(T),B.cdr instanceof Pair?k(B.cdr):unpromise(O,function(q){if(q.some(function(V){return!(V instanceof Pair)})){if(D.cdr instanceof Pair&&LSymbol.is(D.cdr.car,".")&&D.cdr.cdr instanceof Pair&&D.cdr.cdr.cdr===_nil)return D.cdr.cdr.car;if(!(D.cdr===_nil||D.cdr instanceof Pair)){var N="You can't splice atom inside list";throw new Error(N)}if(q.length>1){var G="You can't splice multiple atoms inside list";throw new Error(G)}if(!(D.cdr instanceof Pair&&q[0]===_nil))return q[0]}q=q.map(function(V){return A.has(V)?V.clone():(A.add(V),V)});var H=E(D.cdr,0,1);return H===_nil&&q[0]===_nil?undefined$1:unpromise(H,function(V){if(q[0]===_nil)return V;if(q.length===1)return l(q[0],V);var j=q.reduce(function(L,u){return l(L,u)});return l(j,V)})})}(D.car.cdr)}var A=new Set;function E(D,C,P){if(D instanceof Pair){if(D.car instanceof Pair){if(LSymbol.is(D.car.car,"unquote-splicing"))return b(D,C+1,P);if(LSymbol.is(D.car.car,"unquote")){if(C+2===P&&D.car.cdr instanceof Pair&&D.car.cdr.car instanceof Pair&&LSymbol.is(D.car.cdr.car.car,"unquote-splicing")){var O=D.car.cdr;return new Pair(new Pair(new LSymbol("unquote"),b(O,C+2,P)),_nil)}else if(D.car.cdr instanceof Pair&&D.car.cdr.cdr!==_nil)if(D.car.cdr.car instanceof Pair){var k=[];return function q(N){return N===_nil?Pair.fromArray(k):unpromise(_evaluate(N.car,{env:n,dynamic_scope:t,error:a}),function(G){return k.push(G),q(N.cdr)})}(D.car.cdr)}else return D.car.cdr}}if(LSymbol.is(D.car,"quasiquote")){var B=E(D.cdr,C,P+1);return new Pair(D.car,B)}if(LSymbol.is(D.car,"quote"))return new Pair(D.car,E(D.cdr,C,P));if(LSymbol.is(D.car,"unquote")){if(C++,C<P)return new Pair(new LSymbol("unquote"),E(D.cdr,C,P));if(C>P)throw new Error("You can't call `unquote` outside of quasiquote");if(D.cdr instanceof Pair)if(D.cdr.cdr!==_nil)if(D.cdr.car instanceof Pair){var T=[];return function q(N){return N===_nil?Pair.fromArray(T):unpromise(_evaluate(N.car,{env:n,dynamic_scope:t,error:a}),function(G){return T.push(G),q(N.cdr)})}(D.cdr)}else return D.cdr;else return _evaluate(D.cdr.car,{env:n,dynamic_scope:t,error:a});else return D.cdr}return f(D,function(q){return E(q,C,P)})}else{if(is_plain_object(D))return p(D,C,P);if(D instanceof Array)return d(D,C,P)}return D}function F(D){D instanceof Pair&&(delete D[__data__],D.haveCycles("car")||F(D.car),D.haveCycles("cdr")||F(D.cdr))}if(is_plain_object(e.car)&&!h(Object.values(e.car))||Array.isArray(e.car)&&!h(e.car)||e.car instanceof Pair&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote"))return quote(e.car);var M=E(e.car,0,1);return unpromise(M,function(D){return F(D),quote(D)})},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:doc("clone",function(r){return typecheck("clone",r,"pair"),r.clone()},`(clone list)

            Function return clone of the list.`),append:doc("append",function(){for(var r,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a=a.map(function(o){return o instanceof Pair?o.clone():o}),(r=global_env.get("append!")).call.apply(r,[this].concat(_toConsumableArray(a)))},`(append item ...)

            Function will create new list with eac argument appended to the end.
            It will always return new list and not modify it's arguments.`),"append!":doc("append!",function(){for(var e=global_env.get("list?"),r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.reduce(function(n,o){if(typecheck("append!",n,["nil","pair"]),(o instanceof Pair||o===_nil)&&!e(o))throw new Error("append!: Invalid argument, value is not a list");return is_null(o)?n:n===_nil?o===_nil?_nil:o:n.append(o)},_nil)},`(append! arg1 ...)

             Destructive version of append, it modify the list in place. It return
             new list where each argument is appened to the end. It may modify
             lists added as arguments.`),reverse:doc("reverse",function(r){if(typecheck("reverse",r,["array","pair","nil"]),r===_nil)return _nil;if(r instanceof Pair){var t=global_env.get("list->array")(r).reverse();return global_env.get("array->list")(t)}else{if(r instanceof Array)return r.reverse();throw new Error(typeErrorMessage("reverse",type(r),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:doc("nth",function(r,t){if(typecheck("nth",r,"number"),typecheck("nth",t,["array","pair"]),t instanceof Pair){for(var a=t,n=0;n<r;){if(!a.cdr||a.cdr===_nil||a.haveCycles("cdr"))return _nil;a=a.cdr,n++}return a.car}else{if(t instanceof Array)return t[r];throw new Error(typeErrorMessage("nth",type(t),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:doc("list",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.reverse().reduce(function(n,o){return new Pair(o,n)},_nil)},`(list . args)

            Function create new list out of its arguments.`),substring:doc("substring",function(r,t,a){return typecheck("substring",r,"string"),typecheck("substring",t,"number"),typecheck("substring",a,["number","undefined"]),r.substring(t.valueOf(),a&&a.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:doc("concat",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(n,o){return typecheck("concat",n,"string",o+1)}),t.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:doc("join",function(r,t){return typecheck("join",r,"string"),typecheck("join",t,["pair","nil"]),global_env.get("list->array")(t).join(r)},`(join separator list)

            Function return string by joining elements of the list`),split:doc("split",function(r,t){return typecheck("split",r,["regex","string"]),typecheck("split",t,"string"),global_env.get("array->list")(t.split(r))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:doc("replace",function(r,t,a){return typecheck("replace",r,["regex","string"]),typecheck("replace",t,["string","function"]),typecheck("replace",a,"string"),a.replace(r,t)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:doc("match",function(r,t){typecheck("match",r,["regex","string"]),typecheck("match",t,"string");var a=t.match(r);return a?global_env.get("array->list")(a):!1},`(match pattern string)

            function return match object from JavaScript as list or #f if not match.`),search:doc("search",function(r,t){return typecheck("search",r,["regex","string"]),typecheck("search",t,"string"),t.search(r)},`(search pattern string)

            Function return first found index of the pattern inside a string`),repr:doc("repr",function(r,t){return toString(r,t)},`(repr obj)

            Function return string LIPS representation of an object as string.`),"escape-regex":doc("escape-regex",function(e){return typecheck("escape-regex",e,"string"),escape_regex(e.valueOf())},`(escape-regex string)

            Function return new string where all special operators used in regex,
            are escaped with slash so they can be used in RegExp constructor
            to match literal string`),env:doc("env",function e(e){e=e||this;var r=Object.keys(e.__env__).map(LSymbol),t;return r.length?t=Pair.fromArray(r):t=_nil,e.__parent__ instanceof Environment?global_env.get("env")(e.__parent__).append(t):t},`(env)
            (env obj)

            Function return list of values (functions, macros and variables)
            inside environment and it's parents.`),new:doc("new",function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];var n=_construct(unbind(e),_toConsumableArray(t.map(function(o){return unbox(o)})));return n},`(new obj . args)

            Function create new JavaScript instance of an object.`),typecheck:doc(typecheck,`(typecheck label value type [position])

             Function check type and throw exception if type don't match.
             Type can be string or list of strings. Position optional argument
             is used to created proper error message.`),"unset-special!":doc("unset-special!",function(e){typecheck("remove-special!",e,"string"),delete specials.remove(e.valueOf())},`(unset-special! name)

            Function remove special symbol from parser. Added by \`set-special!\`,
            name must be a string.`),"set-special!":doc("set-special!",function(e,r){var t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:specials.LITERAL;typecheck("set-special!",e,"string",1),typecheck("set-special!",r,"symbol",2),specials.append(e.valueOf(),r,t)},`(set-special! symbol name [type])

            Add special symbol to the list of transforming operators by the parser.
            e.g.: \`(add-special! "#" 'x)\` will allow to use \`#(1 2 3)\` and it will be
            transformed into (x (1 2 3)) so you can write x macro that will process
            the list. 3rd argument is optional and it can be constant value
            lips.specials.SPLICE if this constant is used it will transform
            \`#(1 2 3)\` into (x 1 2 3) that is required by # that define vectors.`),get,".":get,unbind:doc(unbind,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:doc(type,`(type object)

             Function return type of an object as string.`),debugger:doc("debugger",function(){debugger},`(debugger)

            Function stop JavaScript code in debugger.`),in:doc("in",function(e,r){return(e instanceof LSymbol||e instanceof LString||e instanceof LNumber)&&(e=e.valueOf()),e in unbox(r)},`(in key value)

            Function use is in operator to check if value is in object.`),instanceof:doc("instanceof",function(e,r){return r instanceof unbind(e)},`(instanceof type obj)

            Function check of object is instance of object.`),"prototype?":doc("prototype?",is_prototype,`(prototype? obj)

             Function check if value is JavaScript Object prototype.`),"macro?":doc("macro?",function(e){return e instanceof Macro},`(macro? expression)

            Function check if value is a macro.`),"function?":doc("function?",is_function,`(function? expression)

             Function check if value is a function.`),"real?":doc("real?",function(e){return type(e)!=="number"?!1:e instanceof LNumber?e.isFloat():LNumber.isFloat(e)},`(real? number)

            Function check if value is real number.`),"number?":doc("number?",function(e){return Number.isNaN(e)||LNumber.isNumber(e)},`(number? expression)

            Function check if value is a number or NaN value.`),"string?":doc("string?",function(e){return LString.isString(e)},`(string? expression)

            Function check if value is a string.`),"pair?":doc("pair?",function(e){return e instanceof Pair},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":doc("regex?",function(e){return e instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":doc("null?",function(e){return is_null(e)},`(null? expression)

            Function check if value is nulish.`),"boolean?":doc("boolean?",function(e){return typeof e=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":doc("symbol?",function(e){return e instanceof LSymbol},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":doc("array?",function(e){return e instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":doc("object?",function(e){return e!==_nil&&e!==null&&!(e instanceof LCharacter)&&!(e instanceof RegExp)&&!(e instanceof LString)&&!(e instanceof Pair)&&!(e instanceof LNumber)&&_typeof(e)==="object"&&!(e instanceof Array)},`(object? expression)

            Function check if value is an plain object.`),flatten:doc("flatten",function(r){return typecheck("flatten",r,"pair"),r.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":doc("array->list",function(e){return typecheck("array->list",e,"array"),Pair.fromArray(e)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":doc("tree->array",to_array("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":doc("list->array",to_array("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:doc("apply",function(r){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];typecheck("apply",r,"function",1);var o=a.pop();return typecheck("apply",o,["pair","nil"],a.length+2),a=a.concat(global_env.get("list->array").call(this,o)),r.apply(this,prepare_fn_args(r,a))},`(apply fn list)

            Function that call function with list of arguments.`),length:doc("length",function(r){if(!r)return LNumber(0);if(r instanceof Pair)return LNumber(r.length());if("length"in r)return LNumber(r.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),"string->number":doc("string->number",function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:10;if(typecheck("string->number",e,"string",1),typecheck("string->number",r,"number",2),e=e.valueOf(),r=r.valueOf(),e.match(rational_bare_re)||e.match(rational_re))return parse_rational(e,r);if(e.match(complex_bare_re)||e.match(complex_re))return parse_complex(e,r);var t=r===10&&!e.match(/e/i)||r===16;return e.match(int_bare_re)&&t||e.match(int_re)?parse_integer(e,r):e.match(float_re)?parse_float(e):!1},`(string->number number [radix])

           Function convert string to number.`),try:doc(new Macro("try",function(e,r){var t=this,a=r.dynamic_scope,n=r.error;return new Promise(function(o,f){var l,h;if(LSymbol.is(e.cdr.car.car,"catch")?(l=e.cdr.car,e.cdr.cdr instanceof Pair&&LSymbol.is(e.cdr.cdr.car.car,"finally")&&(h=e.cdr.cdr.car)):LSymbol.is(e.cdr.car.car,"finally")&&(h=e.cdr.car),!(h||l))throw new Error("try: invalid syntax");var d=o;h&&(d=function(E,F){d=f,unpromise(_evaluate(new Pair(new LSymbol("begin"),h.cdr),p),function(){F(E)})});var p={env:t,error:function(E){var F=t.inherit("try");if(l){F.set(l.cdr.car.car,E);var M={env:F,error:n};a&&(M.dynamic_scope=t),unpromise(_evaluate(new Pair(new LSymbol("begin"),l.cdr.cdr),M),function(D){d(D,o)})}else d(E,n)}};a&&(p.dynamic_scope=t);var b=_evaluate(e.car,p);is_promise(b)?b.then(function(A){d(A,o)}).catch(p.error):d(b,o)})}),`(try expr (catch (e) code))
             (try expr (catch (e) code) (finally code))
             (try expr (finally code))

             Macro execute user code and catch exception. If catch is provided
             it's executed when expression expr throw error. If finally is provide
             it's always executed at the end.`),raise:doc("raise",function(e){throw e},`(raise obj)

            Throws new exception with given object.`),throw:doc("throw",function(e){throw new Error(e)},`(throw string)

            Throws new expection.`),find:doc("find",function e(r,t){if(typecheck("find",r,["regex","function"]),typecheck("find",t,["pair","nil"]),is_null(t))return _nil;var a=matcher("find",r);return unpromise(a(t.car),function(n){return n&&n!==_nil?t.car:e(r,t.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":doc("for-each",function(e){var r;typecheck("for-each",e,"function");for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];a.forEach(function(f,l){typecheck("for-each",f,["pair","nil"],l+1)});var o=(r=global_env.get("map")).call.apply(r,[this,e].concat(a));if(is_promise(o))return o.then(function(){})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:doc("map",function e(r){for(var t=this,a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];typecheck("map",r,"function");var f=global_env.get("list?");if(n.forEach(function(p,b){if(typecheck("map",p,["pair","nil"],b+1),p instanceof Pair&&!f.call(t,p))throw new Error("map: argument ".concat(b+1," is not a list"))}),n.length===0||n.some(function(p){return p===_nil}))return _nil;var l=n.map(function(p){return p.car}),h=this.get("parent.frame"),d=this.newFrame(r,l);return d.set("parent.frame",h),unpromise(r.call.apply(r,[d].concat(_toConsumableArray(l))),function(p){return unpromise(e.call.apply(e,[t,r].concat(_toConsumableArray(n.map(function(b){return b.cdr})))),function(b){return new Pair(p,b)})})},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),"list?":doc("list?",function(e){for(var r=e;;){if(r===_nil)return!0;if(!(r instanceof Pair)||r.haveCycles("cdr"))return!1;r=r.cdr}},`(list? obj)

            Function test if value is proper linked list structure.
            The car of each pair can be any value. It return false on cycles."`),some:doc("some",function e(r,t){return typecheck("some",r,"function"),typecheck("some",t,["pair","nil"]),is_null(t)?!1:unpromise(r(t.car),function(a){return a||e(r,t.cdr)})},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If none of the values give true, the function return false`),fold:doc("fold",fold("fold",function(e,r,t){for(var a=arguments.length,n=new Array(a>3?a-3:0),o=3;o<a;o++)n[o-3]=arguments[o];if(typecheck("fold",r,"function"),n.forEach(function(l,h){typecheck("fold",l,["pair","nil"],h+1)}),n.some(function(l){return l===_nil}))return t;var f=e.call.apply(e,[this,r,t].concat(_toConsumableArray(n.map(function(l){return l.cdr}))));return unpromise(f,function(l){return r.apply(void 0,_toConsumableArray(n.map(function(h){return h.car})).concat([l]))})}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements of the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist)`),pluck:doc("pluck",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return function(n){if(t=t.map(function(d){return d instanceof LSymbol?d.__name__:d}),t.length===0)return _nil;if(t.length===1){var o=t,f=_slicedToArray(o,1),l=f[0];return n[l]}var h={};return t.forEach(function(d){h[d]=n[d]}),h}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:doc("reduce",fold("reduce",function(e,r,t){for(var a=this,n=arguments.length,o=new Array(n>3?n-3:0),f=3;f<n;f++)o[f-3]=arguments[f];return typecheck("reduce",r,"function"),o.forEach(function(l,h){typecheck("reduce",l,["pair","nil"],h+1)}),o.some(function(l){return l===_nil})?t:unpromise(r.apply(void 0,_toConsumableArray(o.map(function(l){return l.car})).concat([t])),function(l){return e.call.apply(e,[a,r,l].concat(_toConsumableArray(o.map(function(h){return h.cdr}))))})}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist)`),filter:doc("filter",function(r,t){typecheck("filter",r,["regex","function"]),typecheck("filter",t,["pair","nil"]);var a=global_env.get("list->array")(t),n=[],o=matcher("filter",r);return function f(l){function h(p){return p&&p!==_nil&&n.push(d),f(++l)}if(l===a.length)return Pair.fromArray(n);var d=a[l];return unpromise(o(d),h)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),compose:doc(compose,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:doc(pipe,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:doc(curry,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),gcd:doc("gcd",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return typecheck_args("lcm",t,"number"),t.reduce(function(n,o){return n.gcd(o)})},`(gcd n1 n2 ...)

            Function return the greatest common divisor of their arguments.`),lcm:doc("lcm",function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];typecheck_args("lcm",t,"number");for(var n=t.length,o=abs(t[0]),f=1;f<n;f++){for(var l=abs(t[f]),h=o;o&&l;)o>l?o%=l:l%=o;o=abs(h*t[f])/(o+l)}return LNumber(o)},`(lcm n1 n2 ...)

            Function return the least common multiple of their arguments.`),"odd?":doc("odd?",single_math_op(function(e){return LNumber(e).isOdd()}),`(odd? number)

             Function check if number os odd.`),"even?":doc("even?",single_math_op(function(e){return LNumber(e).isEven()}),`(even? number)

             Function check if number is even.`),"*":doc("*",reduce_math_op(function(e,r){return LNumber(e).mul(r)},LNumber(1)),`(* . numbers)

        Multiplicate all numbers passed as arguments. If single value is passed
        it will return that value.`),"+":doc("+",reduce_math_op(function(e,r){return LNumber(e).add(r)},LNumber(0)),`(+ . numbers)

        Sum all numbers passed as arguments. If single value is passed it will
        return that value.`),"-":doc("-",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length===0)throw new Error("-: procedure require at least one argument");if(typecheck_args("-",r,"number"),r.length===1)return LNumber(r[0]).sub();if(r.length)return r.reduce(binary_math_op(function(a,n){return LNumber(a).sub(n)}))},`(- n1 n2 ...)
            (- n)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":doc("/",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length===0)throw new Error("/: procedure require at least one argument");return typecheck_args("/",r,"number"),r.length===1?LNumber(1).div(r[0]):r.reduce(binary_math_op(function(a,n){return LNumber(a).div(n)}))},`(/ n1 n2 ...)
            (/ n)

            Divide number passed as arguments one by one. If single argument
            is passed it will calculate (/ 1 n1).`),abs:doc("abs",single_math_op(function(e){return LNumber(e).abs()}),`(abs number)

             Function create absolute value from number.`),truncate:doc("truncate",function(e){return typecheck("truncate",e,"number"),LNumber.isFloat(e)?(e instanceof LNumber&&(e=e.valueOf()),LFloat(truncate(e))):e},`(truncate n)

            Function return integer value from real number.`),sqrt:doc("sqrt",single_math_op(function(e){return LNumber(e).sqrt()}),`(sqrt number)

             Function return square root of the number.`),"**":doc("**",binary_math_op(function(e,r){return e=LNumber(e),r=LNumber(r),r.cmp(0)===-1?LFloat(1).div(e).pow(r.sub()):e.pow(r)}),`(** a b)

            Function calculate number a to to the power of b.`),"1+":doc("1+",single_math_op(function(e){return LNumber(e).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":doc(single_math_op(function(e){return LNumber(e).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"%":doc("%",function(e,r){return typecheck_args("%",[e,r],"number"),LNumber(e).rem(r)},`(% n1 n2)

             Function get reminder of it's arguments.`),"==":doc("==",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return typecheck_args("==",r,"number"),seq_compare(function(a,n){return LNumber(a).cmp(n)===0},r)},`(== x1 x2 ...)

            Function compare its numerical arguments and check if they are equal`),">":doc(">",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return typecheck_args(">",r,"number"),seq_compare(function(a,n){return LNumber(a).cmp(n)===1},r)},`(> x1 x2 ...)

            Function compare its numerical arguments and check if they are
            monotonically increasing`),"<":doc("<",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return typecheck_args("<",r,"number"),seq_compare(function(a,n){return LNumber(a).cmp(n)===-1},r)},`(< x1 x2 ...)

            Function compare its numerical arguments and check if they are
            monotonically decreasing`),"<=":doc("<=",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return typecheck_args("<=",r,"number"),seq_compare(function(a,n){return[0,-1].includes(LNumber(a).cmp(n))},r)},`(<= x1 x2 ...)

            Function compare its numerical arguments and check if they are
            monotonically nonincreasing`),">=":doc(">=",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return typecheck_args(">=",r,"number"),seq_compare(function(a,n){return[0,1].includes(LNumber(a).cmp(n))},r)},`(>= x1 x2 ...)

            Function compare its numerical arguments and check if they are
            monotonically nondecreasing`),"eq?":doc("eq?",equal,`(eq? a b)

             Function compare two values if they are identical.`),or:doc(new Macro("or",function(e,r){var t=r.dynamic_scope,a=r.error,n=global_env.get("list->array")(e),o=this;if(t&&(t=o),!n.length)return!1;var f;return function l(){function h(b){return f=b,f!==!1?f:l()}if(n.length){var d=n.shift(),p=_evaluate(d,{env:o,dynamic_scope:t,error:a});return unpromise(p,h)}else return f!==!1?f:!1}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:doc(new Macro("and",function(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.dynamic_scope,a=r.error,n=global_env.get("list->array")(e),o=this;if(t&&(t=o),!n.length)return!0;var f;return function l(){function h(b){return f=b,f===!1?!1:l()}var d=n.shift();if(typeof d=="undefined")return f!==!1?f:!1;var p=_evaluate(d,{env:o,dynamic_scope:t,error:a});return unpromise(p,h)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":doc("|",function(e,r){return LNumber(e).or(r)},`(& a b)

            Function calculate or bit operation.`),"&":doc("&",function(e,r){return LNumber(e).and(r)},`(& a b)

            Function calculate and bit operation.`),"~":doc("~",function(e){return LNumber(e).neg()},`(~ number)

            Function negate the value.`),">>":doc(">>",function(e,r){return LNumber(e).shr(r)},`(>> a b)

            Function right shit the value a by value b.`),"<<":doc("<<",function(e,r){return LNumber(e).shl(r)},`(<< a b)

            Function left shit the value a by value b.`),not:doc("not",function(r){return is_null(r)?!0:!r},`(not object)

            Function return negation of the argument.`)},undefined$1,"global"),user_env=global_env.inherit("user-env");function set_interaction_env(e,r){e.constant("**internal-env**",r),e.doc("**internal-env**",`**internal-env**

            Constant used to hide stdin, stdout and stderr so they don't interfere
            with variables with the same name. Constants are internal type
            of variables that can't be redefined, defining variable with same name
            will throw an error.`),global_env.set("**interaction-environment**",e)}set_interaction_env(user_env,internal_env),global_env.doc("**interaction-environment**",`**interaction-environment**

        Internal dynamic, global variable used to find interpreter environment.
        It's used so the read and write functions can locate **internal-env**
        that contain references to stdin, stdout and stderr.`),function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(r){var t=e[r]?e[r]:r;global_env.set(t,doc(t,function(a){if(typecheck(t,a,"number"),a instanceof LNumber)return a[r]()},"(".concat(t,` number)

                Function calculate `).concat(t," of a number.")))})}();function allPossibleCases(e){if(e.length===1)return e[0];for(var r=[],t=allPossibleCases(e.slice(1)),a=0;a<t.length;a++)for(var n=0;n<e[0].length;n++)r.push(e[0][n]+t[a]);return r}function combinations(e,r,t){for(var a=[],n=r;n<=t;++n){for(var o=[],f=0;f<n;++f)o.push(e);a=a.concat(allPossibleCases(o))}return a}combinations(["d","a"],2,5).forEach(function(e){var r=e.split(""),t=r.slice().reverse(),a=r.map(function(o){return"(c".concat(o,"r")}).join(" ")+" arg"+")".repeat(r.length),n="c"+e+"r";global_env.set(n,doc(n,function(o){return t.reduce(function(f,l){return typecheck(n,f,"pair"),l==="a"?f.car:f.cdr},o)},"(".concat(n,` arg)

            Function calculate `).concat(a)))});function reversseFind(e,r){for(var t=e.split(path.sep).filter(Boolean),a=t.length;a--;){var n=path.join.apply(path,["/"].concat(_toConsumableArray(t.slice(0,a+1))));if(r(n))return n}}function nodeModuleFind(e){return reversseFind(e,function(r){return fs.existsSync(path.join(r,"node_modules"))})}function is_node(){return typeof global!="undefined"&&global.global===global}if(is_node()){var nodeRequire=eval("require"),fs=nodeRequire("fs"),path=nodeRequire("path");global_env.set("global",global),global_env.set("self",global),global_env.set("window",undefined$1),global_env.set("__dirname",__dirname),global_env.set("__filename",__filename),global_env.set("require.resolve",doc("require.resolve",function(e){typecheck("require.resolve",e,"string");var r=e.valueOf();return nodeRequire.resolve(r)},`(require.resolve path)

           Return path relative the current module.`)),global_env.set("require",doc("require",function(e){typecheck("require",e,"string"),e=e.valueOf();var r=process.cwd(),t;try{if(e.match(/^\s*\./))t=nodeRequire(path.join(r,e));else{var a=nodeModuleFind(r);a?t=nodeRequire(path.join(a,"node_modules",e)):t=nodeRequire(e)}}catch(n){t=nodeRequire(e)}return patch_value(t,global)},`(require module)

            Function to be used inside Node.js to import the module.`))}else typeof window!="undefined"&&window===root?(global_env.set("window",window),global_env.set("global",undefined$1),global_env.set("self",window)):typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&(global_env.set("self",self),global_env.set("window",undefined$1),global_env.set("global",undefined$1));function typeErrorMessage(e,r,t){var a=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:null,n=e?" in expression `".concat(e,"`"):"";if(a!==null&&(n+=" (argument ".concat(a,")")),t instanceof Array)if(t.length===1)t=t[0];else{var o=t[t.length-1];t=t.slice(0,-1).join(", ")+" or "+o}return"Expecting ".concat(t,", got ").concat(r).concat(n)}function typecheck_args(e,r,t){r.forEach(function(a,n){typecheck(e,a,t,n+1)})}function typecheck_text_port(e,r,t){if(typecheck(e,r,t),r.__type__===binary_port)throw new Error(typeErrorMessage(e,"binary-port","textual-port"))}function typecheck(e,r,t){var a=arguments.length>3&&arguments[3]!==undefined$1?arguments[3]:null;e=e.valueOf();var n=type(r).toLowerCase(),o=!1;if(t instanceof Pair&&(t=t.to_array()),t instanceof Array&&(t=t.map(function(f){return f.valueOf()})),t instanceof Array?(t=t.map(function(f){return f.valueOf().toLowerCase()}),t.includes(n)&&(o=!0)):t=t.valueOf().toLowerCase(),!o&&n!==t)throw new Error(typeErrorMessage(e,n,t,a))}function self_evaluated(e){var r=_typeof(e);return["string","function"].includes(r)||_typeof(e)==="symbol"||e instanceof QuotedPromise||e instanceof LSymbol||e instanceof LNumber||e instanceof LString||e instanceof RegExp}function is_native(e){return e instanceof LNumber||e instanceof LString||e instanceof LCharacter}function has_own_symbol(e,r){return e===null?!1:_typeof(e)==="object"&&r in Object.getOwnPropertySymbols(e)}function is_iterator(e,r){if(has_own_symbol(e,r)||has_own_symbol(e.__proto__,r))return is_function(e[r])}function type(e){var r={pair:Pair,symbol:LSymbol,character:LCharacter,values:Values,"input-port":InputPort,"output-port":OutputPort,number:LNumber,regex:RegExp,syntax:Syntax,macro:Macro,string:LString,array:Array,"native-symbol":Symbol};if(Number.isNaN(e))return"NaN";if(e===_nil)return"nil";if(e===null)return"null";for(var t=0,a=Object.entries(r);t<a.length;t++){var n=_slicedToArray(a[t],2),o=n[0],f=n[1];if(e instanceof f)return o}if(_typeof(e)==="object"){if(e.__instance__&&(e.__instance__=!1,e.__instance__))return is_function(e.toType)?e.toType():"instance";if(e.constructor){if(e.constructor.__class__)return e.constructor.__class__;if(e.constructor===Object){if(is_iterator(e,Symbol.iterator))return"iterator";if(is_iterator(e,Symbol.asyncIterator))return"async-iterator"}return e.constructor.name.toLowerCase()}}return _typeof(e)}function resolve_promises(e){var r=[];if(t(e),r.length)return o(e);return e;function t(f){is_promise(f)?r.push(f):f instanceof Pair?(f.haveCycles("car")||t(f.car),f.haveCycles("cdr")||t(f.cdr)):f instanceof Array&&f.forEach(t)}function a(f){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(regenerator.mark(function f(l){var h;return regenerator.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(p.t0=Pair,!l.haveCycles("car")){p.next=5;break}p.t1=l.car,p.next=8;break;case 5:return p.next=7,o(l.car);case 7:p.t1=p.sent;case 8:if(p.t2=p.t1,!l.haveCycles("cdr")){p.next=13;break}p.t3=l.cdr,p.next=16;break;case 13:return p.next=15,o(l.cdr);case 15:p.t3=p.sent;case 16:return p.t4=p.t3,h=new p.t0(p.t2,p.t4),l[__data__]&&(h[__data__]=!0),p.abrupt("return",h);case 20:case"end":return p.stop()}},f)})),n.apply(this,arguments)}function o(f){return f instanceof Array?promise_all(f.map(o)):f instanceof Pair&&r.length?a(f):f}}function evaluate_args(e,r){var t=r.env,a=r.dynamic_scope,n=r.error,o=[],f=e;markCycles(f);function l(){return o}return function h(){if(f instanceof Pair){var d=_evaluate(f.car,{env:t,dynamic_scope:a,error:n});return a&&(d=unpromise(d,function(p){return is_native_function(p)?p.bind(a):p})),unpromise(resolve_promises(d),function(p){return o.push(p),f.haveCycles("cdr")?l():(f=f.cdr,h())})}else{if(f===_nil)return l();throw new Error("Syntax Error: improper list found in apply")}}()}function evaluate_syntax(e,r,t){var a=e.invoke(r,t);return unpromise(resolve_promises(a),function(n){return n instanceof Pair&&n.markCycles(),quote(n)})}function evaluate_macro(e,r,t){function a(o){return o instanceof Pair?(o.markCycles(),o):quote(o)}var n=e.invoke(r,t);return unpromise(resolve_promises(n),function(f){return!f||f&&f[__data__]||self_evaluated(f)?f:unpromise(_evaluate(f,t),a)})}function prepare_fn_args(e,r){if(is_bound(e)&&!is_object_bound(e)&&(!lips_context(e)||is_port_method(e))&&(r=r.map(unbox)),!is_raw_lambda(e)&&r.some(is_lips_function)&&!is_lips_function(e)&&!is_array_method(e)){for(var t=[],a=r.length,n=function(){var l=r[a];is_lips_function(l)?(o=function(){for(var d=arguments.length,p=new Array(d),b=0;b<d;b++)p[b]=arguments[b];return unpromise(l.apply(this,p),unbox)},hidden_prop(o,"__bound__",!0),hidden_prop(o,"__fn__",l),o.prototype=l.prototype,t[a]=o):t[a]=l};a--;){var o;n()}r=t}return r}function apply(e,r){var t=arguments.length>2&&arguments[2]!==undefined$1?arguments[2]:{},a=t.env,n=t.dynamic_scope,o=t.error,f=o===void 0?function(){}:o;return r=evaluate_args(r,{env:a,dynamic_scope:n,error:f}),unpromise(r,function(l){is_raw_lambda(e)&&(e=unbind(e)),l=prepare_fn_args(e,l);var h=l.slice(),d=(n||a).newFrame(e,h),p=resolve_promises(e.apply(d,l));return unpromise(p,function(b){return b instanceof Pair?(b.markCycles(),quote(b)):Number.isNaN(b)?b:typeof b=="number"?LNumber(b):typeof b=="string"?LString(b):b},f)})}function _evaluate(e){var r=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:{},t=r.env,a=r.dynamic_scope,n=r.error,o=n===void 0?function(){}:n;try{a===!0?t=a=t||global_env:t===!0?t=a=global_env:t=t||global_env;var f={env:t,dynamic_scope:a,error:o},l;if(is_null(e))return e;if(e instanceof LSymbol)return t.get(e);if(!(e instanceof Pair))return e;var h=e.car,d=e.cdr;if(h instanceof Pair){if(l=resolve_promises(_evaluate(h,f)),is_promise(l))return l.then(function(E){return _evaluate(new Pair(E,e.cdr),f)});if(!is_function(l))throw new Error(type(l)+" "+t.get("repr")(l)+" is not a function while evaluating "+e.toString())}h instanceof LSymbol?l=t.get(h):is_function(h)&&(l=h);var p;if(l instanceof Syntax)p=evaluate_syntax(l,e,f);else if(l instanceof Macro)p=evaluate_macro(l,d,f);else if(is_function(l))p=apply(l,d,f);else{if(e instanceof Pair)throw l=h&&h.toString(),new Error("".concat(type(h)," ").concat(l," is not a function"));if(is_function(l))return e;if(l){var b="".concat(type(l)," `").concat(l,"' is not a function");throw new Error(b)}throw new Error("Unknown function `".concat(h.toString(),"'"))}var A=t.get(Symbol.for("__promise__"),{throwError:!1});return A===!0&&is_promise(p)?(p=p.then(function(E){return E instanceof Pair&&!l[__data__]?_evaluate(E,f):E}),new QuotedPromise(p)):p}catch(E){o&&o.call(t,E,e)}}function exec(e,r,t){return _exec.apply(this,arguments)}function _exec(){return _exec=_asyncToGenerator(regenerator.mark(function e(r,t,a){var n,o,f,l,h,d,p,b,A,E;return regenerator.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:a===!0?t=a=t||user_env:t===!0?t=a=user_env:t=t||user_env,n=[],o=Array.isArray(r)?r:parse(r),f=!0,l=!1,M.prev=5,d=_asyncIterator(o);case 7:return M.next=9,d.next();case 9:return p=M.sent,f=p.done,M.next=13,p.value;case 13:if(b=M.sent,f){M.next=29;break}if(A=b,E=_evaluate(A,{env:t,dynamic_scope:a,error:function(C,P){if(C&&C.message){if(C.message.match(/^Error:/)){var O=/^(Error:)\s*([^:]+:\s*)/;C.message=C.message.replace(O,"$1 $2")}P&&(C.__code__ instanceof Array||(C.__code__=[]),C.__code__.push(P.toString(!0)))}throw C}}),is_promise(E)){M.next=21;break}n.push(E),M.next=26;break;case 21:return M.t0=n,M.next=24,E;case 24:M.t1=M.sent,M.t0.push.call(M.t0,M.t1);case 26:f=!0,M.next=7;break;case 29:M.next=35;break;case 31:M.prev=31,M.t2=M.catch(5),l=!0,h=M.t2;case 35:if(M.prev=35,M.prev=36,!(!f&&d.return!=null)){M.next=40;break}return M.next=40,d.return();case 40:if(M.prev=40,!l){M.next=43;break}throw h;case 43:return M.finish(40);case 44:return M.finish(35);case 45:return M.abrupt("return",n);case 46:case"end":return M.stop()}},e,null,[[5,31,35,45],[36,,40,44]])})),_exec.apply(this,arguments)}function balanced(e){var r={"[":"]","(":")"},t;typeof e=="string"?t=tokenize(e):t=e.map(function(b){return b&&b.token?b.token:b});var a=Object.keys(r),n=Object.values(r).concat(a);t=t.filter(function(b){return n.includes(b)});var o=new Stack,f=_createForOfIteratorHelper(t),l;try{for(f.s();!(l=f.n()).done;){var h=l.value;if(a.includes(h))o.push(h);else{if(o.is_empty())throw new Error("Syntax error: not matched closing ".concat(h));var d=o.top(),p=r[d];if(h===p)o.pop();else throw new Error("Syntax error: missing closing ".concat(p))}}}catch(b){f.e(b)}finally{f.f()}return o.is_empty()}function fworker(e){var r="("+e.toString()+")()",t=window.URL||window.webkitURL,a;try{a=new Blob([r],{type:"application/javascript"})}catch(o){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;a=new n,a.append(r),a=a.getBlob()}return new root.Worker(t.createObjectURL(a))}function is_dev(){return lips.version.match(/^(\{\{VER\}\}|DEV)$/)}function bootstrap(){var e=arguments.length>0&&arguments[0]!==undefined$1?arguments[0]:"";e===""?is_dev()?e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/":e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(lips.version,"/"):e.match(/\/$/)||(e+="/");var r=global_env.get("load");return r.call(lips.env,"".concat(e,"dist/std.min.scm"),global_env)}function Worker(e){this.url=e;var r=this.worker=fworker(function(){var t,a;self.addEventListener("message",function(n){var o=n.data,f=o.id;if(o.type!=="RPC"||f===null)return;function l(p){self.postMessage({id:f,type:"RPC",result:p})}function h(p){self.postMessage({id:f,type:"RPC",error:p})}if(o.method==="eval"){if(!a){h("Worker RPC: LIPS not initilized, call init first");return}a.then(function(){var p=o.params[0],b=o.params[1];t.exec(p,b).then(function(A){A=A.map(function(E){return E&&E.valueOf()}),l(A)}).catch(function(A){h(A)})})}else if(o.method==="init"){var d=o.params[0];typeof d!="string"?h("Worker RPC: url is not a string"):(importScripts("".concat(d,"/dist/lips.min.js")),t=new lips.Interpreter("worker"),a=bootstrap(d),a.then(function(){l(!0)}))}})});this.rpc=function(){var t=0;return function(n,o){var f=++t;return new Promise(function(l,h){r.addEventListener("message",function d(p){var b=p.data;b&&b.type==="RPC"&&b.id===f&&(b.error?h(b.error):l(b.result),r.removeEventListener("message",d))}),r.postMessage({type:"RPC",method:n,id:f,params:o})})}}(),this.rpc("init",[e]).catch(function(t){console.error(t)}),this.exec=function(t){var a=arguments.length>1&&arguments[1]!==undefined$1?arguments[1]:!1;return this.rpc("eval",[t,a])}}for(var serialization_map={pair:function(r){var t=_slicedToArray(r,2),a=t[0],n=t[1];return Pair(a,n)},number:function(r){return LString.isString(r)?LNumber([r,10]):LNumber(r)},regex:function(r){var t=_slicedToArray(r,2),a=t[0],n=t[1];return new RegExp(a,n)},nil:function(){return _nil},symbol:function(r){if(LString.isString(r))return LSymbol(r);if(Array.isArray(r))return LSymbol(Symbol.for(r[0]))},string:LString,character:LCharacter},available_class=Object.keys(serialization_map),class_map={},_i5=0,_Object$entries3=Object.entries(available_class);_i5<_Object$entries3.length;_i5++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i5],2),i=_Object$entries3$_i[0],cls=_Object$entries3$_i[1];class_map[cls]=+i}function mangle_name(e){return class_map[e]}function resolve_name(e){return available_class[e]}function serialize(e){return JSON.stringify(e,function(r,t){var a=this[r];if(a){if(a instanceof RegExp)return{"@":mangle_name("regex"),"#":[a.source,a.flags]};var n=mangle_name(a.constructor.__class__);if(!is_undef(n))return{"@":n,"#":a.serialize()}}return t})}function unserialize(e){return JSON.parse(e,function(r,t){if(t&&_typeof(t)==="object"&&!is_undef(t["@"])){var a=resolve_name(t["@"]);if(serialization_map[a])return serialization_map[a](t["#"])}return t})}function execError(e){console.error(e.message||e),e.code&&console.error(e.code.map(function(r,t){return"[".concat(t+1,"]: ").concat(r)}))}function init(){var e=["text/x-lips","text/x-scheme"],r;function t(f){return new Promise(function(l){var h=f.getAttribute("src");return h?fetch(h).then(function(d){return d.text()}).then(exec).then(l).catch(function(d){execError(d),l()}):exec(f.innerHTML).then(l).catch(function(d){execError(d),l()})})}function a(){return new Promise(function(f){var l=Array.from(document.querySelectorAll("script"));return function h(){var d=l.shift();if(!d)f();else{var p=d.getAttribute("type");if(e.includes(p)){var b=d.getAttribute("bootstrap");!r&&typeof b=="string"?bootstrap(b).then(function(){return t(d)}).then(h):t(d).then(h)}else p&&p.match(/lips|lisp/)&&console.warn("Expecting "+e.join(" or ")+" found "+p);return h()}}()})}if(window.document){if(currentScript){var n=currentScript,o=n.getAttribute("bootstrap");if(typeof o=="string")return bootstrap(o).then(function(){return r=!0,a()})}}else return Promise.resolve();return a()}var currentScript=typeof window!="undefined"&&window.document&&document.currentScript;typeof window!="undefined"&&contentLoaded(window,init);var banner=function(){var e=LString("{{DATE}}").valueOf(),r=e==="{{DATE}}"?new Date:new Date(e),t=function(l){return l.toString().padStart(2,"0")},a=r.getFullYear(),n=[a,t(r.getMonth()+1),t(r.getDate())].join("-"),o=`
  __ __                          __
 / / \\ \\       _    _  ___  ___  \\ \\
| |   \\ \\     | |  | || . \\/ __>  | |
| |    > \\    | |_ | ||  _/\\__ \\  | |
| |   / ^ \\   |___||_||_|  <___/  | |
 \\_\\ /_/ \\_\\                     /_/

LIPS Interpreter {{VER}} (`.concat(n,`) <https://lips.js.org>
Copyright (c) 2018-`).concat(a,` Jakub T. Jankiewicz

Type (env) to see environment with functions macros and variables. You can also
use (help name) to display help for specic function or macro, (apropos name)
to display list of matched names in environment and (dir object) to list
properties of an object.
`).replace(/^.*\n/,"");return o}();Ahead.__class__="ahead",Pair.__class__="pair",Nil.__class__="nil",Pattern.__class__="pattern",Formatter.__class__="formatter",Macro.__class__="macro",Syntax.__class__="syntax",Environment.__class__="environment",InputPort.__class__="input-port",OutputPort.__class__="output-port",OutputStringPort.__class__="output-string-port",InputStringPort.__class__="input-string-port",InputFilePort.__class__="input-file-port",OutputFilePort.__class__="output-file-port",LipsError.__class__="lips-error",[LNumber,LComplex,LRational,LFloat,LBigInteger].forEach(function(e){e.__class__="number"}),LCharacter.__class__="character",LSymbol.__class__="symbol",LString.__class__="string",QuotedPromise.__class__="promise";var lips={version:"{{VER}}",banner,date:"{{DATE}}",exec,parse:compose(uniterate_async,parse),tokenize,evaluate:_evaluate,serialize,unserialize,bootstrap,Environment,env:user_env,Worker,Interpreter,balanced_parenthesis:balanced,balancedParenthesis:balanced,balanced,Macro,Syntax,Pair,Values,QuotedPromise,Error:LipsError,quote,InputPort,OutputPort,InputFilePort,OutputFilePort,InputStringPort,OutputStringPort,InputByteVectorPort,OutputByteVectorPort,InputBinaryFilePort,OutputBinaryFilePort,Formatter,Parser,Lexer,specials,repr,nil:_nil,eof,LSymbol,LNumber,LFloat,LComplex,LRational,LBigInteger,LCharacter,LString,rationalize};return global_env.set("lips",lips),lips})})()});var qa=Ln(sn());function fn(e){return Sr(rr({},e),{json:JSON.stringify(Va(e),null,2)})}var $a=`
        <svg
          width="48"
          height="48"
          viewBox="0 0 26 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0 14.85L14.3 0V7.29C14.3 11.4653 11.0406 14.85 7.02 14.85H0Z"
            fill="currentColor"
          />
          <path
            d="M11.7 19.71C11.7 15.5347 14.9594 12.15 18.98 12.15H26L11.7 27V19.71Z"
            fill="currentColor"
          />
        </svg>
    `,ja=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.0002 34.828L2.58624 25.414C1.80524 24.633 1.80524 23.367 2.58624 22.586L12.0002 13.172L14.8292 16L6.82924 24L14.8292 32L12.0002 34.828Z" fill="currentColor"/>
<path d="M36.0004 34.828L33.1714 32L41.1714 24L33.1714 16L36.0004 13.172L45.4144 22.586C46.1954 23.367 46.1954 24.633 45.4144 25.414L36.0004 34.828Z" fill="currentColor"/>
<path d="M26.5485 5.57617L17.5723 41.4553L21.4527 42.4261L30.4289 6.54697L26.5485 5.57617Z" fill="currentColor"/>
</svg>`;function Va(e){let{name:r,category:t,description:a,author:n,result:o,params:f,about:l,video:h}=e,{icon:d=ja}=e;return d==="glide"&&(d=$a),{name:r,category:t,description:a,author:n,result:o,about:l,icon:d,video:h,params:Object.entries(f).map(([p,b])=>rr({name:p},b))}}var{exec:Ga,env:za}=pn(),Ua=(e,...r)=>tr(void 0,null,function*(){if((e==null?void 0:e.value)===void 0)return;let t=za.inherit("name",Object.fromEntries(r.map((a,n)=>[`p${n+1}`,a.value])));try{return(yield Ga(e.value,t))[0]}catch(a){return}}),Su=fn({name:"LISP",category:"Code",run:Ua,description:"Runs LISP code",about:`
      Uses [github.com/jcubic/lips](https://github.com/jcubic/lips), a 
      "scheme-based powerful lisp interpreter written in JavaScript."
    `,video:"https://www.youtube.com/watch?v=G3FDnNZF5uA",author:"David Siegel <david@glideapps.com>",params:{code:{displayName:"LISP",type:"string"},p1:{displayName:"p1",type:"primitive"},p2:{displayName:"p2",type:"primitive"},p3:{displayName:"p3",type:"primitive"},p4:{displayName:"p4",type:"primitive"},p5:{displayName:"p5",type:"primitive"}},example:{code:"(+ 1 2 p1)",p1:5},result:{type:"primitive"}});export{Su as default};
/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/
 *
 * <https://lips.js.org>
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * ucs2decode function from Punycode v 2.1.1 by Mathias Bynens MIT License
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * The rationalize algorithm is by Per M.A. Bothner, Alan Bawden and Marc Feeley.
 * source: Kawa, C-Gambit
 *
 * Build time: {{DATE}}
 */
//# sourceMappingURL=function.js.map
